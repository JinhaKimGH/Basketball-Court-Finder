(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var uI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jw={exports:{}},yc={},Vw={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oa=Symbol.for("react.element"),cI=Symbol.for("react.portal"),hI=Symbol.for("react.fragment"),dI=Symbol.for("react.strict_mode"),fI=Symbol.for("react.profiler"),pI=Symbol.for("react.provider"),mI=Symbol.for("react.context"),gI=Symbol.for("react.forward_ref"),vI=Symbol.for("react.suspense"),yI=Symbol.for("react.memo"),_I=Symbol.for("react.lazy"),Xv=Symbol.iterator;function wI(t){return t===null||typeof t!="object"?null:(t=Xv&&t[Xv]||t["@@iterator"],typeof t=="function"?t:null)}var Hw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ww=Object.assign,qw={};function Vs(t,e,n){this.props=t,this.context=e,this.refs=qw,this.updater=n||Hw}Vs.prototype.isReactComponent={};Vs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Zw(){}Zw.prototype=Vs.prototype;function Ap(t,e,n){this.props=t,this.context=e,this.refs=qw,this.updater=n||Hw}var Np=Ap.prototype=new Zw;Np.constructor=Ap;Ww(Np,Vs.prototype);Np.isPureReactComponent=!0;var Jv=Array.isArray,Kw=Object.prototype.hasOwnProperty,Rp={current:null},Gw={key:!0,ref:!0,__self:!0,__source:!0};function Qw(t,e,n){var i,r={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)Kw.call(e,i)&&!Gw.hasOwnProperty(i)&&(r[i]=e[i]);var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){for(var h=Array(c),f=0;f<c;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in c=t.defaultProps,c)r[i]===void 0&&(r[i]=c[i]);return{$$typeof:Oa,type:t,key:o,ref:l,props:r,_owner:Rp.current}}function EI(t,e){return{$$typeof:Oa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Op(t){return typeof t=="object"&&t!==null&&t.$$typeof===Oa}function TI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ey=/\/+/g;function nd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?TI(""+t.key):e.toString(36)}function tu(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Oa:case cI:l=!0}}if(l)return l=t,r=r(l),t=i===""?"."+nd(l,0):i,Jv(r)?(n="",t!=null&&(n=t.replace(ey,"$&/")+"/"),tu(r,e,n,"",function(f){return f})):r!=null&&(Op(r)&&(r=EI(r,n+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(ey,"$&/")+"/")+t)),e.push(r)),1;if(l=0,i=i===""?".":i+":",Jv(t))for(var c=0;c<t.length;c++){o=t[c];var h=i+nd(o,c);l+=tu(o,e,n,h,r)}else if(h=wI(t),typeof h=="function")for(t=h.call(t),c=0;!(o=t.next()).done;)o=o.value,h=i+nd(o,c++),l+=tu(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function Pl(t,e,n){if(t==null)return t;var i=[],r=0;return tu(t,i,"","",function(o){return e.call(n,o,r++)}),i}function SI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mt={current:null},nu={transition:null},CI={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:nu,ReactCurrentOwner:Rp};de.Children={map:Pl,forEach:function(t,e,n){Pl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Pl(t,function(){e++}),e},toArray:function(t){return Pl(t,function(e){return e})||[]},only:function(t){if(!Op(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=Vs;de.Fragment=hI;de.Profiler=fI;de.PureComponent=Ap;de.StrictMode=dI;de.Suspense=vI;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CI;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Ww({},t.props),r=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=Rp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(h in e)Kw.call(e,h)&&!Gw.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&c!==void 0?c[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){c=Array(h);for(var f=0;f<h;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:Oa,type:t.type,key:r,ref:o,props:i,_owner:l}};de.createContext=function(t){return t={$$typeof:mI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pI,_context:t},t.Consumer=t};de.createElement=Qw;de.createFactory=function(t){var e=Qw.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:gI,render:t}};de.isValidElement=Op;de.lazy=function(t){return{$$typeof:_I,_payload:{_status:-1,_result:t},_init:SI}};de.memo=function(t,e){return{$$typeof:yI,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=nu.transition;nu.transition={};try{t()}finally{nu.transition=e}};de.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};de.useCallback=function(t,e){return Mt.current.useCallback(t,e)};de.useContext=function(t){return Mt.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};de.useEffect=function(t,e){return Mt.current.useEffect(t,e)};de.useId=function(){return Mt.current.useId()};de.useImperativeHandle=function(t,e,n){return Mt.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return Mt.current.useMemo(t,e)};de.useReducer=function(t,e,n){return Mt.current.useReducer(t,e,n)};de.useRef=function(t){return Mt.current.useRef(t)};de.useState=function(t){return Mt.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return Mt.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return Mt.current.useTransition()};de.version="18.2.0";Vw.exports=de;var De=Vw.exports;const se=Uw(De);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kI=De,II=Symbol.for("react.element"),xI=Symbol.for("react.fragment"),PI=Object.prototype.hasOwnProperty,LI=kI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AI={key:!0,ref:!0,__self:!0,__source:!0};function Yw(t,e,n){var i,r={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)PI.call(e,i)&&!AI.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:II,type:t,key:o,ref:l,props:r,_owner:LI.current}}yc.Fragment=xI;yc.jsx=Yw;yc.jsxs=Yw;jw.exports=yc;var A=jw.exports,Yd={},Xw={exports:{}},Yt={},Jw={exports:{}},e0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,ee){var F=O.length;O.push(ee);e:for(;0<F;){var X=F-1>>>1,me=O[X];if(0<r(me,ee))O[X]=ee,O[F]=me,F=X;else break e}}function n(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var ee=O[0],F=O.pop();if(F!==ee){O[0]=F;e:for(var X=0,me=O.length,Qe=me>>>1;X<Qe;){var Ce=2*(X+1)-1,ye=O[Ce],ie=Ce+1,$t=O[ie];if(0>r(ye,F))ie<me&&0>r($t,ye)?(O[X]=$t,O[ie]=F,X=ie):(O[X]=ye,O[Ce]=F,X=Ce);else if(ie<me&&0>r($t,F))O[X]=$t,O[ie]=F,X=ie;else break e}}return ee}function r(O,ee){var F=O.sortIndex-ee.sortIndex;return F!==0?F:O.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var h=[],f=[],m=1,v=null,y=3,T=!1,C=!1,k=!1,M=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(O){for(var ee=n(f);ee!==null;){if(ee.callback===null)i(f);else if(ee.startTime<=O)i(f),ee.sortIndex=ee.expirationTime,e(h,ee);else break;ee=n(f)}}function P(O){if(k=!1,w(O),!C)if(n(h)!==null)C=!0,lt(b);else{var ee=n(f);ee!==null&&Vn(P,ee.startTime-O)}}function b(O,ee){C=!1,k&&(k=!1,S(H),H=-1),T=!0;var F=y;try{for(w(ee),v=n(h);v!==null&&(!(v.expirationTime>ee)||O&&!ke());){var X=v.callback;if(typeof X=="function"){v.callback=null,y=v.priorityLevel;var me=X(v.expirationTime<=ee);ee=t.unstable_now(),typeof me=="function"?v.callback=me:v===n(h)&&i(h),w(ee)}else i(h);v=n(h)}if(v!==null)var Qe=!0;else{var Ce=n(f);Ce!==null&&Vn(P,Ce.startTime-ee),Qe=!1}return Qe}finally{v=null,y=F,T=!1}}var B=!1,U=null,H=-1,ce=5,ae=-1;function ke(){return!(t.unstable_now()-ae<ce)}function tt(){if(U!==null){var O=t.unstable_now();ae=O;var ee=!0;try{ee=U(!0,O)}finally{ee?ir():(B=!1,U=null)}}else B=!1}var ir;if(typeof _=="function")ir=function(){_(tt)};else if(typeof MessageChannel<"u"){var Jt=new MessageChannel,Eh=Jt.port2;Jt.port1.onmessage=tt,ir=function(){Eh.postMessage(null)}}else ir=function(){M(tt,0)};function lt(O){U=O,B||(B=!0,ir())}function Vn(O,ee){H=M(function(){O(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){C||T||(C=!0,lt(b))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(O){switch(y){case 1:case 2:case 3:var ee=3;break;default:ee=y}var F=y;y=ee;try{return O()}finally{y=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,ee){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var F=y;y=O;try{return ee()}finally{y=F}},t.unstable_scheduleCallback=function(O,ee,F){var X=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?X+F:X):F=X,O){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=F+me,O={id:m++,callback:ee,priorityLevel:O,startTime:F,expirationTime:me,sortIndex:-1},F>X?(O.sortIndex=F,e(f,O),n(h)===null&&O===n(f)&&(k?(S(H),H=-1):k=!0,Vn(P,F-X))):(O.sortIndex=me,e(h,O),C||T||(C=!0,lt(b))),O},t.unstable_shouldYield=ke,t.unstable_wrapCallback=function(O){var ee=y;return function(){var F=y;y=ee;try{return O.apply(this,arguments)}finally{y=F}}}})(e0);Jw.exports=e0;var NI=Jw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0=De,Gt=NI;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n0=new Set,Xo={};function Mr(t,e){ks(t,e),ks(t+"Capture",e)}function ks(t,e){for(Xo[t]=e,t=0;t<e.length;t++)n0.add(e[t])}var ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xd=Object.prototype.hasOwnProperty,RI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ty={},ny={};function OI(t){return Xd.call(ny,t)?!0:Xd.call(ty,t)?!1:RI.test(t)?ny[t]=!0:(ty[t]=!0,!1)}function DI(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function MI(t,e,n,i){if(e===null||typeof e>"u"||DI(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,i,r,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mt[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mt[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mt[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mt[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mt[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mt[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mt[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mt[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mt[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Dp=/[\-:]([a-z])/g;function Mp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Dp,Mp);mt[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Dp,Mp);mt[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Dp,Mp);mt[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mt[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});mt.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mt[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function bp(t,e,n,i){var r=mt.hasOwnProperty(e)?mt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(MI(e,n,r,i)&&(n=null),i||r===null?OI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var pi=t0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ll=Symbol.for("react.element"),Jr=Symbol.for("react.portal"),es=Symbol.for("react.fragment"),$p=Symbol.for("react.strict_mode"),Jd=Symbol.for("react.profiler"),i0=Symbol.for("react.provider"),r0=Symbol.for("react.context"),zp=Symbol.for("react.forward_ref"),ef=Symbol.for("react.suspense"),tf=Symbol.for("react.suspense_list"),Fp=Symbol.for("react.memo"),Ti=Symbol.for("react.lazy"),s0=Symbol.for("react.offscreen"),iy=Symbol.iterator;function go(t){return t===null||typeof t!="object"?null:(t=iy&&t[iy]||t["@@iterator"],typeof t=="function"?t:null)}var ze=Object.assign,id;function xo(t){if(id===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);id=e&&e[1]||""}return`
`+id+t}var rd=!1;function sd(t,e){if(!t||rd)return"";rd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),l=r.length-1,c=o.length-1;1<=l&&0<=c&&r[l]!==o[c];)c--;for(;1<=l&&0<=c;l--,c--)if(r[l]!==o[c]){if(l!==1||c!==1)do if(l--,c--,0>c||r[l]!==o[c]){var h=`
`+r[l].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=l&&0<=c);break}}}finally{rd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xo(t):""}function bI(t){switch(t.tag){case 5:return xo(t.type);case 16:return xo("Lazy");case 13:return xo("Suspense");case 19:return xo("SuspenseList");case 0:case 2:case 15:return t=sd(t.type,!1),t;case 11:return t=sd(t.type.render,!1),t;case 1:return t=sd(t.type,!0),t;default:return""}}function nf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case es:return"Fragment";case Jr:return"Portal";case Jd:return"Profiler";case $p:return"StrictMode";case ef:return"Suspense";case tf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case r0:return(t.displayName||"Context")+".Consumer";case i0:return(t._context.displayName||"Context")+".Provider";case zp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fp:return e=t.displayName||null,e!==null?e:nf(t.type)||"Memo";case Ti:e=t._payload,t=t._init;try{return nf(t(e))}catch{}}return null}function $I(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nf(e);case 8:return e===$p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function o0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zI(t){var e=o0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Al(t){t._valueTracker||(t._valueTracker=zI(t))}function a0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=o0(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ku(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rf(t,e){var n=e.checked;return ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ry(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=qi(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function l0(t,e){e=e.checked,e!=null&&bp(t,"checked",e,!1)}function sf(t,e){l0(t,e);var n=qi(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?of(t,e.type,n):e.hasOwnProperty("defaultValue")&&of(t,e.type,qi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function of(t,e,n){(e!=="number"||ku(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Po=Array.isArray;function fs(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+qi(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function af(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function oy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Po(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qi(n)}}function u0(t,e){var n=qi(e.value),i=qi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function ay(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function c0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?c0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nl,h0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Nl=Nl||document.createElement("div"),Nl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $o={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FI=["Webkit","ms","Moz","O"];Object.keys($o).forEach(function(t){FI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$o[e]=$o[t]})});function d0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$o.hasOwnProperty(t)&&$o[t]?(""+e).trim():e+"px"}function f0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=d0(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var BI=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uf(t,e){if(e){if(BI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function cf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hf=null;function Bp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var df=null,ps=null,ms=null;function ly(t){if(t=ba(t)){if(typeof df!="function")throw Error($(280));var e=t.stateNode;e&&(e=Sc(e),df(t.stateNode,t.type,e))}}function p0(t){ps?ms?ms.push(t):ms=[t]:ps=t}function m0(){if(ps){var t=ps,e=ms;if(ms=ps=null,ly(t),e)for(t=0;t<e.length;t++)ly(e[t])}}function g0(t,e){return t(e)}function v0(){}var od=!1;function y0(t,e,n){if(od)return t(e,n);od=!0;try{return g0(t,e,n)}finally{od=!1,(ps!==null||ms!==null)&&(v0(),m0())}}function ea(t,e){var n=t.stateNode;if(n===null)return null;var i=Sc(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var ff=!1;if(ri)try{var vo={};Object.defineProperty(vo,"passive",{get:function(){ff=!0}}),window.addEventListener("test",vo,vo),window.removeEventListener("test",vo,vo)}catch{ff=!1}function UI(t,e,n,i,r,o,l,c,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var zo=!1,Iu=null,xu=!1,pf=null,jI={onError:function(t){zo=!0,Iu=t}};function VI(t,e,n,i,r,o,l,c,h){zo=!1,Iu=null,UI.apply(jI,arguments)}function HI(t,e,n,i,r,o,l,c,h){if(VI.apply(this,arguments),zo){if(zo){var f=Iu;zo=!1,Iu=null}else throw Error($(198));xu||(xu=!0,pf=f)}}function br(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function _0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function uy(t){if(br(t)!==t)throw Error($(188))}function WI(t){var e=t.alternate;if(!e){if(e=br(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return uy(r),t;if(o===i)return uy(r),e;o=o.sibling}throw Error($(188))}if(n.return!==i.return)n=r,i=o;else{for(var l=!1,c=r.child;c;){if(c===n){l=!0,n=r,i=o;break}if(c===i){l=!0,i=r,n=o;break}c=c.sibling}if(!l){for(c=o.child;c;){if(c===n){l=!0,n=o,i=r;break}if(c===i){l=!0,i=o,n=r;break}c=c.sibling}if(!l)throw Error($(189))}}if(n.alternate!==i)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function w0(t){return t=WI(t),t!==null?E0(t):null}function E0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=E0(t);if(e!==null)return e;t=t.sibling}return null}var T0=Gt.unstable_scheduleCallback,cy=Gt.unstable_cancelCallback,qI=Gt.unstable_shouldYield,ZI=Gt.unstable_requestPaint,Ve=Gt.unstable_now,KI=Gt.unstable_getCurrentPriorityLevel,Up=Gt.unstable_ImmediatePriority,S0=Gt.unstable_UserBlockingPriority,Pu=Gt.unstable_NormalPriority,GI=Gt.unstable_LowPriority,C0=Gt.unstable_IdlePriority,_c=null,Mn=null;function QI(t){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(_c,t,void 0,(t.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:JI,YI=Math.log,XI=Math.LN2;function JI(t){return t>>>=0,t===0?32:31-(YI(t)/XI|0)|0}var Rl=64,Ol=4194304;function Lo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Lu(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var c=l&~r;c!==0?i=Lo(c):(o&=l,o!==0&&(i=Lo(o)))}else l=n&~r,l!==0?i=Lo(l):o!==0&&(i=Lo(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-yn(e),r=1<<n,i|=t[n],e&=~r;return i}function ex(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tx(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-yn(o),c=1<<l,h=r[l];h===-1?(!(c&n)||c&i)&&(r[l]=ex(c,e)):h<=e&&(t.expiredLanes|=c),o&=~c}}function mf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function k0(){var t=Rl;return Rl<<=1,!(Rl&4194240)&&(Rl=64),t}function ad(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Da(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yn(e),t[e]=n}function nx(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-yn(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function jp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-yn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Te=0;function I0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var x0,Vp,P0,L0,A0,gf=!1,Dl=[],Di=null,Mi=null,bi=null,ta=new Map,na=new Map,Ci=[],ix="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hy(t,e){switch(t){case"focusin":case"focusout":Di=null;break;case"dragenter":case"dragleave":Mi=null;break;case"mouseover":case"mouseout":bi=null;break;case"pointerover":case"pointerout":ta.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":na.delete(e.pointerId)}}function yo(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=ba(e),e!==null&&Vp(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function rx(t,e,n,i,r){switch(e){case"focusin":return Di=yo(Di,t,e,n,i,r),!0;case"dragenter":return Mi=yo(Mi,t,e,n,i,r),!0;case"mouseover":return bi=yo(bi,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return ta.set(o,yo(ta.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,na.set(o,yo(na.get(o)||null,t,e,n,i,r)),!0}return!1}function N0(t){var e=dr(t.target);if(e!==null){var n=br(e);if(n!==null){if(e=n.tag,e===13){if(e=_0(n),e!==null){t.blockedOn=e,A0(t.priority,function(){P0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function iu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=vf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);hf=i,n.target.dispatchEvent(i),hf=null}else return e=ba(n),e!==null&&Vp(e),t.blockedOn=n,!1;e.shift()}return!0}function dy(t,e,n){iu(t)&&n.delete(e)}function sx(){gf=!1,Di!==null&&iu(Di)&&(Di=null),Mi!==null&&iu(Mi)&&(Mi=null),bi!==null&&iu(bi)&&(bi=null),ta.forEach(dy),na.forEach(dy)}function _o(t,e){t.blockedOn===e&&(t.blockedOn=null,gf||(gf=!0,Gt.unstable_scheduleCallback(Gt.unstable_NormalPriority,sx)))}function ia(t){function e(r){return _o(r,t)}if(0<Dl.length){_o(Dl[0],t);for(var n=1;n<Dl.length;n++){var i=Dl[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Di!==null&&_o(Di,t),Mi!==null&&_o(Mi,t),bi!==null&&_o(bi,t),ta.forEach(e),na.forEach(e),n=0;n<Ci.length;n++)i=Ci[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ci.length&&(n=Ci[0],n.blockedOn===null);)N0(n),n.blockedOn===null&&Ci.shift()}var gs=pi.ReactCurrentBatchConfig,Au=!0;function ox(t,e,n,i){var r=Te,o=gs.transition;gs.transition=null;try{Te=1,Hp(t,e,n,i)}finally{Te=r,gs.transition=o}}function ax(t,e,n,i){var r=Te,o=gs.transition;gs.transition=null;try{Te=4,Hp(t,e,n,i)}finally{Te=r,gs.transition=o}}function Hp(t,e,n,i){if(Au){var r=vf(t,e,n,i);if(r===null)vd(t,e,i,Nu,n),hy(t,i);else if(rx(r,t,e,n,i))i.stopPropagation();else if(hy(t,i),e&4&&-1<ix.indexOf(t)){for(;r!==null;){var o=ba(r);if(o!==null&&x0(o),o=vf(t,e,n,i),o===null&&vd(t,e,i,Nu,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else vd(t,e,i,null,n)}}var Nu=null;function vf(t,e,n,i){if(Nu=null,t=Bp(i),t=dr(t),t!==null)if(e=br(t),e===null)t=null;else if(n=e.tag,n===13){if(t=_0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Nu=t,null}function R0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KI()){case Up:return 1;case S0:return 4;case Pu:case GI:return 16;case C0:return 536870912;default:return 16}default:return 16}}var Ai=null,Wp=null,ru=null;function O0(){if(ru)return ru;var t,e=Wp,n=e.length,i,r="value"in Ai?Ai.value:Ai.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===r[o-i];i++);return ru=r.slice(t,1<i?1-i:void 0)}function su(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ml(){return!0}function fy(){return!1}function Xt(t){function e(n,i,r,o,l){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ml:fy,this.isPropagationStopped=fy,this}return ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ml)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ml)},persist:function(){},isPersistent:Ml}),e}var Hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qp=Xt(Hs),Ma=ze({},Hs,{view:0,detail:0}),lx=Xt(Ma),ld,ud,wo,wc=ze({},Ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wo&&(wo&&t.type==="mousemove"?(ld=t.screenX-wo.screenX,ud=t.screenY-wo.screenY):ud=ld=0,wo=t),ld)},movementY:function(t){return"movementY"in t?t.movementY:ud}}),py=Xt(wc),ux=ze({},wc,{dataTransfer:0}),cx=Xt(ux),hx=ze({},Ma,{relatedTarget:0}),cd=Xt(hx),dx=ze({},Hs,{animationName:0,elapsedTime:0,pseudoElement:0}),fx=Xt(dx),px=ze({},Hs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mx=Xt(px),gx=ze({},Hs,{data:0}),my=Xt(gx),vx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_x={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_x[t])?!!e[t]:!1}function Zp(){return wx}var Ex=ze({},Ma,{key:function(t){if(t.key){var e=vx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=su(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zp,charCode:function(t){return t.type==="keypress"?su(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?su(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Tx=Xt(Ex),Sx=ze({},wc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gy=Xt(Sx),Cx=ze({},Ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zp}),kx=Xt(Cx),Ix=ze({},Hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),xx=Xt(Ix),Px=ze({},wc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Lx=Xt(Px),Ax=[9,13,27,32],Kp=ri&&"CompositionEvent"in window,Fo=null;ri&&"documentMode"in document&&(Fo=document.documentMode);var Nx=ri&&"TextEvent"in window&&!Fo,D0=ri&&(!Kp||Fo&&8<Fo&&11>=Fo),vy=String.fromCharCode(32),yy=!1;function M0(t,e){switch(t){case"keyup":return Ax.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ts=!1;function Rx(t,e){switch(t){case"compositionend":return b0(e);case"keypress":return e.which!==32?null:(yy=!0,vy);case"textInput":return t=e.data,t===vy&&yy?null:t;default:return null}}function Ox(t,e){if(ts)return t==="compositionend"||!Kp&&M0(t,e)?(t=O0(),ru=Wp=Ai=null,ts=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return D0&&e.locale!=="ko"?null:e.data;default:return null}}var Dx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _y(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Dx[t.type]:e==="textarea"}function $0(t,e,n,i){p0(i),e=Ru(e,"onChange"),0<e.length&&(n=new qp("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Bo=null,ra=null;function Mx(t){K0(t,0)}function Ec(t){var e=rs(t);if(a0(e))return t}function bx(t,e){if(t==="change")return e}var z0=!1;if(ri){var hd;if(ri){var dd="oninput"in document;if(!dd){var wy=document.createElement("div");wy.setAttribute("oninput","return;"),dd=typeof wy.oninput=="function"}hd=dd}else hd=!1;z0=hd&&(!document.documentMode||9<document.documentMode)}function Ey(){Bo&&(Bo.detachEvent("onpropertychange",F0),ra=Bo=null)}function F0(t){if(t.propertyName==="value"&&Ec(ra)){var e=[];$0(e,ra,t,Bp(t)),y0(Mx,e)}}function $x(t,e,n){t==="focusin"?(Ey(),Bo=e,ra=n,Bo.attachEvent("onpropertychange",F0)):t==="focusout"&&Ey()}function zx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ec(ra)}function Fx(t,e){if(t==="click")return Ec(e)}function Bx(t,e){if(t==="input"||t==="change")return Ec(e)}function Ux(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var En=typeof Object.is=="function"?Object.is:Ux;function sa(t,e){if(En(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Xd.call(e,r)||!En(t[r],e[r]))return!1}return!0}function Ty(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sy(t,e){var n=Ty(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ty(n)}}function B0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?B0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function U0(){for(var t=window,e=ku();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ku(t.document)}return e}function Gp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jx(t){var e=U0(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&B0(n.ownerDocument.documentElement,n)){if(i!==null&&Gp(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=Sy(n,o);var l=Sy(n,i);r&&l&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Vx=ri&&"documentMode"in document&&11>=document.documentMode,ns=null,yf=null,Uo=null,_f=!1;function Cy(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_f||ns==null||ns!==ku(i)||(i=ns,"selectionStart"in i&&Gp(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Uo&&sa(Uo,i)||(Uo=i,i=Ru(yf,"onSelect"),0<i.length&&(e=new qp("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ns)))}function bl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var is={animationend:bl("Animation","AnimationEnd"),animationiteration:bl("Animation","AnimationIteration"),animationstart:bl("Animation","AnimationStart"),transitionend:bl("Transition","TransitionEnd")},fd={},j0={};ri&&(j0=document.createElement("div").style,"AnimationEvent"in window||(delete is.animationend.animation,delete is.animationiteration.animation,delete is.animationstart.animation),"TransitionEvent"in window||delete is.transitionend.transition);function Tc(t){if(fd[t])return fd[t];if(!is[t])return t;var e=is[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in j0)return fd[t]=e[n];return t}var V0=Tc("animationend"),H0=Tc("animationiteration"),W0=Tc("animationstart"),q0=Tc("transitionend"),Z0=new Map,ky="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yi(t,e){Z0.set(t,e),Mr(e,[t])}for(var pd=0;pd<ky.length;pd++){var md=ky[pd],Hx=md.toLowerCase(),Wx=md[0].toUpperCase()+md.slice(1);Yi(Hx,"on"+Wx)}Yi(V0,"onAnimationEnd");Yi(H0,"onAnimationIteration");Yi(W0,"onAnimationStart");Yi("dblclick","onDoubleClick");Yi("focusin","onFocus");Yi("focusout","onBlur");Yi(q0,"onTransitionEnd");ks("onMouseEnter",["mouseout","mouseover"]);ks("onMouseLeave",["mouseout","mouseover"]);ks("onPointerEnter",["pointerout","pointerover"]);ks("onPointerLeave",["pointerout","pointerover"]);Mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ao));function Iy(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,HI(i,e,void 0,t),t.currentTarget=null}function K0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var c=i[l],h=c.instance,f=c.currentTarget;if(c=c.listener,h!==o&&r.isPropagationStopped())break e;Iy(r,c,f),o=h}else for(l=0;l<i.length;l++){if(c=i[l],h=c.instance,f=c.currentTarget,c=c.listener,h!==o&&r.isPropagationStopped())break e;Iy(r,c,f),o=h}}}if(xu)throw t=pf,xu=!1,pf=null,t}function Pe(t,e){var n=e[Cf];n===void 0&&(n=e[Cf]=new Set);var i=t+"__bubble";n.has(i)||(G0(e,t,2,!1),n.add(i))}function gd(t,e,n){var i=0;e&&(i|=4),G0(n,t,i,e)}var $l="_reactListening"+Math.random().toString(36).slice(2);function oa(t){if(!t[$l]){t[$l]=!0,n0.forEach(function(n){n!=="selectionchange"&&(qx.has(n)||gd(n,!1,t),gd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$l]||(e[$l]=!0,gd("selectionchange",!1,e))}}function G0(t,e,n,i){switch(R0(e)){case 1:var r=ox;break;case 4:r=ax;break;default:r=Hp}n=r.bind(null,e,n,t),r=void 0,!ff||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function vd(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var c=i.stateNode.containerInfo;if(c===r||c.nodeType===8&&c.parentNode===r)break;if(l===4)for(l=i.return;l!==null;){var h=l.tag;if((h===3||h===4)&&(h=l.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;l=l.return}for(;c!==null;){if(l=dr(c),l===null)return;if(h=l.tag,h===5||h===6){i=o=l;continue e}c=c.parentNode}}i=i.return}y0(function(){var f=o,m=Bp(n),v=[];e:{var y=Z0.get(t);if(y!==void 0){var T=qp,C=t;switch(t){case"keypress":if(su(n)===0)break e;case"keydown":case"keyup":T=Tx;break;case"focusin":C="focus",T=cd;break;case"focusout":C="blur",T=cd;break;case"beforeblur":case"afterblur":T=cd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=py;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=cx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=kx;break;case V0:case H0:case W0:T=fx;break;case q0:T=xx;break;case"scroll":T=lx;break;case"wheel":T=Lx;break;case"copy":case"cut":case"paste":T=mx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=gy}var k=(e&4)!==0,M=!k&&t==="scroll",S=k?y!==null?y+"Capture":null:y;k=[];for(var _=f,w;_!==null;){w=_;var P=w.stateNode;if(w.tag===5&&P!==null&&(w=P,S!==null&&(P=ea(_,S),P!=null&&k.push(aa(_,P,w)))),M)break;_=_.return}0<k.length&&(y=new T(y,C,null,n,m),v.push({event:y,listeners:k}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",y&&n!==hf&&(C=n.relatedTarget||n.fromElement)&&(dr(C)||C[si]))break e;if((T||y)&&(y=m.window===m?m:(y=m.ownerDocument)?y.defaultView||y.parentWindow:window,T?(C=n.relatedTarget||n.toElement,T=f,C=C?dr(C):null,C!==null&&(M=br(C),C!==M||C.tag!==5&&C.tag!==6)&&(C=null)):(T=null,C=f),T!==C)){if(k=py,P="onMouseLeave",S="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(k=gy,P="onPointerLeave",S="onPointerEnter",_="pointer"),M=T==null?y:rs(T),w=C==null?y:rs(C),y=new k(P,_+"leave",T,n,m),y.target=M,y.relatedTarget=w,P=null,dr(m)===f&&(k=new k(S,_+"enter",C,n,m),k.target=w,k.relatedTarget=M,P=k),M=P,T&&C)t:{for(k=T,S=C,_=0,w=k;w;w=Gr(w))_++;for(w=0,P=S;P;P=Gr(P))w++;for(;0<_-w;)k=Gr(k),_--;for(;0<w-_;)S=Gr(S),w--;for(;_--;){if(k===S||S!==null&&k===S.alternate)break t;k=Gr(k),S=Gr(S)}k=null}else k=null;T!==null&&xy(v,y,T,k,!1),C!==null&&M!==null&&xy(v,M,C,k,!0)}}e:{if(y=f?rs(f):window,T=y.nodeName&&y.nodeName.toLowerCase(),T==="select"||T==="input"&&y.type==="file")var b=bx;else if(_y(y))if(z0)b=Bx;else{b=zx;var B=$x}else(T=y.nodeName)&&T.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(b=Fx);if(b&&(b=b(t,f))){$0(v,b,n,m);break e}B&&B(t,y,f),t==="focusout"&&(B=y._wrapperState)&&B.controlled&&y.type==="number"&&of(y,"number",y.value)}switch(B=f?rs(f):window,t){case"focusin":(_y(B)||B.contentEditable==="true")&&(ns=B,yf=f,Uo=null);break;case"focusout":Uo=yf=ns=null;break;case"mousedown":_f=!0;break;case"contextmenu":case"mouseup":case"dragend":_f=!1,Cy(v,n,m);break;case"selectionchange":if(Vx)break;case"keydown":case"keyup":Cy(v,n,m)}var U;if(Kp)e:{switch(t){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else ts?M0(t,n)&&(H="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(H="onCompositionStart");H&&(D0&&n.locale!=="ko"&&(ts||H!=="onCompositionStart"?H==="onCompositionEnd"&&ts&&(U=O0()):(Ai=m,Wp="value"in Ai?Ai.value:Ai.textContent,ts=!0)),B=Ru(f,H),0<B.length&&(H=new my(H,t,null,n,m),v.push({event:H,listeners:B}),U?H.data=U:(U=b0(n),U!==null&&(H.data=U)))),(U=Nx?Rx(t,n):Ox(t,n))&&(f=Ru(f,"onBeforeInput"),0<f.length&&(m=new my("onBeforeInput","beforeinput",null,n,m),v.push({event:m,listeners:f}),m.data=U))}K0(v,e)})}function aa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ru(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=ea(t,n),o!=null&&i.unshift(aa(t,o,r)),o=ea(t,e),o!=null&&i.push(aa(t,o,r))),t=t.return}return i}function Gr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xy(t,e,n,i,r){for(var o=e._reactName,l=[];n!==null&&n!==i;){var c=n,h=c.alternate,f=c.stateNode;if(h!==null&&h===i)break;c.tag===5&&f!==null&&(c=f,r?(h=ea(n,o),h!=null&&l.unshift(aa(n,h,c))):r||(h=ea(n,o),h!=null&&l.push(aa(n,h,c)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var Zx=/\r\n?/g,Kx=/\u0000|\uFFFD/g;function Py(t){return(typeof t=="string"?t:""+t).replace(Zx,`
`).replace(Kx,"")}function zl(t,e,n){if(e=Py(e),Py(t)!==e&&n)throw Error($(425))}function Ou(){}var wf=null,Ef=null;function Tf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sf=typeof setTimeout=="function"?setTimeout:void 0,Gx=typeof clearTimeout=="function"?clearTimeout:void 0,Ly=typeof Promise=="function"?Promise:void 0,Qx=typeof queueMicrotask=="function"?queueMicrotask:typeof Ly<"u"?function(t){return Ly.resolve(null).then(t).catch(Yx)}:Sf;function Yx(t){setTimeout(function(){throw t})}function yd(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),ia(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);ia(e)}function $i(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ay(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ws=Math.random().toString(36).slice(2),An="__reactFiber$"+Ws,la="__reactProps$"+Ws,si="__reactContainer$"+Ws,Cf="__reactEvents$"+Ws,Xx="__reactListeners$"+Ws,Jx="__reactHandles$"+Ws;function dr(t){var e=t[An];if(e)return e;for(var n=t.parentNode;n;){if(e=n[si]||n[An]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ay(t);t!==null;){if(n=t[An])return n;t=Ay(t)}return e}t=n,n=t.parentNode}return null}function ba(t){return t=t[An]||t[si],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function rs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Sc(t){return t[la]||null}var kf=[],ss=-1;function Xi(t){return{current:t}}function Ne(t){0>ss||(t.current=kf[ss],kf[ss]=null,ss--)}function xe(t,e){ss++,kf[ss]=t.current,t.current=e}var Zi={},It=Xi(Zi),jt=Xi(!1),Cr=Zi;function Is(t,e){var n=t.type.contextTypes;if(!n)return Zi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Vt(t){return t=t.childContextTypes,t!=null}function Du(){Ne(jt),Ne(It)}function Ny(t,e,n){if(It.current!==Zi)throw Error($(168));xe(It,e),xe(jt,n)}function Q0(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error($(108,$I(t)||"Unknown",r));return ze({},n,i)}function Mu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zi,Cr=It.current,xe(It,t),xe(jt,jt.current),!0}function Ry(t,e,n){var i=t.stateNode;if(!i)throw Error($(169));n?(t=Q0(t,e,Cr),i.__reactInternalMemoizedMergedChildContext=t,Ne(jt),Ne(It),xe(It,t)):Ne(jt),xe(jt,n)}var Gn=null,Cc=!1,_d=!1;function Y0(t){Gn===null?Gn=[t]:Gn.push(t)}function eP(t){Cc=!0,Y0(t)}function Ji(){if(!_d&&Gn!==null){_d=!0;var t=0,e=Te;try{var n=Gn;for(Te=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Gn=null,Cc=!1}catch(r){throw Gn!==null&&(Gn=Gn.slice(t+1)),T0(Up,Ji),r}finally{Te=e,_d=!1}}return null}var os=[],as=0,bu=null,$u=0,rn=[],sn=0,kr=null,Qn=1,Yn="";function ur(t,e){os[as++]=$u,os[as++]=bu,bu=t,$u=e}function X0(t,e,n){rn[sn++]=Qn,rn[sn++]=Yn,rn[sn++]=kr,kr=t;var i=Qn;t=Yn;var r=32-yn(i)-1;i&=~(1<<r),n+=1;var o=32-yn(e)+r;if(30<o){var l=r-r%5;o=(i&(1<<l)-1).toString(32),i>>=l,r-=l,Qn=1<<32-yn(e)+r|n<<r|i,Yn=o+t}else Qn=1<<o|n<<r|i,Yn=t}function Qp(t){t.return!==null&&(ur(t,1),X0(t,1,0))}function Yp(t){for(;t===bu;)bu=os[--as],os[as]=null,$u=os[--as],os[as]=null;for(;t===kr;)kr=rn[--sn],rn[sn]=null,Yn=rn[--sn],rn[sn]=null,Qn=rn[--sn],rn[sn]=null}var Kt=null,qt=null,Oe=!1,vn=null;function J0(t,e){var n=an(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Oy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Kt=t,qt=$i(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Kt=t,qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=kr!==null?{id:Qn,overflow:Yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=an(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Kt=t,qt=null,!0):!1;default:return!1}}function If(t){return(t.mode&1)!==0&&(t.flags&128)===0}function xf(t){if(Oe){var e=qt;if(e){var n=e;if(!Oy(t,e)){if(If(t))throw Error($(418));e=$i(n.nextSibling);var i=Kt;e&&Oy(t,e)?J0(i,n):(t.flags=t.flags&-4097|2,Oe=!1,Kt=t)}}else{if(If(t))throw Error($(418));t.flags=t.flags&-4097|2,Oe=!1,Kt=t}}}function Dy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Kt=t}function Fl(t){if(t!==Kt)return!1;if(!Oe)return Dy(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Tf(t.type,t.memoizedProps)),e&&(e=qt)){if(If(t))throw e1(),Error($(418));for(;e;)J0(t,e),e=$i(e.nextSibling)}if(Dy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){qt=$i(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}qt=null}}else qt=Kt?$i(t.stateNode.nextSibling):null;return!0}function e1(){for(var t=qt;t;)t=$i(t.nextSibling)}function xs(){qt=Kt=null,Oe=!1}function Xp(t){vn===null?vn=[t]:vn.push(t)}var tP=pi.ReactCurrentBatchConfig;function mn(t,e){if(t&&t.defaultProps){e=ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var zu=Xi(null),Fu=null,ls=null,Jp=null;function em(){Jp=ls=Fu=null}function tm(t){var e=zu.current;Ne(zu),t._currentValue=e}function Pf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function vs(t,e){Fu=t,Jp=ls=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ut=!0),t.firstContext=null)}function cn(t){var e=t._currentValue;if(Jp!==t)if(t={context:t,memoizedValue:e,next:null},ls===null){if(Fu===null)throw Error($(308));ls=t,Fu.dependencies={lanes:0,firstContext:t}}else ls=ls.next=t;return e}var fr=null;function nm(t){fr===null?fr=[t]:fr.push(t)}function t1(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,nm(e)):(n.next=r.next,r.next=n),e.interleaved=n,oi(t,i)}function oi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Si=!1;function im(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function n1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ti(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zi(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ve&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,oi(t,n)}return r=i.interleaved,r===null?(e.next=e,nm(i)):(e.next=r.next,r.next=e),i.interleaved=e,oi(t,n)}function ou(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,jp(t,n)}}function My(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Bu(t,e,n,i){var r=t.updateQueue;Si=!1;var o=r.firstBaseUpdate,l=r.lastBaseUpdate,c=r.shared.pending;if(c!==null){r.shared.pending=null;var h=c,f=h.next;h.next=null,l===null?o=f:l.next=f,l=h;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==l&&(c===null?m.firstBaseUpdate=f:c.next=f,m.lastBaseUpdate=h))}if(o!==null){var v=r.baseState;l=0,m=f=h=null,c=o;do{var y=c.lane,T=c.eventTime;if((i&y)===y){m!==null&&(m=m.next={eventTime:T,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var C=t,k=c;switch(y=e,T=n,k.tag){case 1:if(C=k.payload,typeof C=="function"){v=C.call(T,v,y);break e}v=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=k.payload,y=typeof C=="function"?C.call(T,v,y):C,y==null)break e;v=ze({},v,y);break e;case 2:Si=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,y=r.effects,y===null?r.effects=[c]:y.push(c))}else T={eventTime:T,lane:y,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(f=m=T,h=v):m=m.next=T,l|=y;if(c=c.next,c===null){if(c=r.shared.pending,c===null)break;y=c,c=y.next,y.next=null,r.lastBaseUpdate=y,r.shared.pending=null}}while(1);if(m===null&&(h=v),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do l|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);xr|=l,t.lanes=l,t.memoizedState=v}}function by(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error($(191,r));r.call(i)}}}var i1=new t0.Component().refs;function Lf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kc={isMounted:function(t){return(t=t._reactInternals)?br(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Rt(),r=Bi(t),o=ti(i,r);o.payload=e,n!=null&&(o.callback=n),e=zi(t,o,r),e!==null&&(_n(e,t,r,i),ou(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Rt(),r=Bi(t),o=ti(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=zi(t,o,r),e!==null&&(_n(e,t,r,i),ou(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Rt(),i=Bi(t),r=ti(n,i);r.tag=2,e!=null&&(r.callback=e),e=zi(t,r,i),e!==null&&(_n(e,t,i,n),ou(e,t,i))}};function $y(t,e,n,i,r,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!sa(n,i)||!sa(r,o):!0}function r1(t,e,n){var i=!1,r=Zi,o=e.contextType;return typeof o=="object"&&o!==null?o=cn(o):(r=Vt(e)?Cr:It.current,i=e.contextTypes,o=(i=i!=null)?Is(t,r):Zi),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kc,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function zy(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&kc.enqueueReplaceState(e,e.state,null)}function Af(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=i1,im(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=cn(o):(o=Vt(e)?Cr:It.current,r.context=Is(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Lf(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&kc.enqueueReplaceState(r,r.state,null),Bu(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Eo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var i=n.stateNode}if(!i)throw Error($(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var c=r.refs;c===i1&&(c=r.refs={}),l===null?delete c[o]:c[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Bl(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Fy(t){var e=t._init;return e(t._payload)}function s1(t){function e(S,_){if(t){var w=S.deletions;w===null?(S.deletions=[_],S.flags|=16):w.push(_)}}function n(S,_){if(!t)return null;for(;_!==null;)e(S,_),_=_.sibling;return null}function i(S,_){for(S=new Map;_!==null;)_.key!==null?S.set(_.key,_):S.set(_.index,_),_=_.sibling;return S}function r(S,_){return S=Ui(S,_),S.index=0,S.sibling=null,S}function o(S,_,w){return S.index=w,t?(w=S.alternate,w!==null?(w=w.index,w<_?(S.flags|=2,_):w):(S.flags|=2,_)):(S.flags|=1048576,_)}function l(S){return t&&S.alternate===null&&(S.flags|=2),S}function c(S,_,w,P){return _===null||_.tag!==6?(_=Id(w,S.mode,P),_.return=S,_):(_=r(_,w),_.return=S,_)}function h(S,_,w,P){var b=w.type;return b===es?m(S,_,w.props.children,P,w.key):_!==null&&(_.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ti&&Fy(b)===_.type)?(P=r(_,w.props),P.ref=Eo(S,_,w),P.return=S,P):(P=du(w.type,w.key,w.props,null,S.mode,P),P.ref=Eo(S,_,w),P.return=S,P)}function f(S,_,w,P){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=xd(w,S.mode,P),_.return=S,_):(_=r(_,w.children||[]),_.return=S,_)}function m(S,_,w,P,b){return _===null||_.tag!==7?(_=Er(w,S.mode,P,b),_.return=S,_):(_=r(_,w),_.return=S,_)}function v(S,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Id(""+_,S.mode,w),_.return=S,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ll:return w=du(_.type,_.key,_.props,null,S.mode,w),w.ref=Eo(S,null,_),w.return=S,w;case Jr:return _=xd(_,S.mode,w),_.return=S,_;case Ti:var P=_._init;return v(S,P(_._payload),w)}if(Po(_)||go(_))return _=Er(_,S.mode,w,null),_.return=S,_;Bl(S,_)}return null}function y(S,_,w,P){var b=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return b!==null?null:c(S,_,""+w,P);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ll:return w.key===b?h(S,_,w,P):null;case Jr:return w.key===b?f(S,_,w,P):null;case Ti:return b=w._init,y(S,_,b(w._payload),P)}if(Po(w)||go(w))return b!==null?null:m(S,_,w,P,null);Bl(S,w)}return null}function T(S,_,w,P,b){if(typeof P=="string"&&P!==""||typeof P=="number")return S=S.get(w)||null,c(_,S,""+P,b);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Ll:return S=S.get(P.key===null?w:P.key)||null,h(_,S,P,b);case Jr:return S=S.get(P.key===null?w:P.key)||null,f(_,S,P,b);case Ti:var B=P._init;return T(S,_,w,B(P._payload),b)}if(Po(P)||go(P))return S=S.get(w)||null,m(_,S,P,b,null);Bl(_,P)}return null}function C(S,_,w,P){for(var b=null,B=null,U=_,H=_=0,ce=null;U!==null&&H<w.length;H++){U.index>H?(ce=U,U=null):ce=U.sibling;var ae=y(S,U,w[H],P);if(ae===null){U===null&&(U=ce);break}t&&U&&ae.alternate===null&&e(S,U),_=o(ae,_,H),B===null?b=ae:B.sibling=ae,B=ae,U=ce}if(H===w.length)return n(S,U),Oe&&ur(S,H),b;if(U===null){for(;H<w.length;H++)U=v(S,w[H],P),U!==null&&(_=o(U,_,H),B===null?b=U:B.sibling=U,B=U);return Oe&&ur(S,H),b}for(U=i(S,U);H<w.length;H++)ce=T(U,S,H,w[H],P),ce!==null&&(t&&ce.alternate!==null&&U.delete(ce.key===null?H:ce.key),_=o(ce,_,H),B===null?b=ce:B.sibling=ce,B=ce);return t&&U.forEach(function(ke){return e(S,ke)}),Oe&&ur(S,H),b}function k(S,_,w,P){var b=go(w);if(typeof b!="function")throw Error($(150));if(w=b.call(w),w==null)throw Error($(151));for(var B=b=null,U=_,H=_=0,ce=null,ae=w.next();U!==null&&!ae.done;H++,ae=w.next()){U.index>H?(ce=U,U=null):ce=U.sibling;var ke=y(S,U,ae.value,P);if(ke===null){U===null&&(U=ce);break}t&&U&&ke.alternate===null&&e(S,U),_=o(ke,_,H),B===null?b=ke:B.sibling=ke,B=ke,U=ce}if(ae.done)return n(S,U),Oe&&ur(S,H),b;if(U===null){for(;!ae.done;H++,ae=w.next())ae=v(S,ae.value,P),ae!==null&&(_=o(ae,_,H),B===null?b=ae:B.sibling=ae,B=ae);return Oe&&ur(S,H),b}for(U=i(S,U);!ae.done;H++,ae=w.next())ae=T(U,S,H,ae.value,P),ae!==null&&(t&&ae.alternate!==null&&U.delete(ae.key===null?H:ae.key),_=o(ae,_,H),B===null?b=ae:B.sibling=ae,B=ae);return t&&U.forEach(function(tt){return e(S,tt)}),Oe&&ur(S,H),b}function M(S,_,w,P){if(typeof w=="object"&&w!==null&&w.type===es&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ll:e:{for(var b=w.key,B=_;B!==null;){if(B.key===b){if(b=w.type,b===es){if(B.tag===7){n(S,B.sibling),_=r(B,w.props.children),_.return=S,S=_;break e}}else if(B.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ti&&Fy(b)===B.type){n(S,B.sibling),_=r(B,w.props),_.ref=Eo(S,B,w),_.return=S,S=_;break e}n(S,B);break}else e(S,B);B=B.sibling}w.type===es?(_=Er(w.props.children,S.mode,P,w.key),_.return=S,S=_):(P=du(w.type,w.key,w.props,null,S.mode,P),P.ref=Eo(S,_,w),P.return=S,S=P)}return l(S);case Jr:e:{for(B=w.key;_!==null;){if(_.key===B)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){n(S,_.sibling),_=r(_,w.children||[]),_.return=S,S=_;break e}else{n(S,_);break}else e(S,_);_=_.sibling}_=xd(w,S.mode,P),_.return=S,S=_}return l(S);case Ti:return B=w._init,M(S,_,B(w._payload),P)}if(Po(w))return C(S,_,w,P);if(go(w))return k(S,_,w,P);Bl(S,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(n(S,_.sibling),_=r(_,w),_.return=S,S=_):(n(S,_),_=Id(w,S.mode,P),_.return=S,S=_),l(S)):n(S,_)}return M}var Ps=s1(!0),o1=s1(!1),$a={},bn=Xi($a),ua=Xi($a),ca=Xi($a);function pr(t){if(t===$a)throw Error($(174));return t}function rm(t,e){switch(xe(ca,e),xe(ua,t),xe(bn,$a),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=lf(e,t)}Ne(bn),xe(bn,e)}function Ls(){Ne(bn),Ne(ua),Ne(ca)}function a1(t){pr(ca.current);var e=pr(bn.current),n=lf(e,t.type);e!==n&&(xe(ua,t),xe(bn,n))}function sm(t){ua.current===t&&(Ne(bn),Ne(ua))}var be=Xi(0);function Uu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wd=[];function om(){for(var t=0;t<wd.length;t++)wd[t]._workInProgressVersionPrimary=null;wd.length=0}var au=pi.ReactCurrentDispatcher,Ed=pi.ReactCurrentBatchConfig,Ir=0,$e=null,Ye=null,rt=null,ju=!1,jo=!1,ha=0,nP=0;function gt(){throw Error($(321))}function am(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!En(t[n],e[n]))return!1;return!0}function lm(t,e,n,i,r,o){if(Ir=o,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,au.current=t===null||t.memoizedState===null?oP:aP,t=n(i,r),jo){o=0;do{if(jo=!1,ha=0,25<=o)throw Error($(301));o+=1,rt=Ye=null,e.updateQueue=null,au.current=lP,t=n(i,r)}while(jo)}if(au.current=Vu,e=Ye!==null&&Ye.next!==null,Ir=0,rt=Ye=$e=null,ju=!1,e)throw Error($(300));return t}function um(){var t=ha!==0;return ha=0,t}function Ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?$e.memoizedState=rt=t:rt=rt.next=t,rt}function hn(){if(Ye===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=rt===null?$e.memoizedState:rt.next;if(e!==null)rt=e,Ye=t;else{if(t===null)throw Error($(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},rt===null?$e.memoizedState=rt=t:rt=rt.next=t}return rt}function da(t,e){return typeof e=="function"?e(t):e}function Td(t){var e=hn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var i=Ye,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var l=r.next;r.next=o.next,o.next=l}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var c=l=null,h=null,f=o;do{var m=f.lane;if((Ir&m)===m)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var v={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(c=h=v,l=i):h=h.next=v,$e.lanes|=m,xr|=m}f=f.next}while(f!==null&&f!==o);h===null?l=i:h.next=c,En(i,e.memoizedState)||(Ut=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,$e.lanes|=o,xr|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Sd(t){var e=hn(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var l=r=r.next;do o=t(o,l.action),l=l.next;while(l!==r);En(o,e.memoizedState)||(Ut=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function l1(){}function u1(t,e){var n=$e,i=hn(),r=e(),o=!En(i.memoizedState,r);if(o&&(i.memoizedState=r,Ut=!0),i=i.queue,cm(d1.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,fa(9,h1.bind(null,n,i,r,e),void 0,null),st===null)throw Error($(349));Ir&30||c1(n,e,r)}return r}function c1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function h1(t,e,n,i){e.value=n,e.getSnapshot=i,f1(e)&&p1(t)}function d1(t,e,n){return n(function(){f1(e)&&p1(t)})}function f1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!En(t,n)}catch{return!0}}function p1(t){var e=oi(t,1);e!==null&&_n(e,t,1,-1)}function By(t){var e=Ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:t},e.queue=t,t=t.dispatch=sP.bind(null,$e,t),[e.memoizedState,t]}function fa(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function m1(){return hn().memoizedState}function lu(t,e,n,i){var r=Ln();$e.flags|=t,r.memoizedState=fa(1|e,n,void 0,i===void 0?null:i)}function Ic(t,e,n,i){var r=hn();i=i===void 0?null:i;var o=void 0;if(Ye!==null){var l=Ye.memoizedState;if(o=l.destroy,i!==null&&am(i,l.deps)){r.memoizedState=fa(e,n,o,i);return}}$e.flags|=t,r.memoizedState=fa(1|e,n,o,i)}function Uy(t,e){return lu(8390656,8,t,e)}function cm(t,e){return Ic(2048,8,t,e)}function g1(t,e){return Ic(4,2,t,e)}function v1(t,e){return Ic(4,4,t,e)}function y1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _1(t,e,n){return n=n!=null?n.concat([t]):null,Ic(4,4,y1.bind(null,e,t),n)}function hm(){}function w1(t,e){var n=hn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&am(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function E1(t,e){var n=hn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&am(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function T1(t,e,n){return Ir&21?(En(n,e)||(n=k0(),$e.lanes|=n,xr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ut=!0),t.memoizedState=n)}function iP(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var i=Ed.transition;Ed.transition={};try{t(!1),e()}finally{Te=n,Ed.transition=i}}function S1(){return hn().memoizedState}function rP(t,e,n){var i=Bi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},C1(t))k1(e,n);else if(n=t1(t,e,n,i),n!==null){var r=Rt();_n(n,t,i,r),I1(n,e,i)}}function sP(t,e,n){var i=Bi(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(C1(t))k1(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,c=o(l,n);if(r.hasEagerState=!0,r.eagerState=c,En(c,l)){var h=e.interleaved;h===null?(r.next=r,nm(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=t1(t,e,r,i),n!==null&&(r=Rt(),_n(n,t,i,r),I1(n,e,i))}}function C1(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function k1(t,e){jo=ju=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function I1(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,jp(t,n)}}var Vu={readContext:cn,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},oP={readContext:cn,useCallback:function(t,e){return Ln().memoizedState=[t,e===void 0?null:e],t},useContext:cn,useEffect:Uy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,lu(4194308,4,y1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return lu(4194308,4,t,e)},useInsertionEffect:function(t,e){return lu(4,2,t,e)},useMemo:function(t,e){var n=Ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ln();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=rP.bind(null,$e,t),[i.memoizedState,t]},useRef:function(t){var e=Ln();return t={current:t},e.memoizedState=t},useState:By,useDebugValue:hm,useDeferredValue:function(t){return Ln().memoizedState=t},useTransition:function(){var t=By(!1),e=t[0];return t=iP.bind(null,t[1]),Ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=$e,r=Ln();if(Oe){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),st===null)throw Error($(349));Ir&30||c1(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,Uy(d1.bind(null,i,o,t),[t]),i.flags|=2048,fa(9,h1.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Ln(),e=st.identifierPrefix;if(Oe){var n=Yn,i=Qn;n=(i&~(1<<32-yn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=ha++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},aP={readContext:cn,useCallback:w1,useContext:cn,useEffect:cm,useImperativeHandle:_1,useInsertionEffect:g1,useLayoutEffect:v1,useMemo:E1,useReducer:Td,useRef:m1,useState:function(){return Td(da)},useDebugValue:hm,useDeferredValue:function(t){var e=hn();return T1(e,Ye.memoizedState,t)},useTransition:function(){var t=Td(da)[0],e=hn().memoizedState;return[t,e]},useMutableSource:l1,useSyncExternalStore:u1,useId:S1,unstable_isNewReconciler:!1},lP={readContext:cn,useCallback:w1,useContext:cn,useEffect:cm,useImperativeHandle:_1,useInsertionEffect:g1,useLayoutEffect:v1,useMemo:E1,useReducer:Sd,useRef:m1,useState:function(){return Sd(da)},useDebugValue:hm,useDeferredValue:function(t){var e=hn();return Ye===null?e.memoizedState=t:T1(e,Ye.memoizedState,t)},useTransition:function(){var t=Sd(da)[0],e=hn().memoizedState;return[t,e]},useMutableSource:l1,useSyncExternalStore:u1,useId:S1,unstable_isNewReconciler:!1};function As(t,e){try{var n="",i=e;do n+=bI(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Cd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Nf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var uP=typeof WeakMap=="function"?WeakMap:Map;function x1(t,e,n){n=ti(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Wu||(Wu=!0,Uf=i),Nf(t,e)},n}function P1(t,e,n){n=ti(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Nf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Nf(t,e),typeof i!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function jy(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new uP;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=SP.bind(null,t,e,n),e.then(t,t))}function Vy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Hy(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ti(-1,1),e.tag=2,zi(n,e,1))),n.lanes|=1),t)}var cP=pi.ReactCurrentOwner,Ut=!1;function At(t,e,n,i){e.child=t===null?o1(e,null,n,i):Ps(e,t.child,n,i)}function Wy(t,e,n,i,r){n=n.render;var o=e.ref;return vs(e,r),i=lm(t,e,n,i,o,r),n=um(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ai(t,e,r)):(Oe&&n&&Qp(e),e.flags|=1,At(t,e,i,r),e.child)}function qy(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!_m(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,L1(t,e,o,i,r)):(t=du(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:sa,n(l,i)&&t.ref===e.ref)return ai(t,e,r)}return e.flags|=1,t=Ui(o,i),t.ref=e.ref,t.return=e,e.child=t}function L1(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(sa(o,i)&&t.ref===e.ref)if(Ut=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(Ut=!0);else return e.lanes=t.lanes,ai(t,e,r)}return Rf(t,e,n,i,r)}function A1(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xe(cs,Wt),Wt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,xe(cs,Wt),Wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,xe(cs,Wt),Wt|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,xe(cs,Wt),Wt|=i;return At(t,e,r,n),e.child}function N1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Rf(t,e,n,i,r){var o=Vt(n)?Cr:It.current;return o=Is(e,o),vs(e,r),n=lm(t,e,n,i,o,r),i=um(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ai(t,e,r)):(Oe&&i&&Qp(e),e.flags|=1,At(t,e,n,r),e.child)}function Zy(t,e,n,i,r){if(Vt(n)){var o=!0;Mu(e)}else o=!1;if(vs(e,r),e.stateNode===null)uu(t,e),r1(e,n,i),Af(e,n,i,r),i=!0;else if(t===null){var l=e.stateNode,c=e.memoizedProps;l.props=c;var h=l.context,f=n.contextType;typeof f=="object"&&f!==null?f=cn(f):(f=Vt(n)?Cr:It.current,f=Is(e,f));var m=n.getDerivedStateFromProps,v=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";v||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==i||h!==f)&&zy(e,l,i,f),Si=!1;var y=e.memoizedState;l.state=y,Bu(e,i,l,r),h=e.memoizedState,c!==i||y!==h||jt.current||Si?(typeof m=="function"&&(Lf(e,n,m,i),h=e.memoizedState),(c=Si||$y(e,n,c,i,y,h,f))?(v||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),l.props=i,l.state=h,l.context=f,i=c):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,n1(t,e),c=e.memoizedProps,f=e.type===e.elementType?c:mn(e.type,c),l.props=f,v=e.pendingProps,y=l.context,h=n.contextType,typeof h=="object"&&h!==null?h=cn(h):(h=Vt(n)?Cr:It.current,h=Is(e,h));var T=n.getDerivedStateFromProps;(m=typeof T=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==v||y!==h)&&zy(e,l,i,h),Si=!1,y=e.memoizedState,l.state=y,Bu(e,i,l,r);var C=e.memoizedState;c!==v||y!==C||jt.current||Si?(typeof T=="function"&&(Lf(e,n,T,i),C=e.memoizedState),(f=Si||$y(e,n,f,i,y,C,h)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,C,h),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,C,h)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=C),l.props=i,l.state=C,l.context=h,i=f):(typeof l.componentDidUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),i=!1)}return Of(t,e,n,i,o,r)}function Of(t,e,n,i,r,o){N1(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return r&&Ry(e,n,!1),ai(t,e,o);i=e.stateNode,cP.current=e;var c=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=Ps(e,t.child,null,o),e.child=Ps(e,null,c,o)):At(t,e,c,o),e.memoizedState=i.state,r&&Ry(e,n,!0),e.child}function R1(t){var e=t.stateNode;e.pendingContext?Ny(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ny(t,e.context,!1),rm(t,e.containerInfo)}function Ky(t,e,n,i,r){return xs(),Xp(r),e.flags|=256,At(t,e,n,i),e.child}var Df={dehydrated:null,treeContext:null,retryLane:0};function Mf(t){return{baseLanes:t,cachePool:null,transitions:null}}function O1(t,e,n){var i=e.pendingProps,r=be.current,o=!1,l=(e.flags&128)!==0,c;if((c=l)||(c=t!==null&&t.memoizedState===null?!1:(r&2)!==0),c?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),xe(be,r&1),t===null)return xf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Lc(l,i,0,null),t=Er(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Mf(n),e.memoizedState=Df,t):dm(e,l));if(r=t.memoizedState,r!==null&&(c=r.dehydrated,c!==null))return hP(t,e,l,i,c,r,n);if(o){o=i.fallback,l=e.mode,r=t.child,c=r.sibling;var h={mode:"hidden",children:i.children};return!(l&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=Ui(r,h),i.subtreeFlags=r.subtreeFlags&14680064),c!==null?o=Ui(c,o):(o=Er(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?Mf(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=Df,i}return o=t.child,t=o.sibling,i=Ui(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function dm(t,e){return e=Lc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ul(t,e,n,i){return i!==null&&Xp(i),Ps(e,t.child,null,n),t=dm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hP(t,e,n,i,r,o,l){if(n)return e.flags&256?(e.flags&=-257,i=Cd(Error($(422))),Ul(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=Lc({mode:"visible",children:i.children},r,0,null),o=Er(o,r,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Ps(e,t.child,null,l),e.child.memoizedState=Mf(l),e.memoizedState=Df,o);if(!(e.mode&1))return Ul(t,e,l,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var c=i.dgst;return i=c,o=Error($(419)),i=Cd(o,i,void 0),Ul(t,e,l,i)}if(c=(l&t.childLanes)!==0,Ut||c){if(i=st,i!==null){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|l)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,oi(t,r),_n(i,t,r,-1))}return ym(),i=Cd(Error($(421))),Ul(t,e,l,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=CP.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,qt=$i(r.nextSibling),Kt=e,Oe=!0,vn=null,t!==null&&(rn[sn++]=Qn,rn[sn++]=Yn,rn[sn++]=kr,Qn=t.id,Yn=t.overflow,kr=e),e=dm(e,i.children),e.flags|=4096,e)}function Gy(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Pf(t.return,e,n)}function kd(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function D1(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(At(t,e,i.children,n),i=be.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gy(t,n,e);else if(t.tag===19)Gy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(xe(be,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Uu(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),kd(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Uu(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}kd(e,!0,n,null,o);break;case"together":kd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function uu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ai(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=Ui(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ui(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function dP(t,e,n){switch(e.tag){case 3:R1(e),xs();break;case 5:a1(e);break;case 1:Vt(e.type)&&Mu(e);break;case 4:rm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;xe(zu,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(xe(be,be.current&1),e.flags|=128,null):n&e.child.childLanes?O1(t,e,n):(xe(be,be.current&1),t=ai(t,e,n),t!==null?t.sibling:null);xe(be,be.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return D1(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),xe(be,be.current),i)break;return null;case 22:case 23:return e.lanes=0,A1(t,e,n)}return ai(t,e,n)}var M1,bf,b1,$1;M1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bf=function(){};b1=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,pr(bn.current);var o=null;switch(n){case"input":r=rf(t,r),i=rf(t,i),o=[];break;case"select":r=ze({},r,{value:void 0}),i=ze({},i,{value:void 0}),o=[];break;case"textarea":r=af(t,r),i=af(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Ou)}uf(n,i);var l;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var c=r[f];for(l in c)c.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Xo.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(c=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==c&&(h!=null||c!=null))if(f==="style")if(c){for(l in c)!c.hasOwnProperty(l)||h&&h.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in h)h.hasOwnProperty(l)&&c[l]!==h[l]&&(n||(n={}),n[l]=h[l])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,c=c?c.__html:void 0,h!=null&&c!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Xo.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&Pe("scroll",t),o||c===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};$1=function(t,e,n,i){n!==i&&(e.flags|=4)};function To(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function fP(t,e,n){var i=e.pendingProps;switch(Yp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(e),null;case 1:return Vt(e.type)&&Du(),vt(e),null;case 3:return i=e.stateNode,Ls(),Ne(jt),Ne(It),om(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Fl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vn!==null&&(Hf(vn),vn=null))),bf(t,e),vt(e),null;case 5:sm(e);var r=pr(ca.current);if(n=e.type,t!==null&&e.stateNode!=null)b1(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error($(166));return vt(e),null}if(t=pr(bn.current),Fl(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[An]=e,i[la]=o,t=(e.mode&1)!==0,n){case"dialog":Pe("cancel",i),Pe("close",i);break;case"iframe":case"object":case"embed":Pe("load",i);break;case"video":case"audio":for(r=0;r<Ao.length;r++)Pe(Ao[r],i);break;case"source":Pe("error",i);break;case"img":case"image":case"link":Pe("error",i),Pe("load",i);break;case"details":Pe("toggle",i);break;case"input":ry(i,o),Pe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Pe("invalid",i);break;case"textarea":oy(i,o),Pe("invalid",i)}uf(n,o),r=null;for(var l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="children"?typeof c=="string"?i.textContent!==c&&(o.suppressHydrationWarning!==!0&&zl(i.textContent,c,t),r=["children",c]):typeof c=="number"&&i.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&zl(i.textContent,c,t),r=["children",""+c]):Xo.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&Pe("scroll",i)}switch(n){case"input":Al(i),sy(i,o,!0);break;case"textarea":Al(i),ay(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Ou)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=c0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[An]=e,t[la]=i,M1(t,e,!1,!1),e.stateNode=t;e:{switch(l=cf(n,i),n){case"dialog":Pe("cancel",t),Pe("close",t),r=i;break;case"iframe":case"object":case"embed":Pe("load",t),r=i;break;case"video":case"audio":for(r=0;r<Ao.length;r++)Pe(Ao[r],t);r=i;break;case"source":Pe("error",t),r=i;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),r=i;break;case"details":Pe("toggle",t),r=i;break;case"input":ry(t,i),r=rf(t,i),Pe("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=ze({},i,{value:void 0}),Pe("invalid",t);break;case"textarea":oy(t,i),r=af(t,i),Pe("invalid",t);break;default:r=i}uf(n,r),c=r;for(o in c)if(c.hasOwnProperty(o)){var h=c[o];o==="style"?f0(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&h0(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Jo(t,h):typeof h=="number"&&Jo(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Xo.hasOwnProperty(o)?h!=null&&o==="onScroll"&&Pe("scroll",t):h!=null&&bp(t,o,h,l))}switch(n){case"input":Al(t),sy(t,i,!1);break;case"textarea":Al(t),ay(t);break;case"option":i.value!=null&&t.setAttribute("value",""+qi(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?fs(t,!!i.multiple,o,!1):i.defaultValue!=null&&fs(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Ou)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vt(e),null;case 6:if(t&&e.stateNode!=null)$1(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error($(166));if(n=pr(ca.current),pr(bn.current),Fl(e)){if(i=e.stateNode,n=e.memoizedProps,i[An]=e,(o=i.nodeValue!==n)&&(t=Kt,t!==null))switch(t.tag){case 3:zl(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zl(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[An]=e,e.stateNode=i}return vt(e),null;case 13:if(Ne(be),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&qt!==null&&e.mode&1&&!(e.flags&128))e1(),xs(),e.flags|=98560,o=!1;else if(o=Fl(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error($(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error($(317));o[An]=e}else xs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vt(e),o=!1}else vn!==null&&(Hf(vn),vn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||be.current&1?Xe===0&&(Xe=3):ym())),e.updateQueue!==null&&(e.flags|=4),vt(e),null);case 4:return Ls(),bf(t,e),t===null&&oa(e.stateNode.containerInfo),vt(e),null;case 10:return tm(e.type._context),vt(e),null;case 17:return Vt(e.type)&&Du(),vt(e),null;case 19:if(Ne(be),o=e.memoizedState,o===null)return vt(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)To(o,!1);else{if(Xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Uu(t),l!==null){for(e.flags|=128,To(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return xe(be,be.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ve()>Ns&&(e.flags|=128,i=!0,To(o,!1),e.lanes=4194304)}else{if(!i)if(t=Uu(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),To(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Oe)return vt(e),null}else 2*Ve()-o.renderingStartTime>Ns&&n!==1073741824&&(e.flags|=128,i=!0,To(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ve(),e.sibling=null,n=be.current,xe(be,i?n&1|2:n&1),e):(vt(e),null);case 22:case 23:return vm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Wt&1073741824&&(vt(e),e.subtreeFlags&6&&(e.flags|=8192)):vt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function pP(t,e){switch(Yp(e),e.tag){case 1:return Vt(e.type)&&Du(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ls(),Ne(jt),Ne(It),om(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return sm(e),null;case 13:if(Ne(be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));xs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ne(be),null;case 4:return Ls(),null;case 10:return tm(e.type._context),null;case 22:case 23:return vm(),null;case 24:return null;default:return null}}var jl=!1,wt=!1,mP=typeof WeakSet=="function"?WeakSet:Set,q=null;function us(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Be(t,e,i)}else n.current=null}function $f(t,e,n){try{n()}catch(i){Be(t,e,i)}}var Qy=!1;function gP(t,e){if(wf=Au,t=U0(),Gp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,c=-1,h=-1,f=0,m=0,v=t,y=null;t:for(;;){for(var T;v!==n||r!==0&&v.nodeType!==3||(c=l+r),v!==o||i!==0&&v.nodeType!==3||(h=l+i),v.nodeType===3&&(l+=v.nodeValue.length),(T=v.firstChild)!==null;)y=v,v=T;for(;;){if(v===t)break t;if(y===n&&++f===r&&(c=l),y===o&&++m===i&&(h=l),(T=v.nextSibling)!==null)break;v=y,y=v.parentNode}v=T}n=c===-1||h===-1?null:{start:c,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ef={focusedElem:t,selectionRange:n},Au=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var k=C.memoizedProps,M=C.memoizedState,S=e.stateNode,_=S.getSnapshotBeforeUpdate(e.elementType===e.type?k:mn(e.type,k),M);S.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(P){Be(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return C=Qy,Qy=!1,C}function Vo(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&$f(e,n,o)}r=r.next}while(r!==i)}}function xc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function zf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function z1(t){var e=t.alternate;e!==null&&(t.alternate=null,z1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[An],delete e[la],delete e[Cf],delete e[Xx],delete e[Jx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function F1(t){return t.tag===5||t.tag===3||t.tag===4}function Yy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||F1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ff(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ou));else if(i!==4&&(t=t.child,t!==null))for(Ff(t,e,n),t=t.sibling;t!==null;)Ff(t,e,n),t=t.sibling}function Bf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Bf(t,e,n),t=t.sibling;t!==null;)Bf(t,e,n),t=t.sibling}var ct=null,gn=!1;function _i(t,e,n){for(n=n.child;n!==null;)B1(t,e,n),n=n.sibling}function B1(t,e,n){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(_c,n)}catch{}switch(n.tag){case 5:wt||us(n,e);case 6:var i=ct,r=gn;ct=null,_i(t,e,n),ct=i,gn=r,ct!==null&&(gn?(t=ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ct.removeChild(n.stateNode));break;case 18:ct!==null&&(gn?(t=ct,n=n.stateNode,t.nodeType===8?yd(t.parentNode,n):t.nodeType===1&&yd(t,n),ia(t)):yd(ct,n.stateNode));break;case 4:i=ct,r=gn,ct=n.stateNode.containerInfo,gn=!0,_i(t,e,n),ct=i,gn=r;break;case 0:case 11:case 14:case 15:if(!wt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&$f(n,e,l),r=r.next}while(r!==i)}_i(t,e,n);break;case 1:if(!wt&&(us(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(c){Be(n,e,c)}_i(t,e,n);break;case 21:_i(t,e,n);break;case 22:n.mode&1?(wt=(i=wt)||n.memoizedState!==null,_i(t,e,n),wt=i):_i(t,e,n);break;default:_i(t,e,n)}}function Xy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mP),e.forEach(function(i){var r=kP.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function pn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,l=e,c=l;e:for(;c!==null;){switch(c.tag){case 5:ct=c.stateNode,gn=!1;break e;case 3:ct=c.stateNode.containerInfo,gn=!0;break e;case 4:ct=c.stateNode.containerInfo,gn=!0;break e}c=c.return}if(ct===null)throw Error($(160));B1(o,l,r),ct=null,gn=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){Be(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)U1(e,t),e=e.sibling}function U1(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pn(e,t),Pn(t),i&4){try{Vo(3,t,t.return),xc(3,t)}catch(k){Be(t,t.return,k)}try{Vo(5,t,t.return)}catch(k){Be(t,t.return,k)}}break;case 1:pn(e,t),Pn(t),i&512&&n!==null&&us(n,n.return);break;case 5:if(pn(e,t),Pn(t),i&512&&n!==null&&us(n,n.return),t.flags&32){var r=t.stateNode;try{Jo(r,"")}catch(k){Be(t,t.return,k)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,c=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&l0(r,o),cf(c,l);var f=cf(c,o);for(l=0;l<h.length;l+=2){var m=h[l],v=h[l+1];m==="style"?f0(r,v):m==="dangerouslySetInnerHTML"?h0(r,v):m==="children"?Jo(r,v):bp(r,m,v,f)}switch(c){case"input":sf(r,o);break;case"textarea":u0(r,o);break;case"select":var y=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?fs(r,!!o.multiple,T,!1):y!==!!o.multiple&&(o.defaultValue!=null?fs(r,!!o.multiple,o.defaultValue,!0):fs(r,!!o.multiple,o.multiple?[]:"",!1))}r[la]=o}catch(k){Be(t,t.return,k)}}break;case 6:if(pn(e,t),Pn(t),i&4){if(t.stateNode===null)throw Error($(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(k){Be(t,t.return,k)}}break;case 3:if(pn(e,t),Pn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ia(e.containerInfo)}catch(k){Be(t,t.return,k)}break;case 4:pn(e,t),Pn(t);break;case 13:pn(e,t),Pn(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(mm=Ve())),i&4&&Xy(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(wt=(f=wt)||m,pn(e,t),wt=f):pn(e,t),Pn(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(q=t,m=t.child;m!==null;){for(v=q=m;q!==null;){switch(y=q,T=y.child,y.tag){case 0:case 11:case 14:case 15:Vo(4,y,y.return);break;case 1:us(y,y.return);var C=y.stateNode;if(typeof C.componentWillUnmount=="function"){i=y,n=y.return;try{e=i,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(k){Be(i,n,k)}}break;case 5:us(y,y.return);break;case 22:if(y.memoizedState!==null){e_(v);continue}}T!==null?(T.return=y,q=T):e_(v)}m=m.sibling}e:for(m=null,v=t;;){if(v.tag===5){if(m===null){m=v;try{r=v.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=v.stateNode,h=v.memoizedProps.style,l=h!=null&&h.hasOwnProperty("display")?h.display:null,c.style.display=d0("display",l))}catch(k){Be(t,t.return,k)}}}else if(v.tag===6){if(m===null)try{v.stateNode.nodeValue=f?"":v.memoizedProps}catch(k){Be(t,t.return,k)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;m===v&&(m=null),v=v.return}m===v&&(m=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:pn(e,t),Pn(t),i&4&&Xy(t);break;case 21:break;default:pn(e,t),Pn(t)}}function Pn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(F1(n)){var i=n;break e}n=n.return}throw Error($(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Jo(r,""),i.flags&=-33);var o=Yy(t);Bf(t,o,r);break;case 3:case 4:var l=i.stateNode.containerInfo,c=Yy(t);Ff(t,c,l);break;default:throw Error($(161))}}catch(h){Be(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vP(t,e,n){q=t,j1(t)}function j1(t,e,n){for(var i=(t.mode&1)!==0;q!==null;){var r=q,o=r.child;if(r.tag===22&&i){var l=r.memoizedState!==null||jl;if(!l){var c=r.alternate,h=c!==null&&c.memoizedState!==null||wt;c=jl;var f=wt;if(jl=l,(wt=h)&&!f)for(q=r;q!==null;)l=q,h=l.child,l.tag===22&&l.memoizedState!==null?t_(r):h!==null?(h.return=l,q=h):t_(r);for(;o!==null;)q=o,j1(o),o=o.sibling;q=r,jl=c,wt=f}Jy(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,q=o):Jy(t)}}function Jy(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wt||xc(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!wt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:mn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&by(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}by(e,l,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var v=m.dehydrated;v!==null&&ia(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}wt||e.flags&512&&zf(e)}catch(y){Be(e,e.return,y)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function e_(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function t_(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xc(4,e)}catch(h){Be(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){Be(e,r,h)}}var o=e.return;try{zf(e)}catch(h){Be(e,o,h)}break;case 5:var l=e.return;try{zf(e)}catch(h){Be(e,l,h)}}}catch(h){Be(e,e.return,h)}if(e===t){q=null;break}var c=e.sibling;if(c!==null){c.return=e.return,q=c;break}q=e.return}}var yP=Math.ceil,Hu=pi.ReactCurrentDispatcher,fm=pi.ReactCurrentOwner,ln=pi.ReactCurrentBatchConfig,ve=0,st=null,Ke=null,ft=0,Wt=0,cs=Xi(0),Xe=0,pa=null,xr=0,Pc=0,pm=0,Ho=null,Ft=null,mm=0,Ns=1/0,Kn=null,Wu=!1,Uf=null,Fi=null,Vl=!1,Ni=null,qu=0,Wo=0,jf=null,cu=-1,hu=0;function Rt(){return ve&6?Ve():cu!==-1?cu:cu=Ve()}function Bi(t){return t.mode&1?ve&2&&ft!==0?ft&-ft:tP.transition!==null?(hu===0&&(hu=k0()),hu):(t=Te,t!==0||(t=window.event,t=t===void 0?16:R0(t.type)),t):1}function _n(t,e,n,i){if(50<Wo)throw Wo=0,jf=null,Error($(185));Da(t,n,i),(!(ve&2)||t!==st)&&(t===st&&(!(ve&2)&&(Pc|=n),Xe===4&&ki(t,ft)),Ht(t,i),n===1&&ve===0&&!(e.mode&1)&&(Ns=Ve()+500,Cc&&Ji()))}function Ht(t,e){var n=t.callbackNode;tx(t,e);var i=Lu(t,t===st?ft:0);if(i===0)n!==null&&cy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&cy(n),e===1)t.tag===0?eP(n_.bind(null,t)):Y0(n_.bind(null,t)),Qx(function(){!(ve&6)&&Ji()}),n=null;else{switch(I0(i)){case 1:n=Up;break;case 4:n=S0;break;case 16:n=Pu;break;case 536870912:n=C0;break;default:n=Pu}n=Q1(n,V1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function V1(t,e){if(cu=-1,hu=0,ve&6)throw Error($(327));var n=t.callbackNode;if(ys()&&t.callbackNode!==n)return null;var i=Lu(t,t===st?ft:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Zu(t,i);else{e=i;var r=ve;ve|=2;var o=W1();(st!==t||ft!==e)&&(Kn=null,Ns=Ve()+500,wr(t,e));do try{EP();break}catch(c){H1(t,c)}while(1);em(),Hu.current=o,ve=r,Ke!==null?e=0:(st=null,ft=0,e=Xe)}if(e!==0){if(e===2&&(r=mf(t),r!==0&&(i=r,e=Vf(t,r))),e===1)throw n=pa,wr(t,0),ki(t,i),Ht(t,Ve()),n;if(e===6)ki(t,i);else{if(r=t.current.alternate,!(i&30)&&!_P(r)&&(e=Zu(t,i),e===2&&(o=mf(t),o!==0&&(i=o,e=Vf(t,o))),e===1))throw n=pa,wr(t,0),ki(t,i),Ht(t,Ve()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error($(345));case 2:cr(t,Ft,Kn);break;case 3:if(ki(t,i),(i&130023424)===i&&(e=mm+500-Ve(),10<e)){if(Lu(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Rt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Sf(cr.bind(null,t,Ft,Kn),e);break}cr(t,Ft,Kn);break;case 4:if(ki(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var l=31-yn(i);o=1<<l,l=e[l],l>r&&(r=l),i&=~o}if(i=r,i=Ve()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*yP(i/1960))-i,10<i){t.timeoutHandle=Sf(cr.bind(null,t,Ft,Kn),i);break}cr(t,Ft,Kn);break;case 5:cr(t,Ft,Kn);break;default:throw Error($(329))}}}return Ht(t,Ve()),t.callbackNode===n?V1.bind(null,t):null}function Vf(t,e){var n=Ho;return t.current.memoizedState.isDehydrated&&(wr(t,e).flags|=256),t=Zu(t,e),t!==2&&(e=Ft,Ft=n,e!==null&&Hf(e)),t}function Hf(t){Ft===null?Ft=t:Ft.push.apply(Ft,t)}function _P(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!En(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ki(t,e){for(e&=~pm,e&=~Pc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yn(e),i=1<<n;t[n]=-1,e&=~i}}function n_(t){if(ve&6)throw Error($(327));ys();var e=Lu(t,0);if(!(e&1))return Ht(t,Ve()),null;var n=Zu(t,e);if(t.tag!==0&&n===2){var i=mf(t);i!==0&&(e=i,n=Vf(t,i))}if(n===1)throw n=pa,wr(t,0),ki(t,e),Ht(t,Ve()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cr(t,Ft,Kn),Ht(t,Ve()),null}function gm(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(Ns=Ve()+500,Cc&&Ji())}}function Pr(t){Ni!==null&&Ni.tag===0&&!(ve&6)&&ys();var e=ve;ve|=1;var n=ln.transition,i=Te;try{if(ln.transition=null,Te=1,t)return t()}finally{Te=i,ln.transition=n,ve=e,!(ve&6)&&Ji()}}function vm(){Wt=cs.current,Ne(cs)}function wr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Gx(n)),Ke!==null)for(n=Ke.return;n!==null;){var i=n;switch(Yp(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Du();break;case 3:Ls(),Ne(jt),Ne(It),om();break;case 5:sm(i);break;case 4:Ls();break;case 13:Ne(be);break;case 19:Ne(be);break;case 10:tm(i.type._context);break;case 22:case 23:vm()}n=n.return}if(st=t,Ke=t=Ui(t.current,null),ft=Wt=e,Xe=0,pa=null,pm=Pc=xr=0,Ft=Ho=null,fr!==null){for(e=0;e<fr.length;e++)if(n=fr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=r,i.next=l}n.pending=i}fr=null}return t}function H1(t,e){do{var n=Ke;try{if(em(),au.current=Vu,ju){for(var i=$e.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ju=!1}if(Ir=0,rt=Ye=$e=null,jo=!1,ha=0,fm.current=null,n===null||n.return===null){Xe=1,pa=e,Ke=null;break}e:{var o=t,l=n.return,c=n,h=e;if(e=ft,c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,m=c,v=m.tag;if(!(m.mode&1)&&(v===0||v===11||v===15)){var y=m.alternate;y?(m.updateQueue=y.updateQueue,m.memoizedState=y.memoizedState,m.lanes=y.lanes):(m.updateQueue=null,m.memoizedState=null)}var T=Vy(l);if(T!==null){T.flags&=-257,Hy(T,l,c,o,e),T.mode&1&&jy(o,f,e),e=T,h=f;var C=e.updateQueue;if(C===null){var k=new Set;k.add(h),e.updateQueue=k}else C.add(h);break e}else{if(!(e&1)){jy(o,f,e),ym();break e}h=Error($(426))}}else if(Oe&&c.mode&1){var M=Vy(l);if(M!==null){!(M.flags&65536)&&(M.flags|=256),Hy(M,l,c,o,e),Xp(As(h,c));break e}}o=h=As(h,c),Xe!==4&&(Xe=2),Ho===null?Ho=[o]:Ho.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var S=x1(o,h,e);My(o,S);break e;case 1:c=h;var _=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Fi===null||!Fi.has(w)))){o.flags|=65536,e&=-e,o.lanes|=e;var P=P1(o,c,e);My(o,P);break e}}o=o.return}while(o!==null)}Z1(n)}catch(b){e=b,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(1)}function W1(){var t=Hu.current;return Hu.current=Vu,t===null?Vu:t}function ym(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),st===null||!(xr&268435455)&&!(Pc&268435455)||ki(st,ft)}function Zu(t,e){var n=ve;ve|=2;var i=W1();(st!==t||ft!==e)&&(Kn=null,wr(t,e));do try{wP();break}catch(r){H1(t,r)}while(1);if(em(),ve=n,Hu.current=i,Ke!==null)throw Error($(261));return st=null,ft=0,Xe}function wP(){for(;Ke!==null;)q1(Ke)}function EP(){for(;Ke!==null&&!qI();)q1(Ke)}function q1(t){var e=G1(t.alternate,t,Wt);t.memoizedProps=t.pendingProps,e===null?Z1(t):Ke=e,fm.current=null}function Z1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=pP(n,e),n!==null){n.flags&=32767,Ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xe=6,Ke=null;return}}else if(n=fP(n,e,Wt),n!==null){Ke=n;return}if(e=e.sibling,e!==null){Ke=e;return}Ke=e=t}while(e!==null);Xe===0&&(Xe=5)}function cr(t,e,n){var i=Te,r=ln.transition;try{ln.transition=null,Te=1,TP(t,e,n,i)}finally{ln.transition=r,Te=i}return null}function TP(t,e,n,i){do ys();while(Ni!==null);if(ve&6)throw Error($(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(nx(t,o),t===st&&(Ke=st=null,ft=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vl||(Vl=!0,Q1(Pu,function(){return ys(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=ln.transition,ln.transition=null;var l=Te;Te=1;var c=ve;ve|=4,fm.current=null,gP(t,n),U1(n,t),jx(Ef),Au=!!wf,Ef=wf=null,t.current=n,vP(n),ZI(),ve=c,Te=l,ln.transition=o}else t.current=n;if(Vl&&(Vl=!1,Ni=t,qu=r),o=t.pendingLanes,o===0&&(Fi=null),QI(n.stateNode),Ht(t,Ve()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Wu)throw Wu=!1,t=Uf,Uf=null,t;return qu&1&&t.tag!==0&&ys(),o=t.pendingLanes,o&1?t===jf?Wo++:(Wo=0,jf=t):Wo=0,Ji(),null}function ys(){if(Ni!==null){var t=I0(qu),e=ln.transition,n=Te;try{if(ln.transition=null,Te=16>t?16:t,Ni===null)var i=!1;else{if(t=Ni,Ni=null,qu=0,ve&6)throw Error($(331));var r=ve;for(ve|=4,q=t.current;q!==null;){var o=q,l=o.child;if(q.flags&16){var c=o.deletions;if(c!==null){for(var h=0;h<c.length;h++){var f=c[h];for(q=f;q!==null;){var m=q;switch(m.tag){case 0:case 11:case 15:Vo(8,m,o)}var v=m.child;if(v!==null)v.return=m,q=v;else for(;q!==null;){m=q;var y=m.sibling,T=m.return;if(z1(m),m===f){q=null;break}if(y!==null){y.return=T,q=y;break}q=T}}}var C=o.alternate;if(C!==null){var k=C.child;if(k!==null){C.child=null;do{var M=k.sibling;k.sibling=null,k=M}while(k!==null)}}q=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,q=l;else e:for(;q!==null;){if(o=q,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Vo(9,o,o.return)}var S=o.sibling;if(S!==null){S.return=o.return,q=S;break e}q=o.return}}var _=t.current;for(q=_;q!==null;){l=q;var w=l.child;if(l.subtreeFlags&2064&&w!==null)w.return=l,q=w;else e:for(l=_;q!==null;){if(c=q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:xc(9,c)}}catch(b){Be(c,c.return,b)}if(c===l){q=null;break e}var P=c.sibling;if(P!==null){P.return=c.return,q=P;break e}q=c.return}}if(ve=r,Ji(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(_c,t)}catch{}i=!0}return i}finally{Te=n,ln.transition=e}}return!1}function i_(t,e,n){e=As(n,e),e=x1(t,e,1),t=zi(t,e,1),e=Rt(),t!==null&&(Da(t,1,e),Ht(t,e))}function Be(t,e,n){if(t.tag===3)i_(t,t,n);else for(;e!==null;){if(e.tag===3){i_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Fi===null||!Fi.has(i))){t=As(n,t),t=P1(e,t,1),e=zi(e,t,1),t=Rt(),e!==null&&(Da(e,1,t),Ht(e,t));break}}e=e.return}}function SP(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Rt(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(ft&n)===n&&(Xe===4||Xe===3&&(ft&130023424)===ft&&500>Ve()-mm?wr(t,0):pm|=n),Ht(t,e)}function K1(t,e){e===0&&(t.mode&1?(e=Ol,Ol<<=1,!(Ol&130023424)&&(Ol=4194304)):e=1);var n=Rt();t=oi(t,e),t!==null&&(Da(t,e,n),Ht(t,n))}function CP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),K1(t,n)}function kP(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error($(314))}i!==null&&i.delete(e),K1(t,n)}var G1;G1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)Ut=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ut=!1,dP(t,e,n);Ut=!!(t.flags&131072)}else Ut=!1,Oe&&e.flags&1048576&&X0(e,$u,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;uu(t,e),t=e.pendingProps;var r=Is(e,It.current);vs(e,n),r=lm(null,e,i,t,r,n);var o=um();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vt(i)?(o=!0,Mu(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,im(e),r.updater=kc,e.stateNode=r,r._reactInternals=e,Af(e,i,t,n),e=Of(null,e,i,!0,o,n)):(e.tag=0,Oe&&o&&Qp(e),At(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(uu(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=xP(i),t=mn(i,t),r){case 0:e=Rf(null,e,i,t,n);break e;case 1:e=Zy(null,e,i,t,n);break e;case 11:e=Wy(null,e,i,t,n);break e;case 14:e=qy(null,e,i,mn(i.type,t),n);break e}throw Error($(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:mn(i,r),Rf(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:mn(i,r),Zy(t,e,i,r,n);case 3:e:{if(R1(e),t===null)throw Error($(387));i=e.pendingProps,o=e.memoizedState,r=o.element,n1(t,e),Bu(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=As(Error($(423)),e),e=Ky(t,e,i,n,r);break e}else if(i!==r){r=As(Error($(424)),e),e=Ky(t,e,i,n,r);break e}else for(qt=$i(e.stateNode.containerInfo.firstChild),Kt=e,Oe=!0,vn=null,n=o1(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xs(),i===r){e=ai(t,e,n);break e}At(t,e,i,n)}e=e.child}return e;case 5:return a1(e),t===null&&xf(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,l=r.children,Tf(i,r)?l=null:o!==null&&Tf(i,o)&&(e.flags|=32),N1(t,e),At(t,e,l,n),e.child;case 6:return t===null&&xf(e),null;case 13:return O1(t,e,n);case 4:return rm(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ps(e,null,i,n):At(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:mn(i,r),Wy(t,e,i,r,n);case 7:return At(t,e,e.pendingProps,n),e.child;case 8:return At(t,e,e.pendingProps.children,n),e.child;case 12:return At(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,l=r.value,xe(zu,i._currentValue),i._currentValue=l,o!==null)if(En(o.value,l)){if(o.children===r.children&&!jt.current){e=ai(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var c=o.dependencies;if(c!==null){l=o.child;for(var h=c.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=ti(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?h.next=h:(h.next=m.next,m.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),Pf(o.return,n,e),c.lanes|=n;break}h=h.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error($(341));l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),Pf(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}At(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,vs(e,n),r=cn(r),i=i(r),e.flags|=1,At(t,e,i,n),e.child;case 14:return i=e.type,r=mn(i,e.pendingProps),r=mn(i.type,r),qy(t,e,i,r,n);case 15:return L1(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:mn(i,r),uu(t,e),e.tag=1,Vt(i)?(t=!0,Mu(e)):t=!1,vs(e,n),r1(e,i,r),Af(e,i,r,n),Of(null,e,i,!0,t,n);case 19:return D1(t,e,n);case 22:return A1(t,e,n)}throw Error($(156,e.tag))};function Q1(t,e){return T0(t,e)}function IP(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(t,e,n,i){return new IP(t,e,n,i)}function _m(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xP(t){if(typeof t=="function")return _m(t)?1:0;if(t!=null){if(t=t.$$typeof,t===zp)return 11;if(t===Fp)return 14}return 2}function Ui(t,e){var n=t.alternate;return n===null?(n=an(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function du(t,e,n,i,r,o){var l=2;if(i=t,typeof t=="function")_m(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case es:return Er(n.children,r,o,e);case $p:l=8,r|=8;break;case Jd:return t=an(12,n,e,r|2),t.elementType=Jd,t.lanes=o,t;case ef:return t=an(13,n,e,r),t.elementType=ef,t.lanes=o,t;case tf:return t=an(19,n,e,r),t.elementType=tf,t.lanes=o,t;case s0:return Lc(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case i0:l=10;break e;case r0:l=9;break e;case zp:l=11;break e;case Fp:l=14;break e;case Ti:l=16,i=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=an(l,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function Er(t,e,n,i){return t=an(7,t,i,e),t.lanes=n,t}function Lc(t,e,n,i){return t=an(22,t,i,e),t.elementType=s0,t.lanes=n,t.stateNode={isHidden:!1},t}function Id(t,e,n){return t=an(6,t,null,e),t.lanes=n,t}function xd(t,e,n){return e=an(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function PP(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ad(0),this.expirationTimes=ad(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ad(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function wm(t,e,n,i,r,o,l,c,h){return t=new PP(t,e,n,c,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=an(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},im(o),t}function LP(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jr,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Y1(t){if(!t)return Zi;t=t._reactInternals;e:{if(br(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(Vt(n))return Q0(t,n,e)}return e}function X1(t,e,n,i,r,o,l,c,h){return t=wm(n,i,!0,t,r,o,l,c,h),t.context=Y1(null),n=t.current,i=Rt(),r=Bi(n),o=ti(i,r),o.callback=e??null,zi(n,o,r),t.current.lanes=r,Da(t,r,i),Ht(t,i),t}function Ac(t,e,n,i){var r=e.current,o=Rt(),l=Bi(r);return n=Y1(n),e.context===null?e.context=n:e.pendingContext=n,e=ti(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=zi(r,e,l),t!==null&&(_n(t,r,l,o),ou(t,r,l)),l}function Ku(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function r_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Em(t,e){r_(t,e),(t=t.alternate)&&r_(t,e)}function AP(){return null}var J1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Tm(t){this._internalRoot=t}Nc.prototype.render=Tm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Ac(t,e,null,null)};Nc.prototype.unmount=Tm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pr(function(){Ac(null,t,null,null)}),e[si]=null}};function Nc(t){this._internalRoot=t}Nc.prototype.unstable_scheduleHydration=function(t){if(t){var e=L0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ci.length&&e!==0&&e<Ci[n].priority;n++);Ci.splice(n,0,t),n===0&&N0(t)}};function Sm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function s_(){}function NP(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=Ku(l);o.call(f)}}var l=X1(e,i,t,0,null,!1,!1,"",s_);return t._reactRootContainer=l,t[si]=l.current,oa(t.nodeType===8?t.parentNode:t),Pr(),l}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var c=i;i=function(){var f=Ku(h);c.call(f)}}var h=wm(t,0,!1,null,null,!1,!1,"",s_);return t._reactRootContainer=h,t[si]=h.current,oa(t.nodeType===8?t.parentNode:t),Pr(function(){Ac(e,h,n,i)}),h}function Oc(t,e,n,i,r){var o=n._reactRootContainer;if(o){var l=o;if(typeof r=="function"){var c=r;r=function(){var h=Ku(l);c.call(h)}}Ac(e,l,t,r)}else l=NP(n,e,t,r,i);return Ku(l)}x0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Lo(e.pendingLanes);n!==0&&(jp(e,n|1),Ht(e,Ve()),!(ve&6)&&(Ns=Ve()+500,Ji()))}break;case 13:Pr(function(){var i=oi(t,1);if(i!==null){var r=Rt();_n(i,t,1,r)}}),Em(t,1)}};Vp=function(t){if(t.tag===13){var e=oi(t,134217728);if(e!==null){var n=Rt();_n(e,t,134217728,n)}Em(t,134217728)}};P0=function(t){if(t.tag===13){var e=Bi(t),n=oi(t,e);if(n!==null){var i=Rt();_n(n,t,e,i)}Em(t,e)}};L0=function(){return Te};A0=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};df=function(t,e,n){switch(e){case"input":if(sf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Sc(i);if(!r)throw Error($(90));a0(i),sf(i,r)}}}break;case"textarea":u0(t,n);break;case"select":e=n.value,e!=null&&fs(t,!!n.multiple,e,!1)}};g0=gm;v0=Pr;var RP={usingClientEntryPoint:!1,Events:[ba,rs,Sc,p0,m0,gm]},So={findFiberByHostInstance:dr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},OP={bundleType:So.bundleType,version:So.version,rendererPackageName:So.rendererPackageName,rendererConfig:So.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=w0(t),t===null?null:t.stateNode},findFiberByHostInstance:So.findFiberByHostInstance||AP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hl.isDisabled&&Hl.supportsFiber)try{_c=Hl.inject(OP),Mn=Hl}catch{}}Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RP;Yt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sm(e))throw Error($(200));return LP(t,e,null,n)};Yt.createRoot=function(t,e){if(!Sm(t))throw Error($(299));var n=!1,i="",r=J1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=wm(t,1,!1,null,null,n,!1,i,r),t[si]=e.current,oa(t.nodeType===8?t.parentNode:t),new Tm(e)};Yt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=w0(e),t=t===null?null:t.stateNode,t};Yt.flushSync=function(t){return Pr(t)};Yt.hydrate=function(t,e,n){if(!Rc(e))throw Error($(200));return Oc(null,t,e,!0,n)};Yt.hydrateRoot=function(t,e,n){if(!Sm(t))throw Error($(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",l=J1;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=X1(e,null,t,1,n??null,r,!1,o,l),t[si]=e.current,oa(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Nc(e)};Yt.render=function(t,e,n){if(!Rc(e))throw Error($(200));return Oc(null,t,e,!1,n)};Yt.unmountComponentAtNode=function(t){if(!Rc(t))throw Error($(40));return t._reactRootContainer?(Pr(function(){Oc(null,null,t,!1,function(){t._reactRootContainer=null,t[si]=null})}),!0):!1};Yt.unstable_batchedUpdates=gm;Yt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Rc(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Oc(t,e,n,!1,i)};Yt.version="18.2.0-next-9e3b772b8-20220608";function eE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eE)}catch(t){console.error(t)}}eE(),Xw.exports=Yt;var DP=Xw.exports,o_=DP;Yd.createRoot=o_.createRoot,Yd.hydrateRoot=o_.hydrateRoot;function MP(t){function e(i){const r=document.getElementById(i.target.innerText.toLowerCase());r&&r.scrollIntoView({behavior:"smooth"})}function n(i){t.handleClick(i.target.innerText)}return A.jsxs("nav",{className:"navbar",children:[A.jsx("img",{src:"./assets/basket.png",className:"navbar-image"}),A.jsx("h2",{className:"navbar-title",children:"Basketball Court Finder"}),A.jsxs("ul",{children:[A.jsx("li",{children:A.jsx("a",{onClick:e,children:"HOME"})}),A.jsx("li",{children:A.jsx("a",{onClick:e,children:"ABOUT"})}),t.username==""?A.jsx("li",{children:A.jsx("a",{onClick:n,children:"LOGIN"})}):"",t.username==""?A.jsx("li",{children:A.jsx("a",{onClick:n,children:"SIGN UP"})}):A.jsx("li",{children:A.jsx("div",{className:"profile-picture",children:A.jsx("span",{className:"initials",children:t.username[0]})})})]})]})}function tE(t,e){return function(){return t.apply(e,arguments)}}const{toString:bP}=Object.prototype,{getPrototypeOf:Cm}=Object,Dc=(t=>e=>{const n=bP.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),jn=t=>(t=t.toLowerCase(),e=>Dc(e)===t),Mc=t=>e=>typeof e===t,{isArray:qs}=Array,ma=Mc("undefined");function $P(t){return t!==null&&!ma(t)&&t.constructor!==null&&!ma(t.constructor)&&un(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const nE=jn("ArrayBuffer");function zP(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&nE(t.buffer),e}const FP=Mc("string"),un=Mc("function"),iE=Mc("number"),bc=t=>t!==null&&typeof t=="object",BP=t=>t===!0||t===!1,fu=t=>{if(Dc(t)!=="object")return!1;const e=Cm(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},UP=jn("Date"),jP=jn("File"),VP=jn("Blob"),HP=jn("FileList"),WP=t=>bc(t)&&un(t.pipe),qP=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||un(t.append)&&((e=Dc(t))==="formdata"||e==="object"&&un(t.toString)&&t.toString()==="[object FormData]"))},ZP=jn("URLSearchParams"),KP=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function za(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,r;if(typeof t!="object"&&(t=[t]),qs(t))for(i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),l=o.length;let c;for(i=0;i<l;i++)c=o[i],e.call(null,t[c],c,t)}}function rE(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,r;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const sE=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),oE=t=>!ma(t)&&t!==sE;function Wf(){const{caseless:t}=oE(this)&&this||{},e={},n=(i,r)=>{const o=t&&rE(e,r)||r;fu(e[o])&&fu(i)?e[o]=Wf(e[o],i):fu(i)?e[o]=Wf({},i):qs(i)?e[o]=i.slice():e[o]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&za(arguments[i],n);return e}const GP=(t,e,n,{allOwnKeys:i}={})=>(za(e,(r,o)=>{n&&un(r)?t[o]=tE(r,n):t[o]=r},{allOwnKeys:i}),t),QP=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),YP=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},XP=(t,e,n,i)=>{let r,o,l;const c={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),o=r.length;o-- >0;)l=r[o],(!i||i(l,t,e))&&!c[l]&&(e[l]=t[l],c[l]=!0);t=n!==!1&&Cm(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},JP=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},eL=t=>{if(!t)return null;if(qs(t))return t;let e=t.length;if(!iE(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},tL=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Cm(Uint8Array)),nL=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=i.next())&&!r.done;){const o=r.value;e.call(t,o[0],o[1])}},iL=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},rL=jn("HTMLFormElement"),sL=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,r){return i.toUpperCase()+r}),a_=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),oL=jn("RegExp"),aE=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};za(n,(r,o)=>{e(r,o,t)!==!1&&(i[o]=r)}),Object.defineProperties(t,i)},aL=t=>{aE(t,(e,n)=>{if(un(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(un(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},lL=(t,e)=>{const n={},i=r=>{r.forEach(o=>{n[o]=!0})};return qs(t)?i(t):i(String(t).split(e)),n},uL=()=>{},cL=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Pd="abcdefghijklmnopqrstuvwxyz",l_="0123456789",lE={DIGIT:l_,ALPHA:Pd,ALPHA_DIGIT:Pd+Pd.toUpperCase()+l_},hL=(t=16,e=lE.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function dL(t){return!!(t&&un(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const fL=t=>{const e=new Array(10),n=(i,r)=>{if(bc(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[r]=i;const o=qs(i)?[]:{};return za(i,(l,c)=>{const h=n(l,r+1);!ma(h)&&(o[c]=h)}),e[r]=void 0,o}}return i};return n(t,0)},pL=jn("AsyncFunction"),mL=t=>t&&(bc(t)||un(t))&&un(t.then)&&un(t.catch),N={isArray:qs,isArrayBuffer:nE,isBuffer:$P,isFormData:qP,isArrayBufferView:zP,isString:FP,isNumber:iE,isBoolean:BP,isObject:bc,isPlainObject:fu,isUndefined:ma,isDate:UP,isFile:jP,isBlob:VP,isRegExp:oL,isFunction:un,isStream:WP,isURLSearchParams:ZP,isTypedArray:tL,isFileList:HP,forEach:za,merge:Wf,extend:GP,trim:KP,stripBOM:QP,inherits:YP,toFlatObject:XP,kindOf:Dc,kindOfTest:jn,endsWith:JP,toArray:eL,forEachEntry:nL,matchAll:iL,isHTMLForm:rL,hasOwnProperty:a_,hasOwnProp:a_,reduceDescriptors:aE,freezeMethods:aL,toObjectSet:lL,toCamelCase:sL,noop:uL,toFiniteNumber:cL,findKey:rE,global:sE,isContextDefined:oE,ALPHABET:lE,generateString:hL,isSpecCompliantForm:dL,toJSONObject:fL,isAsyncFn:pL,isThenable:mL};function ge(t,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}N.inherits(ge,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:N.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const uE=ge.prototype,cE={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{cE[t]={value:t}});Object.defineProperties(ge,cE);Object.defineProperty(uE,"isAxiosError",{value:!0});ge.from=(t,e,n,i,r,o)=>{const l=Object.create(uE);return N.toFlatObject(t,l,function(h){return h!==Error.prototype},c=>c!=="isAxiosError"),ge.call(l,t.message,e,n,i,r),l.cause=t,l.name=t.name,o&&Object.assign(l,o),l};const gL=null;function qf(t){return N.isPlainObject(t)||N.isArray(t)}function hE(t){return N.endsWith(t,"[]")?t.slice(0,-2):t}function u_(t,e,n){return t?t.concat(e).map(function(r,o){return r=hE(r),!n&&o?"["+r+"]":r}).join(n?".":""):e}function vL(t){return N.isArray(t)&&!t.some(qf)}const yL=N.toFlatObject(N,{},null,function(e){return/^is[A-Z]/.test(e)});function $c(t,e,n){if(!N.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=N.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,M){return!N.isUndefined(M[k])});const i=n.metaTokens,r=n.visitor||m,o=n.dots,l=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&N.isSpecCompliantForm(e);if(!N.isFunction(r))throw new TypeError("visitor must be a function");function f(C){if(C===null)return"";if(N.isDate(C))return C.toISOString();if(!h&&N.isBlob(C))throw new ge("Blob is not supported. Use a Buffer instead.");return N.isArrayBuffer(C)||N.isTypedArray(C)?h&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function m(C,k,M){let S=C;if(C&&!M&&typeof C=="object"){if(N.endsWith(k,"{}"))k=i?k:k.slice(0,-2),C=JSON.stringify(C);else if(N.isArray(C)&&vL(C)||(N.isFileList(C)||N.endsWith(k,"[]"))&&(S=N.toArray(C)))return k=hE(k),S.forEach(function(w,P){!(N.isUndefined(w)||w===null)&&e.append(l===!0?u_([k],P,o):l===null?k:k+"[]",f(w))}),!1}return qf(C)?!0:(e.append(u_(M,k,o),f(C)),!1)}const v=[],y=Object.assign(yL,{defaultVisitor:m,convertValue:f,isVisitable:qf});function T(C,k){if(!N.isUndefined(C)){if(v.indexOf(C)!==-1)throw Error("Circular reference detected in "+k.join("."));v.push(C),N.forEach(C,function(S,_){(!(N.isUndefined(S)||S===null)&&r.call(e,S,N.isString(_)?_.trim():_,k,y))===!0&&T(S,k?k.concat(_):[_])}),v.pop()}}if(!N.isObject(t))throw new TypeError("data must be an object");return T(t),e}function c_(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function km(t,e){this._pairs=[],t&&$c(t,this,e)}const dE=km.prototype;dE.append=function(e,n){this._pairs.push([e,n])};dE.toString=function(e){const n=e?function(i){return e.call(this,i,c_)}:c_;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function _L(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function fE(t,e,n){if(!e)return t;const i=n&&n.encode||_L,r=n&&n.serialize;let o;if(r?o=r(e,n):o=N.isURLSearchParams(e)?e.toString():new km(e,n).toString(i),o){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class wL{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){N.forEach(this.handlers,function(i){i!==null&&e(i)})}}const h_=wL,pE={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},EL=typeof URLSearchParams<"u"?URLSearchParams:km,TL=typeof FormData<"u"?FormData:null,SL=typeof Blob<"u"?Blob:null,CL=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),kL=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Rn={isBrowser:!0,classes:{URLSearchParams:EL,FormData:TL,Blob:SL},isStandardBrowserEnv:CL,isStandardBrowserWebWorkerEnv:kL,protocols:["http","https","file","blob","url","data"]};function IL(t,e){return $c(t,new Rn.classes.URLSearchParams,Object.assign({visitor:function(n,i,r,o){return Rn.isNode&&N.isBuffer(n)?(this.append(i,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function xL(t){return N.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function PL(t){const e={},n=Object.keys(t);let i;const r=n.length;let o;for(i=0;i<r;i++)o=n[i],e[o]=t[o];return e}function mE(t){function e(n,i,r,o){let l=n[o++];const c=Number.isFinite(+l),h=o>=n.length;return l=!l&&N.isArray(r)?r.length:l,h?(N.hasOwnProp(r,l)?r[l]=[r[l],i]:r[l]=i,!c):((!r[l]||!N.isObject(r[l]))&&(r[l]=[]),e(n,i,r[l],o)&&N.isArray(r[l])&&(r[l]=PL(r[l])),!c)}if(N.isFormData(t)&&N.isFunction(t.entries)){const n={};return N.forEachEntry(t,(i,r)=>{e(xL(i),r,n,0)}),n}return null}const LL={"Content-Type":void 0};function AL(t,e,n){if(N.isString(t))try{return(e||JSON.parse)(t),N.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const zc={transitional:pE,adapter:["xhr","http"],transformRequest:[function(e,n){const i=n.getContentType()||"",r=i.indexOf("application/json")>-1,o=N.isObject(e);if(o&&N.isHTMLForm(e)&&(e=new FormData(e)),N.isFormData(e))return r&&r?JSON.stringify(mE(e)):e;if(N.isArrayBuffer(e)||N.isBuffer(e)||N.isStream(e)||N.isFile(e)||N.isBlob(e))return e;if(N.isArrayBufferView(e))return e.buffer;if(N.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(o){if(i.indexOf("application/x-www-form-urlencoded")>-1)return IL(e,this.formSerializer).toString();if((c=N.isFileList(e))||i.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return $c(c?{"files[]":e}:e,h&&new h,this.formSerializer)}}return o||r?(n.setContentType("application/json",!1),AL(e)):e}],transformResponse:[function(e){const n=this.transitional||zc.transitional,i=n&&n.forcedJSONParsing,r=this.responseType==="json";if(e&&N.isString(e)&&(i&&!this.responseType||r)){const l=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(c){if(l)throw c.name==="SyntaxError"?ge.from(c,ge.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Rn.classes.FormData,Blob:Rn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};N.forEach(["delete","get","head"],function(e){zc.headers[e]={}});N.forEach(["post","put","patch"],function(e){zc.headers[e]=N.merge(LL)});const Im=zc,NL=N.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),RL=t=>{const e={};let n,i,r;return t&&t.split(`
`).forEach(function(l){r=l.indexOf(":"),n=l.substring(0,r).trim().toLowerCase(),i=l.substring(r+1).trim(),!(!n||e[n]&&NL[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},d_=Symbol("internals");function Co(t){return t&&String(t).trim().toLowerCase()}function pu(t){return t===!1||t==null?t:N.isArray(t)?t.map(pu):String(t)}function OL(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const DL=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ld(t,e,n,i,r){if(N.isFunction(i))return i.call(this,e,n);if(r&&(e=n),!!N.isString(e)){if(N.isString(i))return e.indexOf(i)!==-1;if(N.isRegExp(i))return i.test(e)}}function ML(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function bL(t,e){const n=N.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(r,o,l){return this[i].call(this,e,r,o,l)},configurable:!0})})}class Fc{constructor(e){e&&this.set(e)}set(e,n,i){const r=this;function o(c,h,f){const m=Co(h);if(!m)throw new Error("header name must be a non-empty string");const v=N.findKey(r,m);(!v||r[v]===void 0||f===!0||f===void 0&&r[v]!==!1)&&(r[v||h]=pu(c))}const l=(c,h)=>N.forEach(c,(f,m)=>o(f,m,h));return N.isPlainObject(e)||e instanceof this.constructor?l(e,n):N.isString(e)&&(e=e.trim())&&!DL(e)?l(RL(e),n):e!=null&&o(n,e,i),this}get(e,n){if(e=Co(e),e){const i=N.findKey(this,e);if(i){const r=this[i];if(!n)return r;if(n===!0)return OL(r);if(N.isFunction(n))return n.call(this,r,i);if(N.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Co(e),e){const i=N.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||Ld(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let r=!1;function o(l){if(l=Co(l),l){const c=N.findKey(i,l);c&&(!n||Ld(i,i[c],c,n))&&(delete i[c],r=!0)}}return N.isArray(e)?e.forEach(o):o(e),r}clear(e){const n=Object.keys(this);let i=n.length,r=!1;for(;i--;){const o=n[i];(!e||Ld(this,this[o],o,e,!0))&&(delete this[o],r=!0)}return r}normalize(e){const n=this,i={};return N.forEach(this,(r,o)=>{const l=N.findKey(i,o);if(l){n[l]=pu(r),delete n[o];return}const c=e?ML(o):String(o).trim();c!==o&&delete n[o],n[c]=pu(r),i[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return N.forEach(this,(i,r)=>{i!=null&&i!==!1&&(n[r]=e&&N.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[d_]=this[d_]={accessors:{}}).accessors,r=this.prototype;function o(l){const c=Co(l);i[c]||(bL(r,l),i[c]=!0)}return N.isArray(e)?e.forEach(o):o(e),this}}Fc.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);N.freezeMethods(Fc.prototype);N.freezeMethods(Fc);const ni=Fc;function Ad(t,e){const n=this||Im,i=e||n,r=ni.from(i.headers);let o=i.data;return N.forEach(t,function(c){o=c.call(n,o,r.normalize(),e?e.status:void 0)}),r.normalize(),o}function gE(t){return!!(t&&t.__CANCEL__)}function Fa(t,e,n){ge.call(this,t??"canceled",ge.ERR_CANCELED,e,n),this.name="CanceledError"}N.inherits(Fa,ge,{__CANCEL__:!0});function $L(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new ge("Request failed with status code "+n.status,[ge.ERR_BAD_REQUEST,ge.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const zL=Rn.isStandardBrowserEnv?function(){return{write:function(n,i,r,o,l,c){const h=[];h.push(n+"="+encodeURIComponent(i)),N.isNumber(r)&&h.push("expires="+new Date(r).toGMTString()),N.isString(o)&&h.push("path="+o),N.isString(l)&&h.push("domain="+l),c===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(n){const i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function FL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function BL(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function vE(t,e){return t&&!FL(e)?BL(t,e):e}const UL=Rn.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function r(o){let l=o;return e&&(n.setAttribute("href",l),l=n.href),n.setAttribute("href",l),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=r(window.location.href),function(l){const c=N.isString(l)?r(l):l;return c.protocol===i.protocol&&c.host===i.host}}():function(){return function(){return!0}}();function jL(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function VL(t,e){t=t||10;const n=new Array(t),i=new Array(t);let r=0,o=0,l;return e=e!==void 0?e:1e3,function(h){const f=Date.now(),m=i[o];l||(l=f),n[r]=h,i[r]=f;let v=o,y=0;for(;v!==r;)y+=n[v++],v=v%t;if(r=(r+1)%t,r===o&&(o=(o+1)%t),f-l<e)return;const T=m&&f-m;return T?Math.round(y*1e3/T):void 0}}function f_(t,e){let n=0;const i=VL(50,250);return r=>{const o=r.loaded,l=r.lengthComputable?r.total:void 0,c=o-n,h=i(c),f=o<=l;n=o;const m={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:h||void 0,estimated:h&&l&&f?(l-o)/h:void 0,event:r};m[e?"download":"upload"]=!0,t(m)}}const HL=typeof XMLHttpRequest<"u",WL=HL&&function(t){return new Promise(function(n,i){let r=t.data;const o=ni.from(t.headers).normalize(),l=t.responseType;let c;function h(){t.cancelToken&&t.cancelToken.unsubscribe(c),t.signal&&t.signal.removeEventListener("abort",c)}N.isFormData(r)&&(Rn.isStandardBrowserEnv||Rn.isStandardBrowserWebWorkerEnv?o.setContentType(!1):o.setContentType("multipart/form-data;",!1));let f=new XMLHttpRequest;if(t.auth){const T=t.auth.username||"",C=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(T+":"+C))}const m=vE(t.baseURL,t.url);f.open(t.method.toUpperCase(),fE(m,t.params,t.paramsSerializer),!0),f.timeout=t.timeout;function v(){if(!f)return;const T=ni.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),k={data:!l||l==="text"||l==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:T,config:t,request:f};$L(function(S){n(S),h()},function(S){i(S),h()},k),f=null}if("onloadend"in f?f.onloadend=v:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(v)},f.onabort=function(){f&&(i(new ge("Request aborted",ge.ECONNABORTED,t,f)),f=null)},f.onerror=function(){i(new ge("Network Error",ge.ERR_NETWORK,t,f)),f=null},f.ontimeout=function(){let C=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const k=t.transitional||pE;t.timeoutErrorMessage&&(C=t.timeoutErrorMessage),i(new ge(C,k.clarifyTimeoutError?ge.ETIMEDOUT:ge.ECONNABORTED,t,f)),f=null},Rn.isStandardBrowserEnv){const T=(t.withCredentials||UL(m))&&t.xsrfCookieName&&zL.read(t.xsrfCookieName);T&&o.set(t.xsrfHeaderName,T)}r===void 0&&o.setContentType(null),"setRequestHeader"in f&&N.forEach(o.toJSON(),function(C,k){f.setRequestHeader(k,C)}),N.isUndefined(t.withCredentials)||(f.withCredentials=!!t.withCredentials),l&&l!=="json"&&(f.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&f.addEventListener("progress",f_(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",f_(t.onUploadProgress)),(t.cancelToken||t.signal)&&(c=T=>{f&&(i(!T||T.type?new Fa(null,t,f):T),f.abort(),f=null)},t.cancelToken&&t.cancelToken.subscribe(c),t.signal&&(t.signal.aborted?c():t.signal.addEventListener("abort",c)));const y=jL(m);if(y&&Rn.protocols.indexOf(y)===-1){i(new ge("Unsupported protocol "+y+":",ge.ERR_BAD_REQUEST,t));return}f.send(r||null)})},mu={http:gL,xhr:WL};N.forEach(mu,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const qL={getAdapter:t=>{t=N.isArray(t)?t:[t];const{length:e}=t;let n,i;for(let r=0;r<e&&(n=t[r],!(i=N.isString(n)?mu[n.toLowerCase()]:n));r++);if(!i)throw i===!1?new ge(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(N.hasOwnProp(mu,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!N.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:mu};function Nd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Fa(null,t)}function p_(t){return Nd(t),t.headers=ni.from(t.headers),t.data=Ad.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),qL.getAdapter(t.adapter||Im.adapter)(t).then(function(i){return Nd(t),i.data=Ad.call(t,t.transformResponse,i),i.headers=ni.from(i.headers),i},function(i){return gE(i)||(Nd(t),i&&i.response&&(i.response.data=Ad.call(t,t.transformResponse,i.response),i.response.headers=ni.from(i.response.headers))),Promise.reject(i)})}const m_=t=>t instanceof ni?t.toJSON():t;function Rs(t,e){e=e||{};const n={};function i(f,m,v){return N.isPlainObject(f)&&N.isPlainObject(m)?N.merge.call({caseless:v},f,m):N.isPlainObject(m)?N.merge({},m):N.isArray(m)?m.slice():m}function r(f,m,v){if(N.isUndefined(m)){if(!N.isUndefined(f))return i(void 0,f,v)}else return i(f,m,v)}function o(f,m){if(!N.isUndefined(m))return i(void 0,m)}function l(f,m){if(N.isUndefined(m)){if(!N.isUndefined(f))return i(void 0,f)}else return i(void 0,m)}function c(f,m,v){if(v in e)return i(f,m);if(v in t)return i(void 0,f)}const h={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(f,m)=>r(m_(f),m_(m),!0)};return N.forEach(Object.keys(Object.assign({},t,e)),function(m){const v=h[m]||r,y=v(t[m],e[m],m);N.isUndefined(y)&&v!==c||(n[m]=y)}),n}const yE="1.4.0",xm={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{xm[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const g_={};xm.transitional=function(e,n,i){function r(o,l){return"[Axios v"+yE+"] Transitional option '"+o+"'"+l+(i?". "+i:"")}return(o,l,c)=>{if(e===!1)throw new ge(r(l," has been removed"+(n?" in "+n:"")),ge.ERR_DEPRECATED);return n&&!g_[l]&&(g_[l]=!0,console.warn(r(l," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,l,c):!0}};function ZL(t,e,n){if(typeof t!="object")throw new ge("options must be an object",ge.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const o=i[r],l=e[o];if(l){const c=t[o],h=c===void 0||l(c,o,t);if(h!==!0)throw new ge("option "+o+" must be "+h,ge.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ge("Unknown option "+o,ge.ERR_BAD_OPTION)}}const Zf={assertOptions:ZL,validators:xm},wi=Zf.validators;class Gu{constructor(e){this.defaults=e,this.interceptors={request:new h_,response:new h_}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Rs(this.defaults,n);const{transitional:i,paramsSerializer:r,headers:o}=n;i!==void 0&&Zf.assertOptions(i,{silentJSONParsing:wi.transitional(wi.boolean),forcedJSONParsing:wi.transitional(wi.boolean),clarifyTimeoutError:wi.transitional(wi.boolean)},!1),r!=null&&(N.isFunction(r)?n.paramsSerializer={serialize:r}:Zf.assertOptions(r,{encode:wi.function,serialize:wi.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l;l=o&&N.merge(o.common,o[n.method]),l&&N.forEach(["delete","get","head","post","put","patch","common"],C=>{delete o[C]}),n.headers=ni.concat(l,o);const c=[];let h=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(n)===!1||(h=h&&k.synchronous,c.unshift(k.fulfilled,k.rejected))});const f=[];this.interceptors.response.forEach(function(k){f.push(k.fulfilled,k.rejected)});let m,v=0,y;if(!h){const C=[p_.bind(this),void 0];for(C.unshift.apply(C,c),C.push.apply(C,f),y=C.length,m=Promise.resolve(n);v<y;)m=m.then(C[v++],C[v++]);return m}y=c.length;let T=n;for(v=0;v<y;){const C=c[v++],k=c[v++];try{T=C(T)}catch(M){k.call(this,M);break}}try{m=p_.call(this,T)}catch(C){return Promise.reject(C)}for(v=0,y=f.length;v<y;)m=m.then(f[v++],f[v++]);return m}getUri(e){e=Rs(this.defaults,e);const n=vE(e.baseURL,e.url);return fE(n,e.params,e.paramsSerializer)}}N.forEach(["delete","get","head","options"],function(e){Gu.prototype[e]=function(n,i){return this.request(Rs(i||{},{method:e,url:n,data:(i||{}).data}))}});N.forEach(["post","put","patch"],function(e){function n(i){return function(o,l,c){return this.request(Rs(c||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Gu.prototype[e]=n(),Gu.prototype[e+"Form"]=n(!0)});const gu=Gu;class Pm{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const i=this;this.promise.then(r=>{if(!i._listeners)return;let o=i._listeners.length;for(;o-- >0;)i._listeners[o](r);i._listeners=null}),this.promise.then=r=>{let o;const l=new Promise(c=>{i.subscribe(c),o=c}).then(r);return l.cancel=function(){i.unsubscribe(o)},l},e(function(o,l,c){i.reason||(i.reason=new Fa(o,l,c),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Pm(function(r){e=r}),cancel:e}}}const KL=Pm;function GL(t){return function(n){return t.apply(null,n)}}function QL(t){return N.isObject(t)&&t.isAxiosError===!0}const Kf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Kf).forEach(([t,e])=>{Kf[e]=t});const YL=Kf;function _E(t){const e=new gu(t),n=tE(gu.prototype.request,e);return N.extend(n,gu.prototype,e,{allOwnKeys:!0}),N.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return _E(Rs(t,r))},n}const et=_E(Im);et.Axios=gu;et.CanceledError=Fa;et.CancelToken=KL;et.isCancel=gE;et.VERSION=yE;et.toFormData=$c;et.AxiosError=ge;et.Cancel=et.CanceledError;et.all=function(e){return Promise.all(e)};et.spread=GL;et.isAxiosError=QL;et.mergeConfig=Rs;et.AxiosHeaders=ni;et.formToJSON=t=>mE(N.isHTMLForm(t)?new FormData(t):t);et.HttpStatusCode=YL;et.default=et;const v_=et;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},XL=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],l=t[n++],c=t[n++],h=((r&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},EE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],l=r+1<t.length,c=l?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,m=o>>2,v=(o&3)<<4|c>>4;let y=(c&15)<<2|f>>6,T=f&63;h||(T=64,l||(y=64)),i.push(n[m],n[v],n[y],n[T])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):XL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const v=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||c==null||f==null||v==null)throw new JL;const y=o<<2|c>>4;if(i.push(y),f!==64){const T=c<<4&240|f>>2;if(i.push(T),v!==64){const C=f<<6&192|v;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class JL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eA=function(t){const e=wE(t);return EE.encodeByteArray(e,!0)},Qu=function(t){return eA(t).replace(/\./g,"")},TE=function(t){try{return EE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=()=>tA().__FIREBASE_DEFAULTS__,iA=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&TE(t[1]);return e&&JSON.parse(e)},Lm=()=>{try{return nA()||iA()||rA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},SE=t=>{var e,n;return(n=(e=Lm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},sA=t=>{const e=SE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},CE=()=>{var t;return(t=Lm())===null||t===void 0?void 0:t.config},kE=t=>{var e;return(e=Lm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),c="";return[Qu(JSON.stringify(n)),Qu(JSON.stringify(l)),c].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function uA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hA(){const t=xt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function dA(){try{return typeof indexedDB=="object"}catch{return!1}}function fA(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="FirebaseError";class mi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=pA,Object.setPrototypeOf(this,mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ba.prototype.create)}}class Ba{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?mA(o,i):"Error",c=`${this.serviceName}: ${l} (${r}).`;return new mi(r,c,i)}}function mA(t,e){return t.replace(gA,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const gA=/\{\$([^}]+)}/g;function vA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yu(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],l=e[r];if(y_(o)&&y_(l)){if(!Yu(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function y_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function yA(t,e){const n=new _A(t,e);return n.subscribe.bind(n)}class _A{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");wA(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Rd),r.error===void 0&&(r.error=Rd),r.complete===void 0&&(r.complete=Rd);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Rd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(t){return t&&t._delegate?t._delegate:t}class Lr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new oA;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SA(e))try{this.getOrInitializeService({instanceIdentifier:hr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=hr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=hr){return this.instances.has(e)}getOptions(e=hr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&l.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:TA(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=hr){return this.component?this.component.multipleInstances?e:hr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TA(t){return t===hr?void 0:t}function SA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new EA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const kA={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},IA=we.INFO,xA={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},PA=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=xA[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Am{constructor(e){this.name=e,this._logLevel=IA,this._logHandler=PA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}const LA=(t,e)=>e.some(n=>t instanceof n);let __,w_;function AA(){return __||(__=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NA(){return w_||(w_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const IE=new WeakMap,Gf=new WeakMap,xE=new WeakMap,Od=new WeakMap,Nm=new WeakMap;function RA(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(ji(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&IE.set(n,t)}).catch(()=>{}),Nm.set(e,t),e}function OA(t){if(Gf.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Gf.set(t,e)}let Qf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ji(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DA(t){Qf=t(Qf)}function MA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Dd(this),e,...n);return xE.set(i,e.sort?e.sort():[e]),ji(i)}:NA().includes(t)?function(...e){return t.apply(Dd(this),e),ji(IE.get(this))}:function(...e){return ji(t.apply(Dd(this),e))}}function bA(t){return typeof t=="function"?MA(t):(t instanceof IDBTransaction&&OA(t),LA(t,AA())?new Proxy(t,Qf):t)}function ji(t){if(t instanceof IDBRequest)return RA(t);if(Od.has(t))return Od.get(t);const e=bA(t);return e!==t&&(Od.set(t,e),Nm.set(e,t)),e}const Dd=t=>Nm.get(t);function $A(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),c=ji(l);return i&&l.addEventListener("upgradeneeded",h=>{i(ji(l.result),h.oldVersion,h.newVersion,ji(l.transaction),h)}),n&&l.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const zA=["get","getKey","getAll","getAllKeys","count"],FA=["put","add","delete","clear"],Md=new Map;function E_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Md.get(e))return Md.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=FA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||zA.includes(n)))return;const o=async function(l,...c){const h=this.transaction(l,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[n](...c),r&&h.done]))[0]};return Md.set(e,o),o}DA(t=>({...t,get:(e,n,i)=>E_(e,n)||t.get(e,n,i),has:(e,n)=>!!E_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(UA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function UA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yf="@firebase/app",T_="0.9.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar=new Am("@firebase/app"),jA="@firebase/app-compat",VA="@firebase/analytics-compat",HA="@firebase/analytics",WA="@firebase/app-check-compat",qA="@firebase/app-check",ZA="@firebase/auth",KA="@firebase/auth-compat",GA="@firebase/database",QA="@firebase/database-compat",YA="@firebase/functions",XA="@firebase/functions-compat",JA="@firebase/installations",eN="@firebase/installations-compat",tN="@firebase/messaging",nN="@firebase/messaging-compat",iN="@firebase/performance",rN="@firebase/performance-compat",sN="@firebase/remote-config",oN="@firebase/remote-config-compat",aN="@firebase/storage",lN="@firebase/storage-compat",uN="@firebase/firestore",cN="@firebase/firestore-compat",hN="firebase",dN="9.22.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="[DEFAULT]",fN={[Yf]:"fire-core",[jA]:"fire-core-compat",[HA]:"fire-analytics",[VA]:"fire-analytics-compat",[qA]:"fire-app-check",[WA]:"fire-app-check-compat",[ZA]:"fire-auth",[KA]:"fire-auth-compat",[GA]:"fire-rtdb",[QA]:"fire-rtdb-compat",[YA]:"fire-fn",[XA]:"fire-fn-compat",[JA]:"fire-iid",[eN]:"fire-iid-compat",[tN]:"fire-fcm",[nN]:"fire-fcm-compat",[iN]:"fire-perf",[rN]:"fire-perf-compat",[sN]:"fire-rc",[oN]:"fire-rc-compat",[aN]:"fire-gcs",[lN]:"fire-gcs-compat",[uN]:"fire-fst",[cN]:"fire-fst-compat","fire-js":"fire-js",[hN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=new Map,Jf=new Map;function pN(t,e){try{t.container.addComponent(e)}catch(n){Ar.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Os(t){const e=t.name;if(Jf.has(e))return Ar.debug(`There were multiple attempts to register component ${e}.`),!1;Jf.set(e,t);for(const n of Xu.values())pN(n,t);return!0}function Rm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Vi=new Ba("app","Firebase",mN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Lr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=dN;function PE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Xf,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Vi.create("bad-app-name",{appName:String(r)});if(n||(n=CE()),!n)throw Vi.create("no-options");const o=Xu.get(r);if(o){if(Yu(n,o.options)&&Yu(i,o.config))return o;throw Vi.create("duplicate-app",{appName:r})}const l=new CA(r);for(const h of Jf.values())l.addComponent(h);const c=new gN(n,i,l);return Xu.set(r,c),c}function LE(t=Xf){const e=Xu.get(t);if(!e&&t===Xf&&CE())return PE();if(!e)throw Vi.create("no-app",{appName:t});return e}function Hi(t,e,n){var i;let r=(i=fN[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${r}" with version "${e}":`];o&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ar.warn(c.join(" "));return}Os(new Lr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN="firebase-heartbeat-database",yN=1,ga="firebase-heartbeat-store";let bd=null;function AE(){return bd||(bd=$A(vN,yN,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ga)}}}).catch(t=>{throw Vi.create("idb-open",{originalErrorMessage:t.message})})),bd}async function _N(t){try{return await(await AE()).transaction(ga).objectStore(ga).get(NE(t))}catch(e){if(e instanceof mi)Ar.warn(e.message);else{const n=Vi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ar.warn(n.message)}}}async function S_(t,e){try{const i=(await AE()).transaction(ga,"readwrite");await i.objectStore(ga).put(e,NE(t)),await i.done}catch(n){if(n instanceof mi)Ar.warn(n.message);else{const i=Vi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ar.warn(i.message)}}}function NE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=1024,EN=30*24*60*60*1e3;class TN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new CN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=C_();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const o=new Date(r.date).valueOf();return Date.now()-o<=EN}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=C_(),{heartbeatsToSend:n,unsentEntries:i}=SN(this._heartbeatsCache.heartbeats),r=Qu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function C_(){return new Date().toISOString().substring(0,10)}function SN(t,e=wN){const n=[];let i=t.slice();for(const r of t){const o=n.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),k_(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),k_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class CN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dA()?fA().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await _N(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return S_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return S_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function k_(t){return Qu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(t){Os(new Lr("platform-logger",e=>new BA(e),"PRIVATE")),Os(new Lr("heartbeat",e=>new TN(e),"PRIVATE")),Hi(Yf,T_,t),Hi(Yf,T_,"esm2017"),Hi("fire-js","")}kN("");var IN="firebase",xN="9.22.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hi(IN,xN,"app");function Om(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function RE(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PN=RE,OE=new Ba("auth","Firebase",RE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=new Am("@firebase/auth");function LN(t,...e){Ju.logLevel<=we.WARN&&Ju.warn(`Auth (${Zs}): ${t}`,...e)}function vu(t,...e){Ju.logLevel<=we.ERROR&&Ju.error(`Auth (${Zs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(t,...e){throw Dm(t,...e)}function $n(t,...e){return Dm(t,...e)}function AN(t,e,n){const i=Object.assign(Object.assign({},PN()),{[e]:n});return new Ba("auth","Firebase",i).create(e,{appName:t.name})}function Dm(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return OE.create(t,...e)}function ne(t,e,...n){if(!t)throw Dm(e,...n)}function Xn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vu(e),new Error(e)}function ui(t,e){t||Xn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function NN(){return I_()==="http:"||I_()==="https:"}function I_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NN()||uA()||"connection"in navigator)?navigator.onLine:!0}function ON(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n){this.shortDelay=e,this.longDelay=n,ui(n>e,"Short delay should be less than long delay!"),this.isMobile=lA()||cA()}get(){return RN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(t,e){ui(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=new ja(3e4,6e4);function ME(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Va(t,e,n,i,r={}){return bE(t,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const c=Ua(Object.assign({key:t.config.apiKey},l)).slice(1),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),DE.fetch()($E(t,t.config.apiHost,n,c),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},o))})}async function bE(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},DN),e);try{const r=new $N(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Wl(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,f]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wl(t,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Wl(t,"email-already-in-use",l);if(h==="USER_DISABLED")throw Wl(t,"user-disabled",l);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw AN(t,m,f);li(t,m)}}catch(r){if(r instanceof mi)throw r;li(t,"network-request-failed",{message:String(r)})}}async function bN(t,e,n,i,r={}){const o=await Va(t,e,n,i,r);return"mfaPendingCredential"in o&&li(t,"multi-factor-auth-required",{_serverResponse:o}),o}function $E(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Mm(t.config,r):`${t.config.apiScheme}://${r}`}class $N{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i($n(this.auth,"network-request-failed")),MN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wl(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=$n(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(t,e){return Va(t,"POST","/v1/accounts:delete",e)}async function FN(t,e){return Va(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BN(t,e=!1){const n=Dt(t),i=await n.getIdToken(e),r=bm(i);ne(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:qo($d(r.auth_time)),issuedAtTime:qo($d(r.iat)),expirationTime:qo($d(r.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function $d(t){return Number(t)*1e3}function bm(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return vu("JWT malformed, contained fewer than 3 sections"),null;try{const r=TE(n);return r?JSON.parse(r):(vu("Failed to decode base64 JWT payload"),null)}catch(r){return vu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function UN(t){const e=bm(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function va(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof mi&&jN(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function jN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qo(this.lastLoginAt),this.creationTime=qo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ec(t){var e;const n=t.auth,i=await t.getIdToken(),r=await va(t,FN(n,{idToken:i}));ne(r==null?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?qN(o.providerUserInfo):[],c=WN(t.providerData,l),h=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),m=h?f:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new zE(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(t,v)}async function HN(t){const e=Dt(t);await ec(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WN(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function qN(t){return t.map(e=>{var{providerId:n}=e,i=Om(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(t,e){const n=await bE(t,{},async()=>{const i=Ua({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,l=$E(t,r,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",DE.fetch()(l,{method:"POST",headers:c,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):UN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ne(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await ZN(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,l=new ya;return i&&(ne(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(ne(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(ne(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ya,this.toJSON())}_performRefresh(){return Xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Tr{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,o=Om(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new VN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new zE(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await va(this,this.stsTokenManager.getToken(this.auth,e));return ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return BN(this,e)}reload(){return HN(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Tr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await ec(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await va(this,zN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,o,l,c,h,f,m;const v=(i=n.displayName)!==null&&i!==void 0?i:void 0,y=(r=n.email)!==null&&r!==void 0?r:void 0,T=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,C=(l=n.photoURL)!==null&&l!==void 0?l:void 0,k=(c=n.tenantId)!==null&&c!==void 0?c:void 0,M=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,S=(f=n.createdAt)!==null&&f!==void 0?f:void 0,_=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:w,emailVerified:P,isAnonymous:b,providerData:B,stsTokenManager:U}=n;ne(w&&U,e,"internal-error");const H=ya.fromJSON(this.name,U);ne(typeof w=="string",e,"internal-error"),Ei(v,e.name),Ei(y,e.name),ne(typeof P=="boolean",e,"internal-error"),ne(typeof b=="boolean",e,"internal-error"),Ei(T,e.name),Ei(C,e.name),Ei(k,e.name),Ei(M,e.name),Ei(S,e.name),Ei(_,e.name);const ce=new Tr({uid:w,auth:e,email:y,emailVerified:P,displayName:v,isAnonymous:b,photoURL:C,phoneNumber:T,tenantId:k,stsTokenManager:H,createdAt:S,lastLoginAt:_});return B&&Array.isArray(B)&&(ce.providerData=B.map(ae=>Object.assign({},ae))),M&&(ce._redirectEventId=M),ce}static async _fromIdTokenResponse(e,n,i=!1){const r=new ya;r.updateFromServerResponse(n);const o=new Tr({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await ec(o),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=new Map;function Jn(t){ui(t instanceof Function,"Expected a class definition");let e=x_.get(t);return e?(ui(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,x_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}FE.type="NONE";const P_=FE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(t,e,n){return`firebase:${t}:${e}:${n}`}class _s{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=yu(this.userKey,r.apiKey,o),this.fullPersistenceKey=yu("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Tr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new _s(Jn(P_),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||Jn(P_);const l=yu(i,e.config.apiKey,e.name);let c=null;for(const f of n)try{const m=await f._get(l);if(m){const v=Tr._fromJSON(e,m);f!==o&&(c=v),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new _s(o,e,i):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new _s(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HE(e))return"Blackberry";if(WE(e))return"Webos";if($m(e))return"Safari";if((e.includes("chrome/")||UE(e))&&!e.includes("edge/"))return"Chrome";if(VE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function BE(t=xt()){return/firefox\//i.test(t)}function $m(t=xt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function UE(t=xt()){return/crios\//i.test(t)}function jE(t=xt()){return/iemobile/i.test(t)}function VE(t=xt()){return/android/i.test(t)}function HE(t=xt()){return/blackberry/i.test(t)}function WE(t=xt()){return/webos/i.test(t)}function Bc(t=xt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function KN(t=xt()){var e;return Bc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function GN(){return hA()&&document.documentMode===10}function qE(t=xt()){return Bc(t)||VE(t)||WE(t)||HE(t)||/windows phone/i.test(t)||jE(t)}function QN(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(t,e=[]){let n;switch(t){case"Browser":n=L_(xt());break;case"Worker":n=`${L_(xt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Zs}/${i}`}async function KE(t,e){return Va(t,"GET","/v2/recaptchaConfig",ME(t,e))}function A_(t){return t!==void 0&&t.enterprise!==void 0}class GE{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function QE(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=$n("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",YN().appendChild(i)})}function XN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const JN="https://www.google.com/recaptcha/enterprise.js?render=",eR="recaptcha-enterprise",tR="NO_RECAPTCHA";class nR{constructor(e){this.type=eR,this.auth=Uc(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{KE(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new GE(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(h=>{c(h)})})}function r(o,l,c){const h=window.grecaptcha;A_(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(tR)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{i(this.auth).then(c=>{if(!n&&A_(window.grecaptcha))r(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}QE(JN+c).then(()=>{r(c,o,l)}).catch(h=>{l(h)})}}).catch(c=>{l(c)})})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new N_(this),this.idTokenSubscription=new N_(this),this.beforeStateQueue=new iR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Jn(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await _s.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let r=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&(h!=null&&h.user)&&(r=h.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ec(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ON()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Dt(e):null;return n&&ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Jn(e))})}async initializeRecaptchaConfig(){const e=await KE(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new GE(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new nR(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ba("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Jn(e)||this._popupRedirectResolver;ne(n,this,"argument-error"),this.redirectPersistenceManager=await _s.create(this,[Jn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n),l=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(l,this,"internal-error"),l.then(()=>o(this.currentUser)),typeof n=="function"?e.addObserver(n,i,r):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&LN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Uc(t){return Dt(t)}class N_{constructor(e){this.auth=e,this.observer=null,this.addObserver=yA(n=>this.observer=n)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(t,e){const n=Rm(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Yu(o,e??{}))return r;li(r,"already-initialized")}return n.initialize({options:e})}function oR(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Jn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function aR(t,e,n){const i=Uc(t);ne(i._canInitEmulator,i,"emulator-config-failed"),ne(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),o=YE(e),{host:l,port:c}=lR(e),h=c===null?"":`:${c}`;i.config.emulator={url:`${o}//${l}${h}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||uR()}function YE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lR(t){const e=YE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:R_(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:R_(l)}}}function R_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function uR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xn("not implemented")}_getIdTokenResponse(e){return Xn("not implemented")}_linkToIdToken(e,n){return Xn("not implemented")}_getReauthenticationResolver(e){return Xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ws(t,e){return bN(t,"POST","/v1/accounts:signInWithIdp",ME(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="http://localhost";class Nr extends XE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Nr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):li("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,o=Om(n,["providerId","signInMethod"]);if(!i||!r)return null;const l=new Nr(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return ws(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,ws(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ws(e,n)}buildRequest(){const e={requestUri:cR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ua(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha extends JE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends Ha{constructor(){super("facebook.com")}static credential(e){return Nr._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ii.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends Ha{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Nr._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return xi.credential(n,i)}catch{return null}}}xi.GOOGLE_SIGN_IN_METHOD="google.com";xi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends Ha{constructor(){super("github.com")}static credential(e){return Nr._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pi.credential(e.oauthAccessToken)}catch{return null}}}Pi.GITHUB_SIGN_IN_METHOD="github.com";Pi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Ha{constructor(){super("twitter.com")}static credential(e,n){return Nr._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Li.credential(n,i)}catch{return null}}}Li.TWITTER_SIGN_IN_METHOD="twitter.com";Li.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await Tr._fromIdTokenResponse(e,i,r),l=O_(i);return new Ds({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=O_(i);return new Ds({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function O_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends mi{constructor(e,n,i,r){var o;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,tc.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new tc(e,n,i,r)}}function eT(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?tc._fromErrorAndOperation(t,o,e,i):o})}async function hR(t,e,n=!1){const i=await va(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ds._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dR(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const o=await va(t,eT(i,r,e,t),n);ne(o.idToken,i,"internal-error");const l=bm(o.idToken);ne(l,i,"internal-error");const{sub:c}=l;return ne(t.uid===c,i,"user-mismatch"),Ds._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&li(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(t,e,n=!1){const i="signIn",r=await eT(t,i,e),o=await Ds._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}function pR(t,e,n,i){return Dt(t).onIdTokenChanged(e,n,i)}function mR(t,e,n){return Dt(t).beforeAuthStateChanged(e,n)}const nc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(nc,"1"),this.storage.removeItem(nc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(){const t=xt();return $m(t)||Bc(t)}const vR=1e3,yR=10;class nT extends tT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=gR()&&QN(),this.fallbackToPolling=qE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const l=this.storage.getItem(i);if(e.newValue!==l)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);GN()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,yR):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},vR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nT.type="LOCAL";const _R=nT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT extends tT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}iT.type="SESSION";const rT=iT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new jc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const c=Array.from(l).map(async f=>f(n.origin,o)),h=await wR(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const f=zm("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(v){const y=v;if(y.data.eventId===f)switch(y.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(y.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(){return window}function TR(t){zn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(){return typeof zn().WorkerGlobalScope<"u"&&typeof zn().importScripts=="function"}async function SR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kR(){return sT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="firebaseLocalStorageDb",IR=1,ic="firebaseLocalStorage",aT="fbase_key";class Wa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vc(t,e){return t.transaction([ic],e?"readwrite":"readonly").objectStore(ic)}function xR(){const t=indexedDB.deleteDatabase(oT);return new Wa(t).toPromise()}function tp(){const t=indexedDB.open(oT,IR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(ic,{keyPath:aT})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(ic)?e(i):(i.close(),await xR(),e(await tp()))})})}async function D_(t,e,n){const i=Vc(t,!0).put({[aT]:e,value:n});return new Wa(i).toPromise()}async function PR(t,e){const n=Vc(t,!1).get(e),i=await new Wa(n).toPromise();return i===void 0?null:i.value}function M_(t,e){const n=Vc(t,!0).delete(e);return new Wa(n).toPromise()}const LR=800,AR=3;class lT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>AR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jc._getInstance(kR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await SR(),!this.activeServiceWorker)return;this.sender=new ER(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tp();return await D_(e,nc,"1"),await M_(e,nc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>D_(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>PR(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>M_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Vc(r,!1).getAll();return new Wa(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}lT.type="LOCAL";const NR=lT;new ja(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(t,e){return e?Jn(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm extends XE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ws(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ws(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ws(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function OR(t){return fR(t.auth,new Fm(t),t.bypassAuthState)}function DR(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),dR(n,new Fm(t),t.bypassAuthState)}async function MR(t){const{auth:e,user:n}=t;return ne(n,e,"internal-error"),hR(n,new Fm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OR;case"linkViaPopup":case"linkViaRedirect":return MR;case"reauthViaPopup":case"reauthViaRedirect":return DR;default:li(this.auth,"internal-error")}}resolve(e){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=new ja(2e3,1e4);class hs extends uT{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,hs.currentPopupAction&&hs.currentPopupAction.cancel(),hs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){ui(this.filter.length===1,"Popup operations only handle one event");const e=zm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bR.get())};e()}}hs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="pendingRedirect",_u=new Map;class zR extends uT{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=_u.get(this.auth._key());if(!e){try{const i=await FR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}_u.set(this.auth._key(),e)}return this.bypassAuthState||_u.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FR(t,e){const n=jR(e),i=UR(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function BR(t,e){_u.set(t._key(),e)}function UR(t){return Jn(t._redirectPersistence)}function jR(t){return yu($R,t.config.apiKey,t.name)}async function VR(t,e,n=!1){const i=Uc(t),r=RR(i,e),l=await new zR(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=10*60*1e3;class WR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!cT(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError($n(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HR&&this.cachedEventUids.clear(),this.cachedEventUids.has(b_(e))}saveEventToCache(e){this.cachedEventUids.add(b_(e)),this.lastProcessedEventTime=Date.now()}}function b_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function cT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(t,e={}){return Va(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GR=/^https?/;async function QR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ZR(t);for(const n of e)try{if(YR(n))return}catch{}li(t,"unauthorized-domain")}function YR(t){const e=ep(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!GR.test(n))return!1;if(KR.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=new ja(3e4,6e4);function $_(){const t=zn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function JR(t){return new Promise((e,n)=>{var i,r,o;function l(){$_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$_(),n($n(t,"network-request-failed"))},timeout:XR.get()})}if(!((r=(i=zn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((o=zn().gapi)===null||o===void 0)&&o.load)l();else{const c=XN("iframefcb");return zn()[c]=()=>{gapi.load?l():n($n(t,"network-request-failed"))},QE(`https://apis.google.com/js/api.js?onload=${c}`).catch(h=>n(h))}}).catch(e=>{throw wu=null,e})}let wu=null;function e2(t){return wu=wu||JR(t),wu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=new ja(5e3,15e3),n2="__/auth/iframe",i2="emulator/auth/iframe",r2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},s2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function o2(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Mm(e,i2):`https://${t.config.authDomain}/${n2}`,i={apiKey:e.apiKey,appName:t.name,v:Zs},r=s2.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Ua(i).slice(1)}`}async function a2(t){const e=await e2(t),n=zn().gapi;return ne(n,t,"internal-error"),e.open({where:document.body,url:o2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:r2,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=$n(t,"network-request-failed"),c=zn().setTimeout(()=>{o(l)},t2.get());function h(){zn().clearTimeout(c),r(i)}i.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},u2=500,c2=600,h2="_blank",d2="http://localhost";class z_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function f2(t,e,n,i=u2,r=c2){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const h=Object.assign(Object.assign({},l2),{width:i.toString(),height:r.toString(),top:o,left:l}),f=xt().toLowerCase();n&&(c=UE(f)?h2:n),BE(f)&&(e=e||d2,h.scrollbars="yes");const m=Object.entries(h).reduce((y,[T,C])=>`${y}${T}=${C},`,"");if(KN(f)&&c!=="_self")return p2(e||"",c),new z_(null);const v=window.open(e||"",c,m);ne(v,t,"popup-blocked");try{v.focus()}catch{}return new z_(v)}function p2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2="__/auth/handler",g2="emulator/auth/handler",v2=encodeURIComponent("fac");async function F_(t,e,n,i,r,o){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Zs,eventId:r};if(e instanceof JE){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",vA(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,v]of Object.entries(o||{}))l[m]=v}if(e instanceof Ha){const m=e.getScopes().filter(v=>v!=="");m.length>0&&(l.scopes=m.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const h=await t._getAppCheckToken(),f=h?`#${v2}=${encodeURIComponent(h)}`:"";return`${y2(t)}?${Ua(c).slice(1)}${f}`}function y2({config:t}){return t.emulator?Mm(t,g2):`https://${t.authDomain}/${m2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="webStorageSupport";class _2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rT,this._completeRedirectFn=VR,this._overrideRedirectResult=BR}async _openPopup(e,n,i,r){var o;ui((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await F_(e,n,i,ep(),r);return f2(e,l,zm())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await F_(e,n,i,ep(),r);return TR(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(ui(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await a2(e),i=new WR(e);return n.register("authEvent",r=>(ne(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zd,{type:zd},r=>{var o;const l=(o=r==null?void 0:r[0])===null||o===void 0?void 0:o[zd];l!==void 0&&n(!!l),li(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=QR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return qE()||$m()||Bc()}}const w2=_2;var B_="@firebase/auth",U_="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function S2(t){Os(new Lr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;ne(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZE(t)},f=new rR(i,r,o,h);return oR(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Os(new Lr("auth-internal",e=>{const n=Uc(e.getProvider("auth").getImmediate());return(i=>new E2(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hi(B_,U_,T2(t)),Hi(B_,U_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=5*60,k2=kE("authIdTokenMaxAge")||C2;let j_=null;const I2=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>k2)return;const r=n==null?void 0:n.token;j_!==r&&(j_=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function x2(t=LE()){const e=Rm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=sR(t,{popupRedirectResolver:w2,persistence:[NR,_R,rT]}),i=kE("authTokenSyncURL");if(i){const o=I2(i);mR(n,o,()=>o(n.currentUser)),pR(n,l=>o(l))}const r=SE("auth");return r&&aR(n,`http://${r}`),n}S2("Browser");const P2={apiKey:"AIzaSyD6qtBhLAnOopFhoBkERnZ3R7TN_I2hj1g",authDomain:"basketball-court-finder-6dc25.firebaseapp.com",projectId:"basketball-court-finder-6dc25",storageBucket:"basketball-court-finder-6dc25.appspot.com",messagingSenderId:"1062044207640",appId:"1:1062044207640:web:368d26c0174397a393916d"},Ri=PE(P2);x2(Ri);function L2(t){const[e,n]=se.useState(0),[i,r]=se.useState("");function o(f){n(f)}function l(){n(0)}function c(f){if(r(""),t.username==""){r("You must log in to leave a rating");return}if(t.reviewData.filter(function(v){return v.hasOwnProperty(t.placeId)}).length>0){t.handleReRating(f);return}t.handleRating(f)}const h=[];for(let f=0;f<5;f++){const m=f+1<=(e||t.rating)?"star filled":"star";h.push(A.jsx("span",{className:m,onMouseEnter:()=>o(f+1),onMouseLeave:l,onClick:()=>c(f+1)},f+1))}return A.jsxs("div",{children:[A.jsx("div",{className:"stars",children:h}),i!==""?A.jsx("p",{className:"rating-error",children:`*${i}`}):""]})}var A2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},j,Bm=Bm||{},J=A2||self;function Hc(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function qa(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function N2(t){return Object.prototype.hasOwnProperty.call(t,Fd)&&t[Fd]||(t[Fd]=++R2)}var Fd="closure_uid_"+(1e9*Math.random()>>>0),R2=0;function O2(t,e,n){return t.call.apply(t.bind,arguments)}function D2(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function St(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?St=O2:St=D2,St.apply(null,arguments)}function ql(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function at(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,o){for(var l=Array(arguments.length-2),c=2;c<arguments.length;c++)l[c-2]=arguments[c];return e.prototype[r].apply(i,l)}}function er(){this.s=this.s,this.o=this.o}var M2=0;er.prototype.s=!1;er.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),M2!=0)&&N2(this)};er.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const hT=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Um(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function V_(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(Hc(i)){const r=t.length||0,o=i.length||0;t.length=r+o;for(let l=0;l<o;l++)t[r+l]=i[l]}else t.push(i)}}function Ct(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ct.prototype.h=function(){this.defaultPrevented=!0};var b2=function(){if(!J.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{J.addEventListener("test",()=>{},e),J.removeEventListener("test",()=>{},e)}catch{}return t}();function _a(t){return/^[\s\xa0]*$/.test(t)}function Wc(){var t=J.navigator;return t&&(t=t.userAgent)?t:""}function Nn(t){return Wc().indexOf(t)!=-1}function jm(t){return jm[" "](t),t}jm[" "]=function(){};function $2(t,e){var n=LO;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var z2=Nn("Opera"),Ms=Nn("Trident")||Nn("MSIE"),dT=Nn("Edge"),np=dT||Ms,fT=Nn("Gecko")&&!(Wc().toLowerCase().indexOf("webkit")!=-1&&!Nn("Edge"))&&!(Nn("Trident")||Nn("MSIE"))&&!Nn("Edge"),F2=Wc().toLowerCase().indexOf("webkit")!=-1&&!Nn("Edge");function pT(){var t=J.document;return t?t.documentMode:void 0}var ip;e:{var Bd="",Ud=function(){var t=Wc();if(fT)return/rv:([^\);]+)(\)|;)/.exec(t);if(dT)return/Edge\/([\d\.]+)/.exec(t);if(Ms)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(F2)return/WebKit\/(\S+)/.exec(t);if(z2)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Ud&&(Bd=Ud?Ud[1]:""),Ms){var jd=pT();if(jd!=null&&jd>parseFloat(Bd)){ip=String(jd);break e}}ip=Bd}var rp;if(J.document&&Ms){var H_=pT();rp=H_||parseInt(ip,10)||void 0}else rp=void 0;var B2=rp;function wa(t,e){if(Ct.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(fT){e:{try{jm(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:U2[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&wa.$.h.call(this)}}at(wa,Ct);var U2={2:"touch",3:"pen",4:"mouse"};wa.prototype.h=function(){wa.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Za="closure_listenable_"+(1e6*Math.random()|0),j2=0;function V2(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++j2,this.fa=this.ia=!1}function qc(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Vm(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function H2(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function mT(t){const e={};for(const n in t)e[n]=t[n];return e}const W_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gT(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let o=0;o<W_.length;o++)n=W_[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Zc(t){this.src=t,this.g={},this.h=0}Zc.prototype.add=function(t,e,n,i,r){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var l=op(t,e,i,r);return-1<l?(e=t[l],n||(e.ia=!1)):(e=new V2(e,this.src,o,!!i,r),e.ia=n,t.push(e)),e};function sp(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=hT(i,e),o;(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(qc(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function op(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==i)return r}return-1}var Hm="closure_lm_"+(1e6*Math.random()|0),Vd={};function vT(t,e,n,i,r){if(i&&i.once)return _T(t,e,n,i,r);if(Array.isArray(e)){for(var o=0;o<e.length;o++)vT(t,e[o],n,i,r);return null}return n=Zm(n),t&&t[Za]?t.O(e,n,qa(i)?!!i.capture:!!i,r):yT(t,e,n,!1,i,r)}function yT(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var l=qa(r)?!!r.capture:!!r,c=qm(t);if(c||(t[Hm]=c=new Zc(t)),n=c.add(e,n,i,l,o),n.proxy)return n;if(i=W2(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)b2||(r=l),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(ET(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function W2(){function t(n){return e.call(t.src,t.listener,n)}const e=q2;return t}function _T(t,e,n,i,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++)_T(t,e[o],n,i,r);return null}return n=Zm(n),t&&t[Za]?t.P(e,n,qa(i)?!!i.capture:!!i,r):yT(t,e,n,!0,i,r)}function wT(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)wT(t,e[o],n,i,r);else i=qa(i)?!!i.capture:!!i,n=Zm(n),t&&t[Za]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=op(o,n,i,r),-1<n&&(qc(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=qm(t))&&(e=t.g[e.toString()],t=-1,e&&(t=op(e,n,i,r)),(n=-1<t?e[t]:null)&&Wm(n))}function Wm(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Za])sp(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(ET(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=qm(e))?(sp(n,t),n.h==0&&(n.src=null,e[Hm]=null)):qc(t)}}}function ET(t){return t in Vd?Vd[t]:Vd[t]="on"+t}function q2(t,e){if(t.fa)t=!0;else{e=new wa(e,this);var n=t.listener,i=t.la||t.src;t.ia&&Wm(t),t=n.call(i,e)}return t}function qm(t){return t=t[Hm],t instanceof Zc?t:null}var Hd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zm(t){return typeof t=="function"?t:(t[Hd]||(t[Hd]=function(e){return t.handleEvent(e)}),t[Hd])}function ot(){er.call(this),this.i=new Zc(this),this.S=this,this.J=null}at(ot,er);ot.prototype[Za]=!0;ot.prototype.removeEventListener=function(t,e,n,i){wT(this,t,e,n,i)};function pt(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new Ct(e,t);else if(e instanceof Ct)e.target=e.target||t;else{var r=e;e=new Ct(i,t),gT(e,r)}if(r=!0,n)for(var o=n.length-1;0<=o;o--){var l=e.g=n[o];r=Zl(l,i,!0,e)&&r}if(l=e.g=t,r=Zl(l,i,!0,e)&&r,r=Zl(l,i,!1,e)&&r,n)for(o=0;o<n.length;o++)l=e.g=n[o],r=Zl(l,i,!1,e)&&r}ot.prototype.N=function(){if(ot.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)qc(n[i]);delete t.g[e],t.h--}}this.J=null};ot.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};ot.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function Zl(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var l=e[o];if(l&&!l.fa&&l.capture==n){var c=l.listener,h=l.la||l.src;l.ia&&sp(t.i,l),r=c.call(h,i)!==!1&&r}}return r&&!i.defaultPrevented}var Km=J.JSON.stringify;class Z2{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function K2(){var t=Gm;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class G2{constructor(){this.h=this.g=null}add(e,n){const i=TT.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var TT=new Z2(()=>new Q2,t=>t.reset());class Q2{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Y2(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function X2(t){J.setTimeout(()=>{throw t},0)}let Ea,Ta=!1,Gm=new G2,ST=()=>{const t=J.Promise.resolve(void 0);Ea=()=>{t.then(J2)}};var J2=()=>{for(var t;t=K2();){try{t.h.call(t.g)}catch(n){X2(n)}var e=TT;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ta=!1};function Kc(t,e){ot.call(this),this.h=t||1,this.g=e||J,this.j=St(this.qb,this),this.l=Date.now()}at(Kc,ot);j=Kc.prototype;j.ga=!1;j.T=null;j.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),pt(this,"tick"),this.ga&&(Qm(this),this.start()))}};j.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Qm(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}j.N=function(){Kc.$.N.call(this),Qm(this),delete this.g};function Ym(t,e,n){if(typeof t=="function")n&&(t=St(t,n));else if(t&&typeof t.handleEvent=="function")t=St(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:J.setTimeout(t,e||0)}function CT(t){t.g=Ym(()=>{t.g=null,t.i&&(t.i=!1,CT(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class eO extends er{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:CT(this)}N(){super.N(),this.g&&(J.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sa(t){er.call(this),this.h=t,this.g={}}at(Sa,er);var q_=[];function kT(t,e,n,i){Array.isArray(n)||(n&&(q_[0]=n.toString()),n=q_);for(var r=0;r<n.length;r++){var o=vT(e,n[r],i||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function IT(t){Vm(t.g,function(e,n){this.g.hasOwnProperty(n)&&Wm(e)},t),t.g={}}Sa.prototype.N=function(){Sa.$.N.call(this),IT(this)};Sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Gc(){this.g=!0}Gc.prototype.Ea=function(){this.g=!1};function tO(t,e,n,i,r,o){t.info(function(){if(t.g)if(o)for(var l="",c=o.split("&"),h=0;h<c.length;h++){var f=c[h].split("=");if(1<f.length){var m=f[0];f=f[1];var v=m.split("_");l=2<=v.length&&v[1]=="type"?l+(m+"="+f+"&"):l+(m+"=redacted&")}}else l=null;else l=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+l})}function nO(t,e,n,i,r,o,l){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+o+" "+l})}function ds(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+rO(t,n)+(i?" "+i:"")})}function iO(t,e){t.info(function(){return"TIMEOUT: "+e})}Gc.prototype.info=function(){};function rO(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if(o!="noop"&&o!="stop"&&o!="close")for(var l=1;l<r.length;l++)r[l]=""}}}}return Km(n)}catch{return e}}var $r={},Z_=null;function Qc(){return Z_=Z_||new ot}$r.Ta="serverreachability";function xT(t){Ct.call(this,$r.Ta,t)}at(xT,Ct);function Ca(t){const e=Qc();pt(e,new xT(e))}$r.STAT_EVENT="statevent";function PT(t,e){Ct.call(this,$r.STAT_EVENT,t),this.stat=e}at(PT,Ct);function Nt(t){const e=Qc();pt(e,new PT(e,t))}$r.Ua="timingevent";function LT(t,e){Ct.call(this,$r.Ua,t),this.size=e}at(LT,Ct);function Ka(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return J.setTimeout(function(){t()},e)}var Yc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},AT={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Xm(){}Xm.prototype.h=null;function K_(t){return t.h||(t.h=t.i())}function NT(){}var Ga={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Jm(){Ct.call(this,"d")}at(Jm,Ct);function eg(){Ct.call(this,"c")}at(eg,Ct);var ap;function Xc(){}at(Xc,Xm);Xc.prototype.g=function(){return new XMLHttpRequest};Xc.prototype.i=function(){return{}};ap=new Xc;function Qa(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new Sa(this),this.P=sO,t=np?125:void 0,this.V=new Kc(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new RT}function RT(){this.i=null,this.g="",this.h=!1}var sO=45e3,lp={},rc={};j=Qa.prototype;j.setTimeout=function(t){this.P=t};function up(t,e,n){t.L=1,t.v=eh(ci(e)),t.s=n,t.S=!0,OT(t,null)}function OT(t,e){t.G=Date.now(),Ya(t),t.A=ci(t.v);var n=t.A,i=t.W;Array.isArray(i)||(i=[String(i)]),UT(n.i,"t",i),t.C=0,n=t.l.J,t.h=new RT,t.g=lS(t.l,n?e:null,!t.s),0<t.O&&(t.M=new eO(St(t.Pa,t,t.g),t.O)),kT(t.U,t.g,"readystatechange",t.nb),e=t.I?mT(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Ca(),tO(t.j,t.u,t.A,t.m,t.W,t.s)}j.nb=function(t){t=t.target;const e=this.M;e&&On(t)==3?e.l():this.Pa(t)};j.Pa=function(t){try{if(t==this.g)e:{const m=On(this.g);var e=this.g.Ia();const v=this.g.da();if(!(3>m)&&(m!=3||np||this.g&&(this.h.h||this.g.ja()||X_(this.g)))){this.J||m!=4||e==7||(e==8||0>=v?Ca(3):Ca(2)),Jc(this);var n=this.g.da();this.ca=n;t:if(DT(this)){var i=X_(this.g);t="";var r=i.length,o=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mr(this),Zo(this);var l="";break t}this.h.i=new J.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:o&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=n==200,nO(this.j,this.u,this.A,this.m,this.W,m,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_a(c)){var f=c;break t}}f=null}if(n=f)ds(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cp(this,n);else{this.i=!1,this.o=3,Nt(12),mr(this),Zo(this);break e}}this.S?(MT(this,m,l),np&&this.i&&m==3&&(kT(this.U,this.V,"tick",this.mb),this.V.start())):(ds(this.j,this.m,l,null),cp(this,l)),m==4&&mr(this),this.i&&!this.J&&(m==4?rS(this.l,this):(this.i=!1,Ya(this)))}else IO(this.g),n==400&&0<l.indexOf("Unknown SID")?(this.o=3,Nt(12)):(this.o=0,Nt(13)),mr(this),Zo(this)}}}catch{}finally{}};function DT(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function MT(t,e,n){let i=!0,r;for(;!t.J&&t.C<n.length;)if(r=oO(t,n),r==rc){e==4&&(t.o=4,Nt(14),i=!1),ds(t.j,t.m,null,"[Incomplete Response]");break}else if(r==lp){t.o=4,Nt(15),ds(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else ds(t.j,t.m,r,null),cp(t,r);DT(t)&&r!=rc&&r!=lp&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Nt(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),og(e),e.M=!0,Nt(11))):(ds(t.j,t.m,n,"[Invalid Chunked Response]"),mr(t),Zo(t))}j.mb=function(){if(this.g){var t=On(this.g),e=this.g.ja();this.C<e.length&&(Jc(this),MT(this,t,e),this.i&&t!=4&&Ya(this))}};function oO(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?rc:(n=Number(e.substring(n,i)),isNaN(n)?lp:(i+=1,i+n>e.length?rc:(e=e.slice(i,i+n),t.C=i+n,e)))}j.cancel=function(){this.J=!0,mr(this)};function Ya(t){t.Y=Date.now()+t.P,bT(t,t.P)}function bT(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Ka(St(t.lb,t),e)}function Jc(t){t.B&&(J.clearTimeout(t.B),t.B=null)}j.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(iO(this.j,this.A),this.L!=2&&(Ca(),Nt(17)),mr(this),this.o=2,Zo(this)):bT(this,this.Y-t)};function Zo(t){t.l.H==0||t.J||rS(t.l,t)}function mr(t){Jc(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Qm(t.V),IT(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function cp(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||hp(n.i,t))){if(!t.K&&hp(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)ac(n),ih(n);else break e;sg(n),Nt(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ka(St(n.ib,n),6e3));if(1>=HT(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else gr(n,11)}else if((t.K||n.g==t)&&ac(n),!_a(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let f=r[e];if(n.V=f[0],f=f[1],n.H==2)if(f[0]=="c"){n.K=f[1],n.pa=f[2];const m=f[3];m!=null&&(n.ra=m,n.l.info("VER="+n.ra));const v=f[4];v!=null&&(n.Ga=v,n.l.info("SVER="+n.Ga));const y=f[5];y!=null&&typeof y=="number"&&0<y&&(i=1.5*y,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const T=t.g;if(T){const C=T.g?T.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(C){var o=i.i;o.g||C.indexOf("spdy")==-1&&C.indexOf("quic")==-1&&C.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(tg(o,o.h),o.h=null))}if(i.F){const k=T.g?T.g.getResponseHeader("X-HTTP-Session-Id"):null;k&&(i.Da=k,Le(i.I,i.F,k))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var l=t;if(i.wa=aS(i,i.J?i.pa:null,i.Y),l.K){WT(i.i,l);var c=l,h=i.L;h&&c.setTimeout(h),c.B&&(Jc(c),Ya(c)),i.g=l}else nS(i);0<n.j.length&&rh(n)}else f[0]!="stop"&&f[0]!="close"||gr(n,7);else n.H==3&&(f[0]=="stop"||f[0]=="close"?f[0]=="stop"?gr(n,7):rg(n):f[0]!="noop"&&n.h&&n.h.Aa(f),n.A=0)}}Ca(4)}catch{}}function aO(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Hc(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function lO(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Hc(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function $T(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Hc(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=lO(t),i=aO(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}var zT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uO(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Sr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Sr){this.h=t.h,sc(this,t.j),this.s=t.s,this.g=t.g,oc(this,t.m),this.l=t.l;var e=t.i,n=new ka;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),G_(this,n),this.o=t.o}else t&&(e=String(t).match(zT))?(this.h=!1,sc(this,e[1]||"",!0),this.s=No(e[2]||""),this.g=No(e[3]||"",!0),oc(this,e[4]),this.l=No(e[5]||"",!0),G_(this,e[6]||"",!0),this.o=No(e[7]||"")):(this.h=!1,this.i=new ka(null,this.h))}Sr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ro(e,Q_,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Ro(e,Q_,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Ro(n,n.charAt(0)=="/"?dO:hO,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ro(n,pO)),t.join("")};function ci(t){return new Sr(t)}function sc(t,e,n){t.j=n?No(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function oc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function G_(t,e,n){e instanceof ka?(t.i=e,mO(t.i,t.h)):(n||(e=Ro(e,fO)),t.i=new ka(e,t.h))}function Le(t,e,n){t.i.set(e,n)}function eh(t){return Le(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function No(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ro(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,cO),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function cO(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Q_=/[#\/\?@]/g,hO=/[#\?:]/g,dO=/[#\?]/g,fO=/[#\?@]/g,pO=/#/g;function ka(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function tr(t){t.g||(t.g=new Map,t.h=0,t.i&&uO(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}j=ka.prototype;j.add=function(t,e){tr(this),this.i=null,t=Ks(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function FT(t,e){tr(t),e=Ks(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function BT(t,e){return tr(t),e=Ks(t,e),t.g.has(e)}j.forEach=function(t,e){tr(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};j.ta=function(){tr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let o=0;o<r.length;o++)n.push(e[i])}return n};j.Z=function(t){tr(this);let e=[];if(typeof t=="string")BT(this,t)&&(e=e.concat(this.g.get(Ks(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};j.set=function(t,e){return tr(this),this.i=null,t=Ks(this,t),BT(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};j.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function UT(t,e,n){FT(t,e),0<n.length&&(t.i=null,t.g.set(Ks(t,e),Um(n)),t.h+=n.length)}j.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const o=encodeURIComponent(String(i)),l=this.Z(i);for(i=0;i<l.length;i++){var r=o;l[i]!==""&&(r+="="+encodeURIComponent(String(l[i]))),t.push(r)}}return this.i=t.join("&")};function Ks(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function mO(t,e){e&&!t.j&&(tr(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(FT(this,i),UT(this,r,n))},t)),t.j=e}var gO=class{constructor(t,e){this.g=t,this.map=e}};function jT(t){this.l=t||vO,J.PerformanceNavigationTiming?(t=J.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(J.g&&J.g.Ka&&J.g.Ka()&&J.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var vO=10;function VT(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function HT(t){return t.h?1:t.g?t.g.size:0}function hp(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function tg(t,e){t.g?t.g.add(e):t.h=e}function WT(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}jT.prototype.cancel=function(){if(this.i=qT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function qT(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Um(t.i)}var yO=class{stringify(t){return J.JSON.stringify(t,void 0)}parse(t){return J.JSON.parse(t,void 0)}};function _O(){this.g=new yO}function wO(t,e,n){const i=n||"";try{$T(t,function(r,o){let l=r;qa(r)&&(l=Km(r)),e.push(i+o+"="+encodeURIComponent(l))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function EO(t,e){const n=new Gc;if(J.Image){const i=new Image;i.onload=ql(Kl,n,i,"TestLoadImage: loaded",!0,e),i.onerror=ql(Kl,n,i,"TestLoadImage: error",!1,e),i.onabort=ql(Kl,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=ql(Kl,n,i,"TestLoadImage: timeout",!1,e),J.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function Kl(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function Xa(t){this.l=t.fc||null,this.j=t.ob||!1}at(Xa,Xm);Xa.prototype.g=function(){return new th(this.l,this.j)};Xa.prototype.i=function(t){return function(){return t}}({});function th(t,e){ot.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=ng,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}at(th,ot);var ng=0;j=th.prototype;j.open=function(t,e){if(this.readyState!=ng)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ia(this)};j.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||J).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};j.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ja(this)),this.readyState=ng};j.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ia(this)),this.g&&(this.readyState=3,Ia(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof J.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ZT(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function ZT(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}j.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ja(this):Ia(this),this.readyState==3&&ZT(this)}};j.Za=function(t){this.g&&(this.response=this.responseText=t,Ja(this))};j.Ya=function(t){this.g&&(this.response=t,Ja(this))};j.ka=function(){this.g&&Ja(this)};function Ja(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ia(t)}j.setRequestHeader=function(t,e){this.v.append(t,e)};j.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};j.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ia(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(th.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var TO=J.JSON.parse;function Ue(t){ot.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=KT,this.L=this.M=!1}at(Ue,ot);var KT="",SO=/^https?$/i,CO=["POST","PUT"];j=Ue.prototype;j.Oa=function(t){this.M=t};j.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ap.g(),this.C=this.u?K_(this.u):K_(ap),this.g.onreadystatechange=St(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){Y_(this,o);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const o of i.keys())n.set(o,i.get(o));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),r=J.FormData&&t instanceof J.FormData,!(0<=hT(CO,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,l]of n)this.g.setRequestHeader(o,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{YT(this),0<this.B&&((this.L=kO(this.g))?(this.g.timeout=this.B,this.g.ontimeout=St(this.ua,this)):this.A=Ym(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Y_(this,o)}};function kO(t){return Ms&&typeof t.timeout=="number"&&t.ontimeout!==void 0}j.ua=function(){typeof Bm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pt(this,"timeout"),this.abort(8))};function Y_(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,GT(t),nh(t)}function GT(t){t.F||(t.F=!0,pt(t,"complete"),pt(t,"error"))}j.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,pt(this,"complete"),pt(this,"abort"),nh(this))};j.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),nh(this,!0)),Ue.$.N.call(this)};j.La=function(){this.s||(this.G||this.v||this.l?QT(this):this.kb())};j.kb=function(){QT(this)};function QT(t){if(t.h&&typeof Bm<"u"&&(!t.C[1]||On(t)!=4||t.da()!=2)){if(t.v&&On(t)==4)Ym(t.La,0,t);else if(pt(t,"readystatechange"),On(t)==4){t.h=!1;try{const l=t.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=l===0){var r=String(t.I).match(zT)[1]||null;!r&&J.self&&J.self.location&&(r=J.self.location.protocol.slice(0,-1)),i=!SO.test(r?r.toLowerCase():"")}n=i}if(n)pt(t,"complete"),pt(t,"success");else{t.m=6;try{var o=2<On(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",GT(t)}}finally{nh(t)}}}}function nh(t,e){if(t.g){YT(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||pt(t,"ready");try{n.onreadystatechange=i}catch{}}}function YT(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(J.clearTimeout(t.A),t.A=null)}j.isActive=function(){return!!this.g};function On(t){return t.g?t.g.readyState:0}j.da=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}};j.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};j.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),TO(e)}};function X_(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case KT:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function IO(t){const e={};t=(t.g&&2<=On(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if(_a(t[i]))continue;var n=Y2(t[i]);const r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const o=e[r]||[];e[r]=o,o.push(n)}H2(e,function(i){return i.join(", ")})}j.Ia=function(){return this.m};j.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function XT(t){let e="";return Vm(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function ig(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=XT(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Le(t,e,n))}function ko(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function JT(t){this.Ga=0,this.j=[],this.l=new Gc,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ko("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ko("baseRetryDelayMs",5e3,t),this.hb=ko("retryDelaySeedMs",1e4,t),this.eb=ko("forwardChannelMaxRetries",2,t),this.xa=ko("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new jT(t&&t.concurrentRequestLimit),this.Ja=new _O,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}j=JT.prototype;j.ra=8;j.H=1;function rg(t){if(eS(t),t.H==3){var e=t.W++,n=ci(t.I);if(Le(n,"SID",t.K),Le(n,"RID",e),Le(n,"TYPE","terminate"),el(t,n),e=new Qa(t,t.l,e),e.L=2,e.v=eh(ci(n)),n=!1,J.navigator&&J.navigator.sendBeacon)try{n=J.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&J.Image&&(new Image().src=e.v,n=!0),n||(e.g=lS(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ya(e)}oS(t)}function ih(t){t.g&&(og(t),t.g.cancel(),t.g=null)}function eS(t){ih(t),t.u&&(J.clearTimeout(t.u),t.u=null),ac(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&J.clearTimeout(t.m),t.m=null)}function rh(t){if(!VT(t.i)&&!t.m){t.m=!0;var e=t.Na;Ea||ST(),Ta||(Ea(),Ta=!0),Gm.add(e,t),t.C=0}}function xO(t,e){return HT(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Ka(St(t.Na,t,e),sS(t,t.C)),t.C++,!0)}j.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new Qa(this,this.l,t);let o=this.s;if(this.U&&(o?(o=mT(o),gT(o,this.U)):o=this.U),this.o!==null||this.O||(r.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=tS(this,r,e),n=ci(this.I),Le(n,"RID",t),Le(n,"CVER",22),this.F&&Le(n,"X-HTTP-Session-Id",this.F),el(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(XT(o)))+"&"+e:this.o&&ig(n,this.o,o)),tg(this.i,r),this.bb&&Le(n,"TYPE","init"),this.P?(Le(n,"$req",e),Le(n,"SID","null"),r.aa=!0,up(r,n,null)):up(r,n,e),this.H=2}}else this.H==3&&(t?J_(this,t):this.j.length==0||VT(this.i)||J_(this))};function J_(t,e){var n;e?n=e.m:n=t.W++;const i=ci(t.I);Le(i,"SID",t.K),Le(i,"RID",n),Le(i,"AID",t.V),el(t,i),t.o&&t.s&&ig(i,t.o,t.s),n=new Qa(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=tS(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),tg(t.i,n),up(n,i,e)}function el(t,e){t.na&&Vm(t.na,function(n,i){Le(e,i,n)}),t.h&&$T({},function(n,i){Le(e,i,n)})}function tS(t,e,n){n=Math.min(t.j.length,n);var i=t.h?St(t.h.Va,t.h,t):null;e:{var r=t.j;let o=-1;for(;;){const l=["count="+n];o==-1?0<n?(o=r[0].g,l.push("ofs="+o)):o=0:l.push("ofs="+o);let c=!0;for(let h=0;h<n;h++){let f=r[h].g;const m=r[h].map;if(f-=o,0>f)o=Math.max(0,r[h].g-100),c=!1;else try{wO(m,l,"req"+f+"_")}catch{i&&i(m)}}if(c){i=l.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function nS(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ea||ST(),Ta||(Ea(),Ta=!0),Gm.add(e,t),t.A=0}}function sg(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Ka(St(t.Ma,t),sS(t,t.A)),t.A++,!0)}j.Ma=function(){if(this.u=null,iS(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ka(St(this.jb,this),t)}};j.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Nt(10),ih(this),iS(this))};function og(t){t.B!=null&&(J.clearTimeout(t.B),t.B=null)}function iS(t){t.g=new Qa(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=ci(t.wa);Le(e,"RID","rpc"),Le(e,"SID",t.K),Le(e,"AID",t.V),Le(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Le(e,"TO",t.qa),Le(e,"TYPE","xmlhttp"),el(t,e),t.o&&t.s&&ig(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=eh(ci(e)),n.s=null,n.S=!0,OT(n,t)}j.ib=function(){this.v!=null&&(this.v=null,ih(this),sg(this),Nt(19))};function ac(t){t.v!=null&&(J.clearTimeout(t.v),t.v=null)}function rS(t,e){var n=null;if(t.g==e){ac(t),og(t),t.g=null;var i=2}else if(hp(t.i,e))n=e.F,WT(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;i=Qc(),pt(i,new LT(i,n)),rh(t)}else nS(t);else if(r=e.o,r==3||r==0&&0<e.ca||!(i==1&&xO(t,e)||i==2&&sg(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:gr(t,5);break;case 4:gr(t,10);break;case 3:gr(t,6);break;default:gr(t,2)}}}function sS(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function gr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=St(t.pb,t);n||(n=new Sr("//www.google.com/images/cleardot.gif"),J.location&&J.location.protocol=="http"||sc(n,"https"),eh(n)),EO(n.toString(),i)}else Nt(2);t.H=0,t.h&&t.h.za(e),oS(t),eS(t)}j.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Nt(2)):(this.l.info("Failed to ping google.com"),Nt(1))};function oS(t){if(t.H=0,t.ma=[],t.h){const e=qT(t.i);(e.length!=0||t.j.length!=0)&&(V_(t.ma,e),V_(t.ma,t.j),t.i.i.length=0,Um(t.j),t.j.length=0),t.h.ya()}}function aS(t,e,n){var i=n instanceof Sr?ci(n):new Sr(n);if(i.g!="")e&&(i.g=e+"."+i.g),oc(i,i.m);else{var r=J.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var o=new Sr(null);i&&sc(o,i),e&&(o.g=e),r&&oc(o,r),n&&(o.l=n),i=o}return n=t.F,e=t.Da,n&&e&&Le(i,n,e),Le(i,"VER",t.ra),el(t,i),i}function lS(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ue(new Xa({ob:!0})):new Ue(t.va),e.Oa(t.J),e}j.isActive=function(){return!!this.h&&this.h.isActive(this)};function uS(){}j=uS.prototype;j.Ba=function(){};j.Aa=function(){};j.za=function(){};j.ya=function(){};j.isActive=function(){return!0};j.Va=function(){};function lc(){if(Ms&&!(10<=Number(B2)))throw Error("Environmental error: no available transport.")}lc.prototype.g=function(t,e){return new Qt(t,e)};function Qt(t,e){ot.call(this),this.g=new JT(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!_a(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_a(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Gs(this)}at(Qt,ot);Qt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Nt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=aS(t,null,t.Y),rh(t)};Qt.prototype.close=function(){rg(this.g)};Qt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Km(t),t=n);e.j.push(new gO(e.fb++,t)),e.H==3&&rh(e)};Qt.prototype.N=function(){this.g.h=null,delete this.j,rg(this.g),delete this.g,Qt.$.N.call(this)};function cS(t){Jm.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}at(cS,Jm);function hS(){eg.call(this),this.status=1}at(hS,eg);function Gs(t){this.g=t}at(Gs,uS);Gs.prototype.Ba=function(){pt(this.g,"a")};Gs.prototype.Aa=function(t){pt(this.g,new cS(t))};Gs.prototype.za=function(t){pt(this.g,new hS)};Gs.prototype.ya=function(){pt(this.g,"b")};function PO(){this.blockSize=-1}function Tn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}at(Tn,PO);Tn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Wd(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var o=t.g[3],l=e+(o^n&(r^o))+i[0]+3614090360&4294967295;e=n+(l<<7&4294967295|l>>>25),l=o+(r^e&(n^r))+i[1]+3905402710&4294967295,o=e+(l<<12&4294967295|l>>>20),l=r+(n^o&(e^n))+i[2]+606105819&4294967295,r=o+(l<<17&4294967295|l>>>15),l=n+(e^r&(o^e))+i[3]+3250441966&4294967295,n=r+(l<<22&4294967295|l>>>10),l=e+(o^n&(r^o))+i[4]+4118548399&4294967295,e=n+(l<<7&4294967295|l>>>25),l=o+(r^e&(n^r))+i[5]+1200080426&4294967295,o=e+(l<<12&4294967295|l>>>20),l=r+(n^o&(e^n))+i[6]+2821735955&4294967295,r=o+(l<<17&4294967295|l>>>15),l=n+(e^r&(o^e))+i[7]+4249261313&4294967295,n=r+(l<<22&4294967295|l>>>10),l=e+(o^n&(r^o))+i[8]+1770035416&4294967295,e=n+(l<<7&4294967295|l>>>25),l=o+(r^e&(n^r))+i[9]+2336552879&4294967295,o=e+(l<<12&4294967295|l>>>20),l=r+(n^o&(e^n))+i[10]+4294925233&4294967295,r=o+(l<<17&4294967295|l>>>15),l=n+(e^r&(o^e))+i[11]+2304563134&4294967295,n=r+(l<<22&4294967295|l>>>10),l=e+(o^n&(r^o))+i[12]+1804603682&4294967295,e=n+(l<<7&4294967295|l>>>25),l=o+(r^e&(n^r))+i[13]+4254626195&4294967295,o=e+(l<<12&4294967295|l>>>20),l=r+(n^o&(e^n))+i[14]+2792965006&4294967295,r=o+(l<<17&4294967295|l>>>15),l=n+(e^r&(o^e))+i[15]+1236535329&4294967295,n=r+(l<<22&4294967295|l>>>10),l=e+(r^o&(n^r))+i[1]+4129170786&4294967295,e=n+(l<<5&4294967295|l>>>27),l=o+(n^r&(e^n))+i[6]+3225465664&4294967295,o=e+(l<<9&4294967295|l>>>23),l=r+(e^n&(o^e))+i[11]+643717713&4294967295,r=o+(l<<14&4294967295|l>>>18),l=n+(o^e&(r^o))+i[0]+3921069994&4294967295,n=r+(l<<20&4294967295|l>>>12),l=e+(r^o&(n^r))+i[5]+3593408605&4294967295,e=n+(l<<5&4294967295|l>>>27),l=o+(n^r&(e^n))+i[10]+38016083&4294967295,o=e+(l<<9&4294967295|l>>>23),l=r+(e^n&(o^e))+i[15]+3634488961&4294967295,r=o+(l<<14&4294967295|l>>>18),l=n+(o^e&(r^o))+i[4]+3889429448&4294967295,n=r+(l<<20&4294967295|l>>>12),l=e+(r^o&(n^r))+i[9]+568446438&4294967295,e=n+(l<<5&4294967295|l>>>27),l=o+(n^r&(e^n))+i[14]+3275163606&4294967295,o=e+(l<<9&4294967295|l>>>23),l=r+(e^n&(o^e))+i[3]+4107603335&4294967295,r=o+(l<<14&4294967295|l>>>18),l=n+(o^e&(r^o))+i[8]+1163531501&4294967295,n=r+(l<<20&4294967295|l>>>12),l=e+(r^o&(n^r))+i[13]+2850285829&4294967295,e=n+(l<<5&4294967295|l>>>27),l=o+(n^r&(e^n))+i[2]+4243563512&4294967295,o=e+(l<<9&4294967295|l>>>23),l=r+(e^n&(o^e))+i[7]+1735328473&4294967295,r=o+(l<<14&4294967295|l>>>18),l=n+(o^e&(r^o))+i[12]+2368359562&4294967295,n=r+(l<<20&4294967295|l>>>12),l=e+(n^r^o)+i[5]+4294588738&4294967295,e=n+(l<<4&4294967295|l>>>28),l=o+(e^n^r)+i[8]+2272392833&4294967295,o=e+(l<<11&4294967295|l>>>21),l=r+(o^e^n)+i[11]+1839030562&4294967295,r=o+(l<<16&4294967295|l>>>16),l=n+(r^o^e)+i[14]+4259657740&4294967295,n=r+(l<<23&4294967295|l>>>9),l=e+(n^r^o)+i[1]+2763975236&4294967295,e=n+(l<<4&4294967295|l>>>28),l=o+(e^n^r)+i[4]+1272893353&4294967295,o=e+(l<<11&4294967295|l>>>21),l=r+(o^e^n)+i[7]+4139469664&4294967295,r=o+(l<<16&4294967295|l>>>16),l=n+(r^o^e)+i[10]+3200236656&4294967295,n=r+(l<<23&4294967295|l>>>9),l=e+(n^r^o)+i[13]+681279174&4294967295,e=n+(l<<4&4294967295|l>>>28),l=o+(e^n^r)+i[0]+3936430074&4294967295,o=e+(l<<11&4294967295|l>>>21),l=r+(o^e^n)+i[3]+3572445317&4294967295,r=o+(l<<16&4294967295|l>>>16),l=n+(r^o^e)+i[6]+76029189&4294967295,n=r+(l<<23&4294967295|l>>>9),l=e+(n^r^o)+i[9]+3654602809&4294967295,e=n+(l<<4&4294967295|l>>>28),l=o+(e^n^r)+i[12]+3873151461&4294967295,o=e+(l<<11&4294967295|l>>>21),l=r+(o^e^n)+i[15]+530742520&4294967295,r=o+(l<<16&4294967295|l>>>16),l=n+(r^o^e)+i[2]+3299628645&4294967295,n=r+(l<<23&4294967295|l>>>9),l=e+(r^(n|~o))+i[0]+4096336452&4294967295,e=n+(l<<6&4294967295|l>>>26),l=o+(n^(e|~r))+i[7]+1126891415&4294967295,o=e+(l<<10&4294967295|l>>>22),l=r+(e^(o|~n))+i[14]+2878612391&4294967295,r=o+(l<<15&4294967295|l>>>17),l=n+(o^(r|~e))+i[5]+4237533241&4294967295,n=r+(l<<21&4294967295|l>>>11),l=e+(r^(n|~o))+i[12]+1700485571&4294967295,e=n+(l<<6&4294967295|l>>>26),l=o+(n^(e|~r))+i[3]+2399980690&4294967295,o=e+(l<<10&4294967295|l>>>22),l=r+(e^(o|~n))+i[10]+4293915773&4294967295,r=o+(l<<15&4294967295|l>>>17),l=n+(o^(r|~e))+i[1]+2240044497&4294967295,n=r+(l<<21&4294967295|l>>>11),l=e+(r^(n|~o))+i[8]+1873313359&4294967295,e=n+(l<<6&4294967295|l>>>26),l=o+(n^(e|~r))+i[15]+4264355552&4294967295,o=e+(l<<10&4294967295|l>>>22),l=r+(e^(o|~n))+i[6]+2734768916&4294967295,r=o+(l<<15&4294967295|l>>>17),l=n+(o^(r|~e))+i[13]+1309151649&4294967295,n=r+(l<<21&4294967295|l>>>11),l=e+(r^(n|~o))+i[4]+4149444226&4294967295,e=n+(l<<6&4294967295|l>>>26),l=o+(n^(e|~r))+i[11]+3174756917&4294967295,o=e+(l<<10&4294967295|l>>>22),l=r+(e^(o|~n))+i[2]+718787259&4294967295,r=o+(l<<15&4294967295|l>>>17),l=n+(o^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(l<<21&4294967295|l>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+o&4294967295}Tn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,o=0;o<e;){if(r==0)for(;o<=n;)Wd(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(i[r++]=t.charCodeAt(o++),r==this.blockSize){Wd(this,i),r=0;break}}else for(;o<e;)if(i[r++]=t[o++],r==this.blockSize){Wd(this,i),r=0;break}}this.h=r,this.i+=e};Tn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function Se(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var o=t[r]|0;i&&o==e||(n[r]=o,i=!1)}this.g=n}var LO={};function ag(t){return-128<=t&&128>t?$2(t,function(e){return new Se([e|0],0>e?-1:0)}):new Se([t|0],0>t?-1:0)}function Dn(t){if(isNaN(t)||!isFinite(t))return Es;if(0>t)return dt(Dn(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=dp;return new Se(e,0)}function dS(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return dt(dS(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Dn(Math.pow(e,8)),i=Es,r=0;r<t.length;r+=8){var o=Math.min(8,t.length-r),l=parseInt(t.substring(r,r+o),e);8>o?(o=Dn(Math.pow(e,o)),i=i.R(o).add(Dn(l))):(i=i.R(n),i=i.add(Dn(l)))}return i}var dp=4294967296,Es=ag(0),fp=ag(1),ew=ag(16777216);j=Se.prototype;j.ea=function(){if(on(this))return-dt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:dp+i)*e,e*=dp}return t};j.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(ei(this))return"0";if(on(this))return"-"+dt(this).toString(t);for(var e=Dn(Math.pow(t,6)),n=this,i="";;){var r=cc(n,e).g;n=uc(n,r.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,ei(n))return o+i;for(;6>o.length;)o="0"+o;i=o+i}};j.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function ei(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function on(t){return t.h==-1}j.X=function(t){return t=uc(this,t),on(t)?-1:ei(t)?0:1};function dt(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Se(n,~t.h).add(fp)}j.abs=function(){return on(this)?dt(this):this};j.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var o=i+(this.D(r)&65535)+(t.D(r)&65535),l=(o>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=l>>>16,o&=65535,l&=65535,n[r]=l<<16|o}return new Se(n,n[n.length-1]&-2147483648?-1:0)};function uc(t,e){return t.add(dt(e))}j.R=function(t){if(ei(this)||ei(t))return Es;if(on(this))return on(t)?dt(this).R(dt(t)):dt(dt(this).R(t));if(on(t))return dt(this.R(dt(t)));if(0>this.X(ew)&&0>t.X(ew))return Dn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var o=this.D(i)>>>16,l=this.D(i)&65535,c=t.D(r)>>>16,h=t.D(r)&65535;n[2*i+2*r]+=l*h,Gl(n,2*i+2*r),n[2*i+2*r+1]+=o*h,Gl(n,2*i+2*r+1),n[2*i+2*r+1]+=l*c,Gl(n,2*i+2*r+1),n[2*i+2*r+2]+=o*c,Gl(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Se(n,0)};function Gl(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Io(t,e){this.g=t,this.h=e}function cc(t,e){if(ei(e))throw Error("division by zero");if(ei(t))return new Io(Es,Es);if(on(t))return e=cc(dt(t),e),new Io(dt(e.g),dt(e.h));if(on(e))return e=cc(t,dt(e)),new Io(dt(e.g),e.h);if(30<t.g.length){if(on(t)||on(e))throw Error("slowDivide_ only works with positive integers.");for(var n=fp,i=e;0>=i.X(t);)n=tw(n),i=tw(i);var r=Qr(n,1),o=Qr(i,1);for(i=Qr(i,2),n=Qr(n,2);!ei(i);){var l=o.add(i);0>=l.X(t)&&(r=r.add(n),o=l),i=Qr(i,1),n=Qr(n,1)}return e=uc(t,r.R(e)),new Io(r,e)}for(r=Es;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),o=Dn(n),l=o.R(e);on(l)||0<l.X(t);)n-=i,o=Dn(n),l=o.R(e);ei(o)&&(o=fp),r=r.add(o),t=uc(t,l)}return new Io(r,t)}j.gb=function(t){return cc(this,t).h};j.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Se(n,this.h&t.h)};j.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Se(n,this.h|t.h)};j.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Se(n,this.h^t.h)};function tw(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Se(n,t.h)}function Qr(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],o=0;o<i;o++)r[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new Se(r,t.h)}lc.prototype.createWebChannel=lc.prototype.g;Qt.prototype.send=Qt.prototype.u;Qt.prototype.open=Qt.prototype.m;Qt.prototype.close=Qt.prototype.close;Yc.NO_ERROR=0;Yc.TIMEOUT=8;Yc.HTTP_ERROR=6;AT.COMPLETE="complete";NT.EventType=Ga;Ga.OPEN="a";Ga.CLOSE="b";Ga.ERROR="c";Ga.MESSAGE="d";ot.prototype.listen=ot.prototype.O;Ue.prototype.listenOnce=Ue.prototype.P;Ue.prototype.getLastError=Ue.prototype.Sa;Ue.prototype.getLastErrorCode=Ue.prototype.Ia;Ue.prototype.getStatus=Ue.prototype.da;Ue.prototype.getResponseJson=Ue.prototype.Wa;Ue.prototype.getResponseText=Ue.prototype.ja;Ue.prototype.send=Ue.prototype.ha;Ue.prototype.setWithCredentials=Ue.prototype.Oa;Tn.prototype.digest=Tn.prototype.l;Tn.prototype.reset=Tn.prototype.reset;Tn.prototype.update=Tn.prototype.j;Se.prototype.add=Se.prototype.add;Se.prototype.multiply=Se.prototype.R;Se.prototype.modulo=Se.prototype.gb;Se.prototype.compare=Se.prototype.X;Se.prototype.toNumber=Se.prototype.ea;Se.prototype.toString=Se.prototype.toString;Se.prototype.getBits=Se.prototype.D;Se.fromNumber=Dn;Se.fromString=dS;var AO=function(){return new lc},NO=function(){return Qc()},qd=Yc,RO=AT,OO=$r,nw={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},DO=Xa,Ql=NT,MO=Ue,bO=Tn,Ts=Se;const iw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qs="9.22.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new Am("@firebase/firestore");function rw(){return Rr.logLevel}function Z(t,...e){if(Rr.logLevel<=we.DEBUG){const n=e.map(lg);Rr.debug(`Firestore (${Qs}): ${t}`,...n)}}function hi(t,...e){if(Rr.logLevel<=we.ERROR){const n=e.map(lg);Rr.error(`Firestore (${Qs}): ${t}`,...n)}}function bs(t,...e){if(Rr.logLevel<=we.WARN){const n=e.map(lg);Rr.warn(`Firestore (${Qs}): ${t}`,...n)}}function lg(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${Qs}) INTERNAL ASSERTION FAILED: `+t;throw hi(e),new Error(e)}function Re(t,e){t||Y()}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends mi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $O{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class zO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class FO{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ii,e.enqueueRetryable(()=>r(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},c=h=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),l()};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ii)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Re(typeof i.accessToken=="string"),new fS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string"),new _t(e)}}class BO{constructor(e,n,i){this.h=e,this.l=n,this.m=i,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class UO{constructor(e,n,i){this.h=e,this.l=n,this.m=i}getToken(){return Promise.resolve(new BO(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VO{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const i=o=>{o.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.T;return this.T=o.token,Z("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.I.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.I.getImmediate({optional:!0});o?r(o):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Re(typeof n.token=="string"),this.T=n.token,new jO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=HO(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}}function Ee(t,e){return t<e?-1:t>e?1:0}function $s(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Je(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new Je(0,0))}static max(){return new te(new Je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n,i){n===void 0?n=0:n>e.length&&Y(),i===void 0?i=e.length-n:i>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return xa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xa?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=e.get(r),l=n.get(r);if(o<l)return-1;if(o>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ae extends xa{construct(e,n,i){return new Ae(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new W(R.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const WO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tt extends xa{construct(e,n,i){return new Tt(e,n,i)}static isValidIdentifier(e){return WO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Tt(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new W(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new W(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new W(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else c==="`"?(l=!l,r++):c!=="."||l?(i+=c,r++):(o(),r++)}if(o(),l)throw new W(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tt(n)}static emptyPath(){return new Tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(Ae.fromString(e))}static fromName(e){return new G(Ae.fromString(e).popFirst(5))}static empty(){return new G(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new Ae(e.slice()))}}function qO(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=te.fromTimestamp(i===1e9?new Je(n+1,0):new Je(n,i));return new Ki(r,G.empty(),e)}function ZO(t){return new Ki(t.readTime,t.key,-1)}class Ki{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ki(te.min(),G.empty(),-1)}static max(){return new Ki(te.max(),G.empty(),-1)}}function KO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(t){if(t.code!==R.FAILED_PRECONDITION||t.message!==GO)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,i)=>{n(e)})}static reject(e){return new z((n,i)=>{i(e)})}static waitFor(e){return new z((n,i)=>{let r=0,o=0,l=!1;e.forEach(c=>{++r,c.next(()=>{++o,l&&o===r&&n()},h=>i(h))}),l=!0,o===r&&n()})}static or(e){let n=z.resolve(!1);for(const i of e)n=n.next(r=>r?z.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new z((i,r)=>{const o=e.length,l=new Array(o);let c=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(m=>{l[f]=m,++c,c===o&&i(l)},m=>r(m))}})}static doWhile(e,n){return new z((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function nl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>n.writeSequenceNumber(i))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}ug.ct=-1;function sh(t){return t==null}function hc(t){return t===0&&1/t==-1/0}function YO(t){return typeof t=="number"&&Number.isInteger(t)&&!hc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function zr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||ht.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ht.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yl(this.root,e,this.comparator,!0)}}class Yl{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ht{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??ht.RED,this.left=r??ht.EMPTY,this.right=o??ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new ht(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return ht.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}ht.EMPTY=null,ht.RED=!0,ht.BLACK=!1;ht.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(t,e,n,i,r){return this}insert(t,e,n){return new ht(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ow(this.data.getIterator())}getIteratorFrom(e){return new ow(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new kt(this.comparator);return n.data=e,n}}class ow{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new Zt([])}unionWith(e){let n=new kt(Tt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Zt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $s(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new gS("Invalid base64 string: "+r):r}}(e);return new Pt(n)}static fromUint8Array(e){const n=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const XO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gi(t){if(Re(!!t),typeof t=="string"){let e=0;const n=XO.exec(t);if(Re(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ze(t.seconds),nanos:Ze(t.nanos)}}function Ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Or(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function hg(t){const e=t.mapValue.fields.__previous_value__;return cg(e)?hg(e):e}function Pa(t){const e=Gi(t.mapValue.fields.__local_write_time__.timestampValue);return new Je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,n,i,r,o,l,c,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=f}}class La{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new La("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof La&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Dr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cg(t)?4:eD(t)?9007199254740991:10:Y()}function Bn(t,e){if(t===e)return!0;const n=Dr(t);if(n!==Dr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pa(t).isEqual(Pa(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=Gi(i.timestampValue),l=Gi(r.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,r){return Or(i.bytesValue).isEqual(Or(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,r){return Ze(i.geoPointValue.latitude)===Ze(r.geoPointValue.latitude)&&Ze(i.geoPointValue.longitude)===Ze(r.geoPointValue.longitude)}(t,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Ze(i.integerValue)===Ze(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=Ze(i.doubleValue),l=Ze(r.doubleValue);return o===l?hc(o)===hc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return $s(t.arrayValue.values||[],e.arrayValue.values||[],Bn);case 10:return function(i,r){const o=i.mapValue.fields||{},l=r.mapValue.fields||{};if(sw(o)!==sw(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Bn(o[c],l[c])))return!1;return!0}(t,e);default:return Y()}}function Aa(t,e){return(t.values||[]).find(n=>Bn(n,e))!==void 0}function zs(t,e){if(t===e)return 0;const n=Dr(t),i=Dr(e);if(n!==i)return Ee(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(r,o){const l=Ze(r.integerValue||r.doubleValue),c=Ze(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return aw(t.timestampValue,e.timestampValue);case 4:return aw(Pa(t),Pa(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(r,o){const l=Or(r),c=Or(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(r,o){const l=r.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const f=Ee(l[h],c[h]);if(f!==0)return f}return Ee(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,o){const l=Ee(Ze(r.latitude),Ze(o.latitude));return l!==0?l:Ee(Ze(r.longitude),Ze(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,o){const l=r.values||[],c=o.values||[];for(let h=0;h<l.length&&h<c.length;++h){const f=zs(l[h],c[h]);if(f)return f}return Ee(l.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,o){if(r===Xl.mapValue&&o===Xl.mapValue)return 0;if(r===Xl.mapValue)return 1;if(o===Xl.mapValue)return-1;const l=r.fields||{},c=Object.keys(l),h=o.fields||{},f=Object.keys(h);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const v=Ee(c[m],f[m]);if(v!==0)return v;const y=zs(l[c[m]],h[f[m]]);if(y!==0)return y}return Ee(c.length,f.length)}(t.mapValue,e.mapValue);default:throw Y()}}function aw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=Gi(t),i=Gi(e),r=Ee(n.seconds,i.seconds);return r!==0?r:Ee(n.nanos,i.nanos)}function Fs(t){return pp(t)}function pp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(i){const r=Gi(i);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Or(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,G.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(i){let r="[",o=!0;for(const l of i.values||[])o?o=!1:r+=",",r+=pp(l);return r+"]"}(t.arrayValue):"mapValue"in t?function(i){const r=Object.keys(i.fields||{}).sort();let o="{",l=!0;for(const c of r)l?l=!1:o+=",",o+=`${c}:${pp(i.fields[c])}`;return o+"}"}(t.mapValue):Y();var e,n}function lw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function mp(t){return!!t&&"integerValue"in t}function dg(t){return!!t&&"arrayValue"in t}function uw(t){return!!t&&"nullValue"in t}function cw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Eu(t){return!!t&&"mapValue"in t}function Ko(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return zr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Ko(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ko(t.arrayValue.values[n]);return e}return Object.assign({},t)}function eD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.value=e}static empty(){return new Bt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Eu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ko(n)}setAll(e){let n=Tt.emptyPath(),i={},r=[];e.forEach((l,c)=>{if(!n.isImmediateParentOf(c)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=c.popLast()}l?i[c.lastSegment()]=Ko(l):r.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Eu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Eu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){zr(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Bt(Ko(this.value))}}function vS(t){const e=[];return zr(t.fields,(n,i)=>{const r=new Tt([n]);if(Eu(i)){const o=vS(i.mapValue).fields;if(o.length===0)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)}),new Zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n,i,r,o,l,c){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new Et(e,0,te.min(),te.min(),te.min(),Bt.empty(),0)}static newFoundDocument(e,n,i,r){return new Et(e,1,n,te.min(),i,r,0)}static newNoDocument(e,n){return new Et(e,2,n,te.min(),te.min(),Bt.empty(),0)}static newUnknownDocument(e,n){return new Et(e,3,n,te.min(),te.min(),Bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n){this.position=e,this.inclusive=n}}function hw(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],l=t.position[r];if(o.field.isKeyField()?i=G.comparator(G.fromName(l.referenceValue),n.key):i=zs(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function dw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n="asc"){this.field=e,this.dir=n}}function tD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{}class Ge extends yS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new iD(e,n,i):n==="array-contains"?new oD(e,i):n==="in"?new aD(e,i):n==="not-in"?new lD(e,i):n==="array-contains-any"?new uD(e,i):new Ge(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new rD(e,i):new sD(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(zs(n,this.value)):n!==null&&Dr(this.value)===Dr(n)&&this.matchesComparison(zs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Sn extends yS{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new Sn(e,n)}matches(e){return _S(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return e!==null?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function _S(t){return t.op==="and"}function wS(t){return nD(t)&&_S(t)}function nD(t){for(const e of t.filters)if(e instanceof Sn)return!1;return!0}function gp(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+Fs(t.value);if(wS(t))return t.filters.map(e=>gp(e)).join(",");{const e=t.filters.map(n=>gp(n)).join(",");return`${t.op}(${e})`}}function ES(t,e){return t instanceof Ge?function(n,i){return i instanceof Ge&&n.op===i.op&&n.field.isEqual(i.field)&&Bn(n.value,i.value)}(t,e):t instanceof Sn?function(n,i){return i instanceof Sn&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((r,o,l)=>r&&ES(o,i.filters[l]),!0):!1}(t,e):void Y()}function TS(t){return t instanceof Ge?function(e){return`${e.field.canonicalString()} ${e.op} ${Fs(e.value)}`}(t):t instanceof Sn?function(e){return e.op.toString()+" {"+e.getFilters().map(TS).join(" ,")+"}"}(t):"Filter"}class iD extends Ge{constructor(e,n,i){super(e,n,i),this.key=G.fromName(i.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class rD extends Ge{constructor(e,n){super(e,"in",n),this.keys=SS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class sD extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=SS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function SS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>G.fromName(i.referenceValue))}class oD extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return dg(n)&&Aa(n.arrayValue,this.value)}}class aD extends Ge{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Aa(this.value.arrayValue,n)}}class lD extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(Aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Aa(this.value.arrayValue,n)}}class uD extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!dg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Aa(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,n=null,i=[],r=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=c,this.dt=null}}function fw(t,e=null,n=[],i=[],r=null,o=null,l=null){return new cD(t,e,n,i,r,o,l)}function fg(t){const e=oe(t);if(e.dt===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>gp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),sh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Fs(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Fs(i)).join(",")),e.dt=n}return e.dt}function pg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!tD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ES(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!dw(t.startAt,e.startAt)&&dw(t.endAt,e.endAt)}function vp(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n=null,i=[],r=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.wt=null,this._t=null,this.startAt,this.endAt}}function hD(t,e,n,i,r,o,l,c){return new il(t,e,n,i,r,o,l,c)}function mg(t){return new il(t)}function pw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function CS(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function gg(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function kS(t){return t.collectionGroup!==null}function Ss(t){const e=oe(t);if(e.wt===null){e.wt=[];const n=gg(e),i=CS(e);if(n!==null&&i===null)n.isKeyField()||e.wt.push(new Go(n)),e.wt.push(new Go(Tt.keyField(),"asc"));else{let r=!1;for(const o of e.explicitOrderBy)e.wt.push(o),o.field.isKeyField()&&(r=!0);if(!r){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Go(Tt.keyField(),o))}}}return e.wt}function di(t){const e=oe(t);if(!e._t)if(e.limitType==="F")e._t=fw(e.path,e.collectionGroup,Ss(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const o of Ss(e)){const l=o.dir==="desc"?"asc":"desc";n.push(new Go(o.field,l))}const i=e.endAt?new dc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new dc(e.startAt.position,e.startAt.inclusive):null;e._t=fw(e.path,e.collectionGroup,n,e.filters,e.limit,i,r)}return e._t}function yp(t,e){e.getFirstInequalityField(),gg(t);const n=t.filters.concat([e]);return new il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _p(t,e,n){return new il(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function oh(t,e){return pg(di(t),di(e))&&t.limitType===e.limitType}function IS(t){return`${fg(di(t))}|lt:${t.limitType}`}function wp(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(i=>TS(i)).join(", ")}]`),sh(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(i=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(i)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Fs(i)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Fs(i)).join(",")),`Target(${n})`}(di(t))}; limitType=${t.limitType})`}function ah(t,e){return e.isFoundDocument()&&function(n,i){const r=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):G.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,i){for(const r of Ss(n))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const r of n.filters)if(!r.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(r,o,l){const c=hw(r,o,l);return r.inclusive?c<=0:c<0}(n.startAt,Ss(n),i)||n.endAt&&!function(r,o,l){const c=hw(r,o,l);return r.inclusive?c>=0:c>0}(n.endAt,Ss(n),i))}(t,e)}function dD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xS(t){return(e,n)=>{let i=!1;for(const r of Ss(t)){const o=fD(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function fD(t,e,n){const i=t.field.isKeyField()?G.comparator(e.key,n.key):function(r,o,l){const c=o.data.field(r),h=l.data.field(r);return c!==null&&h!==null?zs(c,h):Y()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){zr(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return mS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=new Fe(G.comparator);function fi(){return pD}const PS=new Fe(G.comparator);function Oo(...t){let e=PS;for(const n of t)e=e.insert(n.key,n);return e}function LS(t){let e=PS;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function vr(){return Qo()}function AS(){return Qo()}function Qo(){return new Ys(t=>t.toString(),(t,e)=>t.isEqual(e))}const mD=new Fe(G.comparator),gD=new kt(G.comparator);function he(...t){let e=gD;for(const n of t)e=e.add(n);return e}const vD=new kt(Ee);function yD(){return vD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hc(e)?"-0":e}}function RS(t){return{integerValue:""+t}}function _D(t,e){return YO(e)?RS(e):NS(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(){this._=void 0}}function wD(t,e,n){return t instanceof fc?function(i,r){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&cg(r)&&(r=hg(r)),r&&(o.fields.__previous_value__=r),{mapValue:o}}(n,e):t instanceof Na?DS(t,e):t instanceof Ra?MS(t,e):function(i,r){const o=OS(i,r),l=mw(o)+mw(i.gt);return mp(o)&&mp(i.gt)?RS(l):NS(i.serializer,l)}(t,e)}function ED(t,e,n){return t instanceof Na?DS(t,e):t instanceof Ra?MS(t,e):n}function OS(t,e){return t instanceof pc?mp(n=e)||function(i){return!!i&&"doubleValue"in i}(n)?e:{integerValue:0}:null;var n}class fc extends lh{}class Na extends lh{constructor(e){super(),this.elements=e}}function DS(t,e){const n=bS(e);for(const i of t.elements)n.some(r=>Bn(r,i))||n.push(i);return{arrayValue:{values:n}}}class Ra extends lh{constructor(e){super(),this.elements=e}}function MS(t,e){let n=bS(e);for(const i of t.elements)n=n.filter(r=>!Bn(r,i));return{arrayValue:{values:n}}}class pc extends lh{constructor(e,n){super(),this.serializer=e,this.gt=n}}function mw(t){return Ze(t.integerValue||t.doubleValue)}function bS(t){return dg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function TD(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Na&&i instanceof Na||n instanceof Ra&&i instanceof Ra?$s(n.elements,i.elements,Bn):n instanceof pc&&i instanceof pc?Bn(n.gt,i.gt):n instanceof fc&&i instanceof fc}(t.transform,e.transform)}class SD{constructor(e,n){this.version=e,this.transformResults=n}}class wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class uh{}function $S(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new FS(t.key,wn.none()):new rl(t.key,t.data,wn.none());{const n=t.data,i=Bt.empty();let r=new kt(Tt.comparator);for(let o of e.fields)if(!r.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new nr(t.key,i,new Zt(r.toArray()),wn.none())}}function CD(t,e,n){t instanceof rl?function(i,r,o){const l=i.value.clone(),c=vw(i.fieldTransforms,r,o.transformResults);l.setAll(c),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof nr?function(i,r,o){if(!Tu(i.precondition,r))return void r.convertToUnknownDocument(o.version);const l=vw(i.fieldTransforms,r,o.transformResults),c=r.data;c.setAll(zS(i)),c.setAll(l),r.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Yo(t,e,n,i){return t instanceof rl?function(r,o,l,c){if(!Tu(r.precondition,o))return l;const h=r.value.clone(),f=yw(r.fieldTransforms,c,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,i):t instanceof nr?function(r,o,l,c){if(!Tu(r.precondition,o))return l;const h=yw(r.fieldTransforms,c,o),f=o.data;return f.setAll(zS(r)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(m=>m.field))}(t,e,n,i):function(r,o,l){return Tu(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function kD(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=OS(i.transform,r||null);o!=null&&(n===null&&(n=Bt.empty()),n.set(i.field,o))}return n||null}function gw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&$s(n,i,(r,o)=>TD(r,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class rl extends uh{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class nr extends uh{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function zS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function vw(t,e,n){const i=new Map;Re(t.length===n.length);for(let r=0;r<n.length;r++){const o=t[r],l=o.transform,c=e.data.field(o.field);i.set(o.field,ED(l,c,n[r]))}return i}function yw(t,e,n){const i=new Map;for(const r of t){const o=r.transform,l=n.data.field(r.field);i.set(r.field,wD(o,l,e))}return i}class FS extends uh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ID extends uh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&CD(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Yo(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Yo(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=AS();return this.mutations.forEach(r=>{const o=e.get(r.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=n.has(r.key)?null:c;const h=$S(l,c);h!==null&&i.set(r.key,h),l.isValidDocument()||l.convertToNoDocument(te.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&$s(this.mutations,e.mutations,(n,i)=>gw(n,i))&&$s(this.baseMutations,e.baseMutations,(n,i)=>gw(n,i))}}class vg{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Re(e.mutations.length===i.length);let r=mD;const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new vg(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,pe;function AD(t){switch(t){default:return Y();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function BS(t){if(t===void 0)return hi("GRPC error has no .code"),R.UNKNOWN;switch(t){case qe.OK:return R.OK;case qe.CANCELLED:return R.CANCELLED;case qe.UNKNOWN:return R.UNKNOWN;case qe.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case qe.INTERNAL:return R.INTERNAL;case qe.UNAVAILABLE:return R.UNAVAILABLE;case qe.UNAUTHENTICATED:return R.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case qe.NOT_FOUND:return R.NOT_FOUND;case qe.ALREADY_EXISTS:return R.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return R.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case qe.ABORTED:return R.ABORTED;case qe.OUT_OF_RANGE:return R.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return R.UNIMPLEMENTED;case qe.DATA_LOSS:return R.DATA_LOSS;default:return Y()}}(pe=qe||(qe={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Jl}static getOrCreateInstance(){return Jl===null&&(Jl=new yg),Jl}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Jl=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=new Ts([4294967295,4294967295],0);function _w(t){const e=ND().encode(t),n=new bO;return n.update(e),new Uint8Array(n.digest())}function ww(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ts([n,i],0),new Ts([r,o],0)]}class _g{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Do(`Invalid padding: ${n}`);if(i<0)throw new Do(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Do(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Do(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=Ts.fromNumber(this.It)}Et(e,n,i){let r=e.add(n.multiply(Ts.fromNumber(i)));return r.compare(RD)===1&&(r=new Ts([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const n=_w(e),[i,r]=ww(n);for(let o=0;o<this.hashCount;o++){const l=this.Et(i,r,o);if(!this.At(l))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new _g(o,r,n);return i.forEach(c=>l.insert(c)),l}insert(e){if(this.It===0)return;const n=_w(e),[i,r]=ww(n);for(let o=0;o<this.hashCount;o++){const l=this.Et(i,r,o);this.Rt(l)}}Rt(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Do extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,sl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new ch(te.min(),r,new Fe(Ee),fi(),he())}}class sl{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new sl(i,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n,i,r){this.Pt=e,this.removedTargetIds=n,this.key=i,this.bt=r}}class US{constructor(e,n){this.targetId=e,this.Vt=n}}class jS{constructor(e,n,i=Pt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class Ew{constructor(){this.St=0,this.Dt=Sw(),this.Ct=Pt.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=he(),n=he(),i=he();return this.Dt.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Y()}}),new sl(this.Ct,this.xt,e,n,i)}Ft(){this.Nt=!1,this.Dt=Sw()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class OD{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=fi(),this.zt=Tw(),this.Wt=new Fe(Ee)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const i=this.Zt(n);switch(e.state){case 0:this.te(n)&&i.$t(e.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(e.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(n);break;case 3:this.te(n)&&(i.Kt(),i.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),i.$t(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((i,r)=>{this.te(r)&&n(r)})}ne(e){var n;const i=e.targetId,r=e.Vt.count,o=this.se(i);if(o){const l=o.target;if(vp(l))if(r===0){const c=new G(l.path);this.Yt(i,c,Et.newNoDocument(c,te.min()))}else Re(r===1);else{const c=this.ie(i);if(c!==r){const h=this.re(e,c);if(h!==0){this.ee(i);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(i,f)}(n=yg.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(f,m,v){var y,T,C,k,M,S;const _={localCacheCount:m,existenceFilterCount:v.count},w=v.unchangedNames;return w&&(_.bloomFilter={applied:f===0,hashCount:(y=w==null?void 0:w.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(k=(C=(T=w==null?void 0:w.bits)===null||T===void 0?void 0:T.bitmap)===null||C===void 0?void 0:C.length)!==null&&k!==void 0?k:0,padding:(S=(M=w==null?void 0:w.bits)===null||M===void 0?void 0:M.padding)!==null&&S!==void 0?S:0}),_}(h,c,e.Vt))}}}}re(e,n){const{unchangedNames:i,count:r}=e.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:o="",padding:l=0},hashCount:c=0}=i;let h,f;try{h=Or(o).toUint8Array()}catch(m){if(m instanceof gS)return bs("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw m}try{f=new _g(h,l,c)}catch(m){return bs(m instanceof Do?"BloomFilter error: ":"Applying bloom filter failed: ",m),1}return f.It===0?1:r!==n-this.oe(e.targetId,f)?2:0}oe(e,n){const i=this.Gt.getRemoteKeysForTarget(e);let r=0;return i.forEach(o=>{const l=this.Gt.ue(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;n.vt(c)||(this.Yt(e,o,null),r++)}),r}ce(e){const n=new Map;this.Qt.forEach((o,l)=>{const c=this.se(l);if(c){if(o.current&&vp(c.target)){const h=new G(c.target.path);this.jt.get(h)!==null||this.ae(l,h)||this.Yt(l,h,Et.newNoDocument(h,e))}o.Mt&&(n.set(l,o.Ot()),o.Ft())}});let i=he();this.zt.forEach((o,l)=>{let c=!0;l.forEachWhile(h=>{const f=this.se(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(o))}),this.jt.forEach((o,l)=>l.setReadTime(e));const r=new ch(e,n,this.Wt,this.jt,i);return this.jt=fi(),this.zt=Tw(),this.Wt=new Fe(Ee),r}Jt(e,n){if(!this.te(e))return;const i=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,i),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,i){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,n)?r.Bt(n,1):r.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),i&&(this.jt=this.jt.insert(n,i))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new Ew,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new kt(Ee),this.zt=this.zt.insert(e,n)),n}te(e){const n=this.se(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Ew),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function Tw(){return new Fe(G.comparator)}function Sw(){return new Fe(G.comparator)}const DD=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),MD=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),bD=(()=>({and:"AND",or:"OR"}))();class $D{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ep(t,e){return t.useProto3Json||sh(e)?e:{value:e}}function mc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zD(t,e){return mc(t,e.toTimestamp())}function Fn(t){return Re(!!t),te.fromTimestamp(function(e){const n=Gi(e);return new Je(n.seconds,n.nanos)}(t))}function wg(t,e){return function(n){return new Ae(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function HS(t){const e=Ae.fromString(t);return Re(KS(e)),e}function Tp(t,e){return wg(t.databaseId,e.path)}function Zd(t,e){const n=HS(e);if(n.get(1)!==t.databaseId.projectId)throw new W(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(WS(n))}function Sp(t,e){return wg(t.databaseId,e)}function FD(t){const e=HS(t);return e.length===4?Ae.emptyPath():WS(e)}function Cp(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WS(t){return Re(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Cw(t,e,n){return{name:Tp(t,e),fields:n.value.mapValue.fields}}function BD(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(h,f){return h.useProto3Json?(Re(f===void 0||typeof f=="string"),Pt.fromBase64String(f||"")):(Re(f===void 0||f instanceof Uint8Array),Pt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(h){const f=h.code===void 0?R.UNKNOWN:BS(h.code);return new W(f,h.message||"")}(l);n=new jS(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Zd(t,i.document.name),o=Fn(i.document.updateTime),l=i.document.createTime?Fn(i.document.createTime):te.min(),c=new Bt({mapValue:{fields:i.document.fields}}),h=Et.newFoundDocument(r,o,l,c),f=i.targetIds||[],m=i.removedTargetIds||[];n=new Su(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Zd(t,i.document),o=i.readTime?Fn(i.readTime):te.min(),l=Et.newNoDocument(r,o),c=i.removedTargetIds||[];n=new Su([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Zd(t,i.document),o=i.removedTargetIds||[];n=new Su([],o,r,null)}else{if(!("filter"in e))return Y();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new LD(r,o),c=i.targetId;n=new US(c,l)}}return n}function UD(t,e){let n;if(e instanceof rl)n={update:Cw(t,e.key,e.value)};else if(e instanceof FS)n={delete:Tp(t,e.key)};else if(e instanceof nr)n={update:Cw(t,e.key,e.data),updateMask:QD(e.fieldMask)};else{if(!(e instanceof ID))return Y();n={verify:Tp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,o){const l=o.transform;if(l instanceof fc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Na)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ra)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof pc)return{fieldPath:o.field.canonicalString(),increment:l.gt};throw Y()}(0,i))),e.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:zD(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Y()}(t,e.precondition)),n}function jD(t,e){return t&&t.length>0?(Re(e!==void 0),t.map(n=>function(i,r){let o=i.updateTime?Fn(i.updateTime):Fn(r);return o.isEqual(te.min())&&(o=Fn(r)),new SD(o,i.transformResults||[])}(n,e))):[]}function VD(t,e){return{documents:[Sp(t,e.path)]}}function HD(t,e){const n={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(n.parent=Sp(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Sp(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(h){if(h.length!==0)return ZS(Sn.create(h,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const o=function(h){if(h.length!==0)return h.map(f=>function(m){return{field:Yr(m.field),direction:ZD(m.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Ep(t,e.limit);var c;return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),n}function WD(t){let e=FD(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Re(i===1);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(m){const v=qS(m);return v instanceof Sn&&wS(v)?v.getFilters():[v]}(n.where));let l=[];n.orderBy&&(l=n.orderBy.map(m=>function(v){return new Go(Xr(v.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m)));let c=null;n.limit&&(c=function(m){let v;return v=typeof m=="object"?m.value:m,sh(v)?null:v}(n.limit));let h=null;n.startAt&&(h=function(m){const v=!!m.before,y=m.values||[];return new dc(y,v)}(n.startAt));let f=null;return n.endAt&&(f=function(m){const v=!m.before,y=m.values||[];return new dc(y,v)}(n.endAt)),hD(e,r,l,o,c,"F",h,f)}function qD(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qS(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Xr(e.unaryFilter.field);return Ge.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Xr(e.unaryFilter.field);return Ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Xr(e.unaryFilter.field);return Ge.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Xr(e.unaryFilter.field);return Ge.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(e){return Ge.create(Xr(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Sn.create(e.compositeFilter.filters.map(n=>qS(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return Y()}}(e.compositeFilter.op))}(t):Y()}function ZD(t){return DD[t]}function KD(t){return MD[t]}function GD(t){return bD[t]}function Yr(t){return{fieldPath:t.canonicalString()}}function Xr(t){return Tt.fromServerFormat(t.fieldPath)}function ZS(t){return t instanceof Ge?function(e){if(e.op==="=="){if(cw(e.value))return{unaryFilter:{field:Yr(e.field),op:"IS_NAN"}};if(uw(e.value))return{unaryFilter:{field:Yr(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(cw(e.value))return{unaryFilter:{field:Yr(e.field),op:"IS_NOT_NAN"}};if(uw(e.value))return{unaryFilter:{field:Yr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yr(e.field),op:KD(e.op),value:e.value}}}(t):t instanceof Sn?function(e){const n=e.getFilters().map(i=>ZS(i));return n.length===1?n[0]:{compositeFilter:{op:GD(e.op),filters:n}}}(t):Y()}function QD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function KS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n,i,r,o=te.min(),l=te.min(),c=Pt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new Oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e){this.fe=e}}function XD(t){const e=WD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_p(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(){this.rn=new eM}addToCollectionParentIndex(e,n){return this.rn.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Ki.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Ki.min())}updateCollectionGroup(e,n,i){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class eM{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new kt(Ae.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new kt(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Bs(0)}static Mn(){return new Bs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(){this.changes=new Ys(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?z.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Yo(i.mutation,r,Zt.empty(),Je.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,he()).next(()=>i))}getLocalViewOfDocuments(e,n,i=he()){const r=vr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let l=Oo();return o.forEach((c,h)=>{l=l.insert(c,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=vr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,he()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((l,c)=>{n.set(l,c)})})}computeViews(e,n,i,r){let o=fi();const l=Qo(),c=Qo();return n.forEach((h,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof nr)?o=o.insert(f.key,f):m!==void 0?(l.set(f.key,m.mutation.getFieldMask()),Yo(m.mutation,f,m.mutation.getFieldMask(),Je.now())):l.set(f.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,m)=>l.set(f,m)),n.forEach((f,m)=>{var v;return c.set(f,new nM(m,(v=l.get(f))!==null&&v!==void 0?v:null))}),c))}recalculateAndSaveOverlays(e,n){const i=Qo();let r=new Fe((l,c)=>l-c),o=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const c of l)c.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let m=i.get(h)||Zt.empty();m=c.applyToLocalView(f,m),i.set(h,m);const v=(r.get(c.batchId)||he()).add(h);r=r.insert(c.batchId,v)})}).next(()=>{const l=[],c=r.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),f=h.key,m=h.value,v=AS();m.forEach(y=>{if(!o.has(y)){const T=$S(n.get(y),i.get(y));T!==null&&v.set(y,T),o=o.add(y)}}),l.push(this.documentOverlayCache.saveOverlays(e,f,v))}return z.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i){return function(r){return G.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i):this.getDocumentsMatchingCollectionQuery(e,n,i)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):z.resolve(vr());let c=-1,h=o;return l.next(f=>z.forEach(f,(m,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),o.get(m)?z.resolve():this.remoteDocumentCache.getEntry(e,m).next(y=>{h=h.insert(m,y)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,he())).next(m=>({batchId:c,changes:LS(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(i=>{let r=Oo();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i){const r=n.collectionGroup;let o=Oo();return this.indexManager.getCollectionParents(e,r).next(l=>z.forEach(l,c=>{const h=function(f,m){return new il(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(r));return this.getDocumentsMatchingCollectionQuery(e,h,i).next(f=>{f.forEach((m,v)=>{o=o.insert(m,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r))).next(o=>{r.forEach((c,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,Et.newInvalidDocument(f)))});let l=Oo();return o.forEach((c,h)=>{const f=r.get(c);f!==void 0&&Yo(f.mutation,h,Zt.empty(),Je.now()),ah(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return z.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var i;return this.cs.set(n.id,{id:(i=n).id,version:i.version,createTime:Fn(i.createTime)}),z.resolve()}getNamedQuery(e,n){return z.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,function(i){return{name:i.name,query:XD(i.bundledQuery),readTime:Fn(i.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(){this.overlays=new Fe(G.comparator),this.ls=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const i=vr();return z.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.we(e,n,o)}),z.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.ls.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.ls.delete(i)),z.resolve()}getOverlaysForCollection(e,n,i){const r=vr(),o=n.length+1,l=new G(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return z.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Fe((f,m)=>f-m);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=vr(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const c=vr(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>c.set(f,m)),!(c.size()>=r)););return z.resolve(c)}we(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.ls.get(r.largestBatchId).delete(i.key);this.ls.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new PD(n,i));let o=this.ls.get(n);o===void 0&&(o=he(),this.ls.set(n,o)),this.ls.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(){this.fs=new kt(it.ds),this.ws=new kt(it._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const i=new it(e,n);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.ys(new it(e,n))}ps(e,n){e.forEach(i=>this.removeReference(i,n))}Is(e){const n=new G(new Ae([])),i=new it(n,e),r=new it(n,e+1),o=[];return this.ws.forEachInRange([i,r],l=>{this.ys(l),o.push(l.key)}),o}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new G(new Ae([])),i=new it(n,e),r=new it(n,e+1);let o=he();return this.ws.forEachInRange([i,r],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new it(e,0),i=this.fs.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class it{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return G.comparator(e.key,n.key)||Ee(e.As,n.As)}static _s(e,n){return Ee(e.As,n.As)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new kt(it.ds)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new xD(o,n,i,r);this.mutationQueue.push(l);for(const c of r)this.Rs=this.Rs.add(new it(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return z.resolve(l)}lookupMutationBatch(e,n){return z.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.bs(i),o=r<0?0:r;return z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new it(n,0),r=new it(n,Number.POSITIVE_INFINITY),o=[];return this.Rs.forEachInRange([i,r],l=>{const c=this.Ps(l.As);o.push(c)}),z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new kt(Ee);return n.forEach(r=>{const o=new it(r,0),l=new it(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([o,l],c=>{i=i.add(c.As)})}),z.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;G.isDocumentKey(o)||(o=o.child(""));const l=new it(new G(o),0);let c=new kt(Ee);return this.Rs.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(h.As)),!0)},l),z.resolve(this.Vs(c))}Vs(e){const n=[];return e.forEach(i=>{const r=this.Ps(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Re(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Rs;return z.forEach(n.mutations,r=>{const o=new it(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=i})}Cn(e){}containsKey(e,n){const i=new it(n,0),r=this.Rs.firstAfterOrEqual(i);return z.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Ss(e,n){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e){this.Ds=e,this.docs=new Fe(G.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,l=this.Ds(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return z.resolve(i?i.document.mutableCopy():Et.newInvalidDocument(n))}getEntries(e,n){let i=fi();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Et.newInvalidDocument(r))}),z.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=fi();const l=n.path,c=new G(l.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||KO(ZO(m),i)<=0||(r.has(m.key)||ah(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return z.resolve(o)}getAllFromCollectionGroup(e,n,i,r){Y()}Cs(e,n){return z.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new lM(this)}getSize(e){return z.resolve(this.size)}}class lM extends tM{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.os.addEntry(e,r)):this.os.removeEntry(i)}),z.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e){this.persistence=e,this.xs=new Ys(n=>fg(n),pg),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Eg,this.targetCount=0,this.Ms=Bs.kn()}forEachTarget(e,n){return this.xs.forEach((i,r)=>n(r)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Ns&&(this.Ns=n),z.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new Bs(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Fn(n),z.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.xs.forEach((l,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.xs.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),z.waitFor(o).next(()=>r)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const i=this.xs.get(n)||null;return z.resolve(i)}addMatchingKeys(e,n,i){return this.ks.gs(n,i),z.resolve()}removeMatchingKeys(e,n,i){this.ks.ps(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(l=>{o.push(r.markPotentiallyOrphaned(e,l))}),z.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),z.resolve()}getMatchingKeysForTargetId(e,n){const i=this.ks.Es(n);return z.resolve(i)}containsKey(e,n){return z.resolve(this.ks.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e,n){this.$s={},this.overlays={},this.Os=new ug(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new uM(this),this.indexManager=new JD,this.remoteDocumentCache=function(i){return new aM(i)}(i=>this.referenceDelegate.Ls(i)),this.serializer=new YD(n),this.qs=new rM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.$s[e.toKey()];return i||(i=new oM(n,this.referenceDelegate),this.$s[e.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,i){Z("MemoryPersistence","Starting transaction:",e);const r=new hM(this.Os.next());return this.referenceDelegate.Us(),i(r).next(o=>this.referenceDelegate.Ks(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Gs(e,n){return z.or(Object.values(this.$s).map(i=>()=>i.containsKey(e,n)))}}class hM extends QO{constructor(e){super(),this.currentSequenceNumber=e}}class Tg{constructor(e){this.persistence=e,this.Qs=new Eg,this.js=null}static zs(e){return new Tg(e)}get Ws(){if(this.js)return this.js;throw Y()}addReference(e,n,i){return this.Qs.addReference(i,n),this.Ws.delete(i.toString()),z.resolve()}removeReference(e,n,i){return this.Qs.removeReference(i,n),this.Ws.add(i.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),z.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(r=>this.Ws.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Ws.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Ws,i=>{const r=G.fromPath(i);return this.Hs(e,r).next(o=>{o||n.removeEntry(r,te.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(i=>{i?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return z.or([()=>z.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Fi=i,this.Bi=r}static Li(e,n){let i=he(),r=he();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Sg(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,i,r){return this.Ki(e,n).next(o=>o||this.Gi(e,n,r,i)).next(o=>o||this.Qi(e,n))}Ki(e,n){if(pw(n))return z.resolve(null);let i=di(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=_p(n,null,"F"),i=di(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=he(...o);return this.Ui.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.ji(n,c);return this.zi(n,f,l,h.readTime)?this.Ki(e,_p(n,null,"F")):this.Wi(e,f,n,h)}))})))}Gi(e,n,i,r){return pw(n)||r.isEqual(te.min())?this.Qi(e,n):this.Ui.getDocuments(e,i).next(o=>{const l=this.ji(n,o);return this.zi(n,l,i,r)?this.Qi(e,n):(rw()<=we.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),wp(n)),this.Wi(e,l,n,qO(r,-1)))})}ji(e,n){let i=new kt(xS(e));return n.forEach((r,o)=>{ah(e,o)&&(i=i.add(o))}),i}zi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Qi(e,n){return rw()<=we.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",wp(n)),this.Ui.getDocumentsMatchingQuery(e,n,Ki.min())}Wi(e,n,i,r){return this.Ui.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e,n,i,r){this.persistence=e,this.Hi=n,this.serializer=r,this.Ji=new Fe(Ee),this.Yi=new Ys(o=>fg(o),pg),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(i)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iM(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function pM(t,e,n,i){return new fM(t,e,n,i)}async function GS(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.tr(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],c=[];let h=he();for(const f of r){l.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of o){c.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return n.localDocuments.getDocuments(i,h).next(f=>({er:f,removedBatchIds:l,addedBatchIds:c}))})})}function mM(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Zi.newChangeBuffer({trackRemovals:!0});return function(l,c,h,f){const m=h.batch,v=m.keys();let y=z.resolve();return v.forEach(T=>{y=y.next(()=>f.getEntry(c,T)).next(C=>{const k=h.docVersions.get(T);Re(k!==null),C.version.compareTo(k)<0&&(m.applyToRemoteDocument(C,h),C.isValidDocument()&&(C.setReadTime(h.commitVersion),f.addEntry(C)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let c=he();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function QS(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function gM(t,e){const n=oe(t),i=e.snapshotVersion;let r=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.Zi.newChangeBuffer({trackRemovals:!0});r=n.Ji;const c=[];e.targetChanges.forEach((m,v)=>{const y=r.get(v);if(!y)return;c.push(n.Bs.removeMatchingKeys(o,m.removedDocuments,v).next(()=>n.Bs.addMatchingKeys(o,m.addedDocuments,v)));let T=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?T=T.withResumeToken(Pt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,i)),r=r.insert(v,T),function(C,k,M){return C.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(y,T,m)&&c.push(n.Bs.updateTargetData(o,T))});let h=fi(),f=he();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(vM(o,l,e.documentUpdates).next(m=>{h=m.nr,f=m.sr})),!i.isEqual(te.min())){const m=n.Bs.getLastRemoteSnapshotVersion(o).next(v=>n.Bs.setTargetsMetadata(o,o.currentSequenceNumber,i));c.push(m)}return z.waitFor(c).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Ji=r,o))}function vM(t,e,n){let i=he(),r=he();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=fi();return n.forEach((c,h)=>{const f=o.get(c);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),h.isNoDocument()&&h.version.isEqual(te.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):Z("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",h.version)}),{nr:l,sr:r}})}function yM(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function _M(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Bs.getTargetData(i,e).next(o=>o?(r=o,z.resolve(r)):n.Bs.allocateTargetId(i).next(l=>(r=new Oi(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Bs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ji.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(i.targetId,i),n.Yi.set(e,i.targetId)),i})}async function kp(t,e,n){const i=oe(t),r=i.Ji.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,r))}catch(l){if(!nl(l))throw l;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ji=i.Ji.remove(e),i.Yi.delete(r.target)}function kw(t,e,n){const i=oe(t);let r=te.min(),o=he();return i.persistence.runTransaction("Execute query","readonly",l=>function(c,h,f){const m=oe(c),v=m.Yi.get(f);return v!==void 0?z.resolve(m.Ji.get(v)):m.Bs.getTargetData(h,f)}(i,l,di(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(l,c.targetId).next(h=>{o=h})}).next(()=>i.Hi.getDocumentsMatchingQuery(l,e,n?r:te.min(),n?o:he())).next(c=>(wM(i,dD(e),c),{documents:c,ir:o})))}function wM(t,e,n){let i=t.Xi.get(e)||te.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Xi.set(e,i)}class Iw{constructor(){this.activeTargetIds=yD()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class EM{constructor(){this.Hr=new Iw,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,i){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Iw,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu=null;function Kd(){return eu===null?eu=268435456+Math.round(2147483648*Math.random()):eu++,"0x"+eu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt="WebChannelConnection";class kM extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.mo=n+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,i,r,o){const l=Kd(),c=this.To(e,n);Z("RestConnection",`Sending RPC '${e}' ${l}:`,c,i);const h={};return this.Eo(h,r,o),this.Ao(e,c,h,i).then(f=>(Z("RestConnection",`Received RPC '${e}' ${l}: `,f),f),f=>{throw bs("RestConnection",`RPC '${e}' ${l} failed with error: `,f,"url: ",c,"request:",i),f})}vo(e,n,i,r,o,l){return this.Io(e,n,i,r,o)}Eo(e,n,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+Qs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}To(e,n){const i=SM[e];return`${this.mo}/v1/${n}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,i,r){const o=Kd();return new Promise((l,c)=>{const h=new MO;h.setWithCredentials(!0),h.listenOnce(RO.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case qd.NO_ERROR:const m=h.getResponseJson();Z(yt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case qd.TIMEOUT:Z(yt,`RPC '${e}' ${o} timed out`),c(new W(R.DEADLINE_EXCEEDED,"Request time out"));break;case qd.HTTP_ERROR:const v=h.getStatus();if(Z(yt,`RPC '${e}' ${o} failed with status:`,v,"response text:",h.getResponseText()),v>0){let y=h.getResponseJson();Array.isArray(y)&&(y=y[0]);const T=y==null?void 0:y.error;if(T&&T.status&&T.message){const C=function(k){const M=k.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(M)>=0?M:R.UNKNOWN}(T.status);c(new W(C,T.message))}else c(new W(R.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new W(R.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{Z(yt,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(r);Z(yt,`RPC '${e}' ${o} sending request:`,r),h.send(n,"POST",f,i,15)})}Ro(e,n,i){const r=Kd(),o=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=AO(),c=NO(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.xmlHttpFactory=new DO({})),this.Eo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const m=o.join("");Z(yt,`Creating RPC '${e}' stream ${r}: ${m}`,h);const v=l.createWebChannel(m,h);let y=!1,T=!1;const C=new CM({ro:M=>{T?Z(yt,`Not sending because RPC '${e}' stream ${r} is closed:`,M):(y||(Z(yt,`Opening RPC '${e}' stream ${r} transport.`),v.open(),y=!0),Z(yt,`RPC '${e}' stream ${r} sending:`,M),v.send(M))},oo:()=>v.close()}),k=(M,S,_)=>{M.listen(S,w=>{try{_(w)}catch(P){setTimeout(()=>{throw P},0)}})};return k(v,Ql.EventType.OPEN,()=>{T||Z(yt,`RPC '${e}' stream ${r} transport opened.`)}),k(v,Ql.EventType.CLOSE,()=>{T||(T=!0,Z(yt,`RPC '${e}' stream ${r} transport closed`),C.wo())}),k(v,Ql.EventType.ERROR,M=>{T||(T=!0,bs(yt,`RPC '${e}' stream ${r} transport errored:`,M),C.wo(new W(R.UNAVAILABLE,"The operation could not be completed")))}),k(v,Ql.EventType.MESSAGE,M=>{var S;if(!T){const _=M.data[0];Re(!!_);const w=_,P=w.error||((S=w[0])===null||S===void 0?void 0:S.error);if(P){Z(yt,`RPC '${e}' stream ${r} received error:`,P);const b=P.status;let B=function(H){const ce=qe[H];if(ce!==void 0)return BS(ce)}(b),U=P.message;B===void 0&&(B=R.INTERNAL,U="Unknown error status: "+b+" with message "+P.message),T=!0,C.wo(new W(B,U)),v.close()}else Z(yt,`RPC '${e}' stream ${r} received:`,_),C._o(_)}}),k(c,OO.STAT_EVENT,M=>{M.stat===nw.PROXY?Z(yt,`RPC '${e}' stream ${r} detected buffering proxy`):M.stat===nw.NOPROXY&&Z(yt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{C.fo()},0),C}}function Gd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(t){return new $D(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,n,i=1e3,r=1.5,o=6e4){this.ii=e,this.timerId=n,this.Po=i,this.bo=r,this.Vo=o,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),r=Math.max(0,n-i);r>0&&Z("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,n,i,r,o,l,c,h){this.ii=e,this.$o=i,this.Oo=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new YS(e,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(hi(n.toString()),hi("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Fo===n&&this.Zo(i,r)},i=>{e(()=>{const r=new W(R.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(r)})})}Zo(e,n){const i=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(r=>{i(()=>this.tu(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class IM extends XS{constructor(e,n,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=BD(this.serializer,e),i=function(r){if(!("targetChange"in r))return te.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?Fn(o.readTime):te.min()}(e);return this.listener.nu(n,i)}su(e){const n={};n.database=Cp(this.serializer),n.addTarget=function(r,o){let l;const c=o.target;if(l=vp(c)?{documents:VD(r,c)}:{query:HD(r,c)},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=VS(r,o.resumeToken);const h=Ep(r,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(te.min())>0){l.readTime=mc(r,o.snapshotVersion.toTimestamp());const h=Ep(r,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const i=qD(this.serializer,e);i&&(n.labels=i),this.Wo(n)}iu(e){const n={};n.database=Cp(this.serializer),n.removeTarget=e,this.Wo(n)}}class xM extends XS{constructor(e,n,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(Re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=jD(e.writeResults,e.commitTime),i=Fn(e.commitTime);return this.listener.cu(i,n)}return Re(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Cp(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>UD(this.serializer,i))};this.Wo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new W(R.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Io(e,n,i,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new W(R.UNKNOWN,r.toString())})}vo(e,n,i,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.vo(e,n,i,o,l,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(R.UNKNOWN,o.toString())})}terminate(){this.lu=!0}}class LM{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(hi(n),this.mu=!1):Z("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=o,this.Pu.Yr(l=>{i.enqueueAndForget(async()=>{Fr(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=oe(c);h.vu.add(4),await ol(h),h.bu.set("Unknown"),h.vu.delete(4),await dh(h)}(this))})}),this.bu=new LM(i,r)}}async function dh(t){if(Fr(t))for(const e of t.Ru)await e(!0)}async function ol(t){for(const e of t.Ru)await e(!1)}function JS(t,e){const n=oe(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),Ig(n)?kg(n):Xs(n).Ko()&&Cg(n,e))}function eC(t,e){const n=oe(t),i=Xs(n);n.Au.delete(e),i.Ko()&&tC(n,e),n.Au.size===0&&(i.Ko()?i.jo():Fr(n)&&n.bu.set("Unknown"))}function Cg(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xs(t).su(e)}function tC(t,e){t.Vu.qt(e),Xs(t).iu(e)}function kg(t){t.Vu=new OD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),Xs(t).start(),t.bu.gu()}function Ig(t){return Fr(t)&&!Xs(t).Uo()&&t.Au.size>0}function Fr(t){return oe(t).vu.size===0}function nC(t){t.Vu=void 0}async function NM(t){t.Au.forEach((e,n)=>{Cg(t,e)})}async function RM(t,e){nC(t),Ig(t)?(t.bu.Iu(e),kg(t)):t.bu.set("Unknown")}async function OM(t,e,n){if(t.bu.set("Online"),e instanceof jS&&e.state===2&&e.cause)try{await async function(i,r){const o=r.cause;for(const l of r.targetIds)i.Au.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Au.delete(l),i.Vu.removeTarget(l))}(t,e)}catch(i){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await gc(t,i)}else if(e instanceof Su?t.Vu.Ht(e):e instanceof US?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(te.min()))try{const i=await QS(t.localStore);n.compareTo(i)>=0&&await function(r,o){const l=r.Vu.ce(o);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const f=r.Au.get(h);f&&r.Au.set(h,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,h)=>{const f=r.Au.get(c);if(!f)return;r.Au.set(c,f.withResumeToken(Pt.EMPTY_BYTE_STRING,f.snapshotVersion)),tC(r,c);const m=new Oi(f.target,c,h,f.sequenceNumber);Cg(r,m)}),r.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(i){Z("RemoteStore","Failed to raise snapshot:",i),await gc(t,i)}}async function gc(t,e,n){if(!nl(e))throw e;t.vu.add(1),await ol(t),t.bu.set("Offline"),n||(n=()=>QS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await dh(t)})}function iC(t,e){return e().catch(n=>gc(t,n,e))}async function fh(t){const e=oe(t),n=Qi(e);let i=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;DM(e);)try{const r=await yM(e.localStore,i);if(r===null){e.Eu.length===0&&n.jo();break}i=r.batchId,MM(e,r)}catch(r){await gc(e,r)}rC(e)&&sC(e)}function DM(t){return Fr(t)&&t.Eu.length<10}function MM(t,e){t.Eu.push(e);const n=Qi(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function rC(t){return Fr(t)&&!Qi(t).Uo()&&t.Eu.length>0}function sC(t){Qi(t).start()}async function bM(t){Qi(t).hu()}async function $M(t){const e=Qi(t);for(const n of t.Eu)e.uu(n.mutations)}async function zM(t,e,n){const i=t.Eu.shift(),r=vg.from(i,e,n);await iC(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await fh(t)}async function FM(t,e){e&&Qi(t).ou&&await async function(n,i){if(r=i.code,AD(r)&&r!==R.ABORTED){const o=n.Eu.shift();Qi(n).Qo(),await iC(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i)),await fh(n)}var r}(t,e),rC(t)&&sC(t)}async function Pw(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const i=Fr(n);n.vu.add(3),await ol(n),i&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await dh(n)}async function BM(t,e){const n=oe(t);e?(n.vu.delete(2),await dh(n)):e||(n.vu.add(2),await ol(n),n.bu.set("Unknown"))}function Xs(t){return t.Su||(t.Su=function(e,n,i){const r=oe(e);return r.fu(),new IM(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{uo:NM.bind(null,t),ao:RM.bind(null,t),nu:OM.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),Ig(t)?kg(t):t.bu.set("Unknown")):(await t.Su.stop(),nC(t))})),t.Su}function Qi(t){return t.Du||(t.Du=function(e,n,i){const r=oe(e);return r.fu(),new xM(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{uo:bM.bind(null,t),ao:FM.bind(null,t),au:$M.bind(null,t),cu:zM.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await fh(t)):(await t.Du.stop(),t.Eu.length>0&&(Z("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,n,i,r,o){const l=Date.now()+i,c=new xg(e,n,l,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pg(t,e){if(hi("AsyncQueue",`${e}: ${t}`),nl(t))return new W(R.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this.comparator=e?(n,i)=>e(n,i)||G.comparator(n.key,i.key):(n,i)=>G.comparator(n.key,i.key),this.keyedMap=Oo(),this.sortedSet=new Fe(this.comparator)}static emptySet(e){return new Cs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Cs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Cs;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(){this.Cu=new Fe(G.comparator)}track(e){const n=e.doc.key,i=this.Cu.get(n);i?e.type!==0&&i.type===3?this.Cu=this.Cu.insert(n,e):e.type===3&&i.type!==1?this.Cu=this.Cu.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Cu=this.Cu.remove(n):e.type===1&&i.type===2?this.Cu=this.Cu.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):Y():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,i)=>{e.push(i)}),e}}class Us{constructor(e,n,i,r,o,l,c,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const l=[];return n.forEach(c=>{l.push({type:0,doc:c})}),new Us(e,n,Cs.emptySet(n),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(){this.Nu=void 0,this.listeners=[]}}class jM{constructor(){this.queries=new Ys(e=>IS(e),oh),this.onlineState="Unknown",this.ku=new Set}}async function oC(t,e){const n=oe(t),i=e.query;let r=!1,o=n.queries.get(i);if(o||(r=!0,o=new UM),r)try{o.Nu=await n.onListen(i)}catch(l){const c=Pg(l,`Initialization of query '${wp(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.listeners.push(e),e.Mu(n.onlineState),o.Nu&&e.$u(o.Nu)&&Lg(n)}async function aC(t,e){const n=oe(t),i=e.query;let r=!1;const o=n.queries.get(i);if(o){const l=o.listeners.indexOf(e);l>=0&&(o.listeners.splice(l,1),r=o.listeners.length===0)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function VM(t,e){const n=oe(t);let i=!1;for(const r of e){const o=r.query,l=n.queries.get(o);if(l){for(const c of l.listeners)c.$u(r)&&(i=!0);l.Nu=r}}i&&Lg(n)}function HM(t,e,n){const i=oe(t),r=i.queries.get(e);if(r)for(const o of r.listeners)o.onError(n);i.queries.delete(e)}function Lg(t){t.ku.forEach(e=>{e.next()})}class lC{constructor(e,n,i){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Us(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){if(!e.fromCache)return!0;const i=n!=="Offline";return(!this.options.Ku||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const n=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Uu(e){e=Us.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.key=e}}class cC{constructor(e){this.key=e}}class WM{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=he(),this.mutatedKeys=he(),this.tc=xS(e),this.ec=new Cs(this.tc)}get nc(){return this.Yu}sc(e,n){const i=n?n.ic:new Lw,r=n?n.ec:this.ec;let o=n?n.mutatedKeys:this.mutatedKeys,l=r,c=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,v)=>{const y=r.get(m),T=ah(this.query,v)?v:null,C=!!y&&this.mutatedKeys.has(y.key),k=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let M=!1;y&&T?y.data.isEqual(T.data)?C!==k&&(i.track({type:3,doc:T}),M=!0):this.rc(y,T)||(i.track({type:2,doc:T}),M=!0,(h&&this.tc(T,h)>0||f&&this.tc(T,f)<0)&&(c=!0)):!y&&T?(i.track({type:0,doc:T}),M=!0):y&&!T&&(i.track({type:1,doc:y}),M=!0,(h||f)&&(c=!0)),M&&(T?(l=l.add(T),o=k?o.add(m):o.delete(m)):(l=l.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{ec:l,ic:i,zi:c,mutatedKeys:o}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const o=e.ic.xu();o.sort((f,m)=>function(v,y){const T=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return T(v)-T(y)}(f.type,m.type)||this.tc(f.doc,m.doc)),this.oc(i);const l=n?this.uc():[],c=this.Zu.size===0&&this.current?1:0,h=c!==this.Xu;return this.Xu=c,o.length!==0||h?{snapshot:new Us(this.query,e.ec,r,o,e.mutatedKeys,c===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Lw,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=he(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const n=[];return e.forEach(i=>{this.Zu.has(i)||n.push(new cC(i))}),this.Zu.forEach(i=>{e.has(i)||n.push(new uC(i))}),n}hc(e){this.Yu=e.ir,this.Zu=he();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return Us.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class qM{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class ZM{constructor(e){this.key=e,this.fc=!1}}class KM{constructor(e,n,i,r,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new Ys(c=>IS(c),oh),this._c=new Map,this.mc=new Set,this.gc=new Fe(G.comparator),this.yc=new Map,this.Ic=new Eg,this.Tc={},this.Ec=new Map,this.Ac=Bs.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function GM(t,e){const n=sb(t);let i,r;const o=n.wc.get(e);if(o)i=o.targetId,n.sharedClientState.addLocalQueryTarget(i),r=o.view.lc();else{const l=await _M(n.localStore,di(e)),c=n.sharedClientState.addLocalQueryTarget(l.targetId);i=l.targetId,r=await QM(n,e,i,c==="current",l.resumeToken),n.isPrimaryClient&&JS(n.remoteStore,l)}return r}async function QM(t,e,n,i,r){t.Rc=(v,y,T)=>async function(C,k,M,S){let _=k.view.sc(M);_.zi&&(_=await kw(C.localStore,k.query,!1).then(({documents:b})=>k.view.sc(b,_)));const w=S&&S.targetChanges.get(k.targetId),P=k.view.applyChanges(_,C.isPrimaryClient,w);return Nw(C,k.targetId,P.cc),P.snapshot}(t,v,y,T);const o=await kw(t.localStore,e,!0),l=new WM(e,o.ir),c=l.sc(o.documents),h=sl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=l.applyChanges(c,t.isPrimaryClient,h);Nw(t,n,f.cc);const m=new qM(e,n,l);return t.wc.set(e,m),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),f.snapshot}async function YM(t,e){const n=oe(t),i=n.wc.get(e),r=n._c.get(i.targetId);if(r.length>1)return n._c.set(i.targetId,r.filter(o=>!oh(o,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await kp(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),eC(n.remoteStore,i.targetId),Ip(n,i.targetId)}).catch(tl)):(Ip(n,i.targetId),await kp(n.localStore,i.targetId,!0))}async function XM(t,e,n){const i=ob(t);try{const r=await function(o,l){const c=oe(o),h=Je.now(),f=l.reduce((y,T)=>y.add(T.key),he());let m,v;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=fi(),C=he();return c.Zi.getEntries(y,f).next(k=>{T=k,T.forEach((M,S)=>{S.isValidDocument()||(C=C.add(M))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,T)).next(k=>{m=k;const M=[];for(const S of l){const _=kD(S,m.get(S.key).overlayedDocument);_!=null&&M.push(new nr(S.key,_,vS(_.value.mapValue),wn.exists(!0)))}return c.mutationQueue.addMutationBatch(y,h,M,l)}).next(k=>{v=k;const M=k.applyToLocalDocumentSet(m,C);return c.documentOverlayCache.saveOverlays(y,k.batchId,M)})}).then(()=>({batchId:v.batchId,changes:LS(m)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,l,c){let h=o.Tc[o.currentUser.toKey()];h||(h=new Fe(Ee)),h=h.insert(l,c),o.Tc[o.currentUser.toKey()]=h}(i,r.batchId,n),await al(i,r.changes),await fh(i.remoteStore)}catch(r){const o=Pg(r,"Failed to persist write");n.reject(o)}}async function hC(t,e){const n=oe(t);try{const i=await gM(n.localStore,e);e.targetChanges.forEach((r,o)=>{const l=n.yc.get(o);l&&(Re(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?l.fc=!0:r.modifiedDocuments.size>0?Re(l.fc):r.removedDocuments.size>0&&(Re(l.fc),l.fc=!1))}),await al(n,i,e)}catch(i){await tl(i)}}function Aw(t,e,n){const i=oe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.wc.forEach((o,l)=>{const c=l.view.Mu(e);c.snapshot&&r.push(c.snapshot)}),function(o,l){const c=oe(o);c.onlineState=l;let h=!1;c.queries.forEach((f,m)=>{for(const v of m.listeners)v.Mu(l)&&(h=!0)}),h&&Lg(c)}(i.eventManager,e),r.length&&i.dc.nu(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function JM(t,e,n){const i=oe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.yc.get(e),o=r&&r.key;if(o){let l=new Fe(G.comparator);l=l.insert(o,Et.newNoDocument(o,te.min()));const c=he().add(o),h=new ch(te.min(),new Map,new Fe(Ee),l,c);await hC(i,h),i.gc=i.gc.remove(o),i.yc.delete(e),Ag(i)}else await kp(i.localStore,e,!1).then(()=>Ip(i,e,n)).catch(tl)}async function eb(t,e){const n=oe(t),i=e.batch.batchId;try{const r=await mM(n.localStore,e);fC(n,i,null),dC(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await al(n,r)}catch(r){await tl(r)}}async function tb(t,e,n){const i=oe(t);try{const r=await function(o,l){const c=oe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return c.mutationQueue.lookupMutationBatch(h,l).next(m=>(Re(m!==null),f=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>c.localDocuments.getDocuments(h,f))})}(i.localStore,e);fC(i,e,n),dC(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await al(i,r)}catch(r){await tl(r)}}function dC(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function fC(t,e,n){const i=oe(t);let r=i.Tc[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Tc[i.currentUser.toKey()]=r}}function Ip(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t._c.get(e))t.wc.delete(i),n&&t.dc.Pc(i,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(i=>{t.Ic.containsKey(i)||pC(t,i)})}function pC(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);n!==null&&(eC(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),Ag(t))}function Nw(t,e,n){for(const i of n)i instanceof uC?(t.Ic.addReference(i.key,e),nb(t,i)):i instanceof cC?(Z("SyncEngine","Document no longer in limbo: "+i.key),t.Ic.removeReference(i.key,e),t.Ic.containsKey(i.key)||pC(t,i.key)):Y()}function nb(t,e){const n=e.key,i=n.path.canonicalString();t.gc.get(n)||t.mc.has(i)||(Z("SyncEngine","New document in limbo: "+n),t.mc.add(i),Ag(t))}function Ag(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new G(Ae.fromString(e)),i=t.Ac.next();t.yc.set(i,new ZM(n)),t.gc=t.gc.insert(n,i),JS(t.remoteStore,new Oi(di(mg(n.path)),i,"TargetPurposeLimboResolution",ug.ct))}}async function al(t,e,n){const i=oe(t),r=[],o=[],l=[];i.wc.isEmpty()||(i.wc.forEach((c,h)=>{l.push(i.Rc(h,e,n).then(f=>{if((f||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(h.targetId,f!=null&&f.fromCache?"not-current":"current"),f){r.push(f);const m=Sg.Li(h.targetId,f);o.push(m)}}))}),await Promise.all(l),i.dc.nu(r),await async function(c,h){const f=oe(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>z.forEach(h,v=>z.forEach(v.Fi,y=>f.persistence.referenceDelegate.addReference(m,v.targetId,y)).next(()=>z.forEach(v.Bi,y=>f.persistence.referenceDelegate.removeReference(m,v.targetId,y)))))}catch(m){if(!nl(m))throw m;Z("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const v=m.targetId;if(!m.fromCache){const y=f.Ji.get(v),T=y.snapshotVersion,C=y.withLastLimboFreeSnapshotVersion(T);f.Ji=f.Ji.insert(v,C)}}}(i.localStore,o))}async function ib(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const i=await GS(n.localStore,e);n.currentUser=e,function(r,o){r.Ec.forEach(l=>{l.forEach(c=>{c.reject(new W(R.CANCELLED,o))})}),r.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await al(n,i.er)}}function rb(t,e){const n=oe(t),i=n.yc.get(e);if(i&&i.fc)return he().add(i.key);{let r=he();const o=n._c.get(e);if(!o)return r;for(const l of o){const c=n.wc.get(l);r=r.unionWith(c.view.nc)}return r}}function sb(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JM.bind(null,e),e.dc.nu=VM.bind(null,e.eventManager),e.dc.Pc=HM.bind(null,e.eventManager),e}function ob(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tb.bind(null,e),e}class Rw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=hh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return pM(this.persistence,new dM,e.initialUser,this.serializer)}createPersistence(e){return new cM(Tg.zs,this.serializer)}createSharedClientState(e){return new EM}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ab{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Aw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ib.bind(null,this.syncEngine),await BM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new jM}createDatastore(e){const n=hh(e.databaseInfo.databaseId),i=(r=e.databaseInfo,new kM(r));var r;return function(o,l,c,h){return new PM(o,l,c,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return n=this.localStore,i=this.datastore,r=e.asyncQueue,o=c=>Aw(this.syncEngine,c,0),l=xw.D()?new xw:new TM,new AM(n,i,r,o,l);var n,i,r,o,l}createSyncEngine(e,n){return function(i,r,o,l,c,h,f){const m=new KM(i,r,o,l,c,h);return f&&(m.vc=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=oe(e);Z("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await ol(n),n.Pu.shutdown(),n.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):hi("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=_t.UNAUTHENTICATED,this.clientId=pS.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async o=>{Z("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(Z("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new W(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Pg(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Qd(t,e){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await GS(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ow(t,e){t.asyncQueue.verifyOperationInProgress();const n=await cb(t);Z("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener(r=>Pw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,o)=>Pw(e.remoteStore,o)),t._onlineComponents=e}function ub(t){return t.name==="FirebaseError"?t.code===R.FAILED_PRECONDITION||t.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function cb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await Qd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!ub(n))throw n;bs("Error using user provided cache. Falling back to memory cache: "+n),await Qd(t,new Rw)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await Qd(t,new Rw);return t._offlineComponents}async function gC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await Ow(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await Ow(t,new ab))),t._onlineComponents}function hb(t){return gC(t).then(e=>e.syncEngine)}async function vC(t){const e=await gC(t),n=e.eventManager;return n.onListen=GM.bind(null,e.syncEngine),n.onUnlisten=YM.bind(null,e.syncEngine),n}function db(t,e,n={}){const i=new ii;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,l,c,h){const f=new mC({next:v=>{o.enqueueAndForget(()=>aC(r,m));const y=v.docs.has(l);!y&&v.fromCache?h.reject(new W(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&v.fromCache&&c&&c.source==="server"?h.reject(new W(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),m=new lC(mg(l.path),f,{includeMetadataChanges:!0,Ku:!0});return oC(r,m)}(await vC(t),t.asyncQueue,e,n,i)),i.promise}function fb(t,e,n={}){const i=new ii;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,l,c,h){const f=new mC({next:v=>{o.enqueueAndForget(()=>aC(r,m)),v.fromCache&&c.source==="server"?h.reject(new W(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),m=new lC(l,f,{includeMetadataChanges:!0,Ku:!0});return oC(r,m)}(await vC(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t,e,n){if(!n)throw new W(R.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function pb(t,e,n,i){if(e===!0&&i===!0)throw new W(R.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Mw(t){if(!G.isDocumentKey(t))throw new W(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bw(t){if(G.isDocumentKey(t))throw new W(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ph(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function Un(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ph(t);throw new W(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new W(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new W(R.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new W(R.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new W(R.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,i=e.experimentalLongPollingOptions,n.timeoutSeconds===i.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var n,i}}class mh{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $w({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new W(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new W(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $w(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new $O;switch(n.type){case"firstParty":return new UO(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new W(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Dw.get(e);n&&(Z("ComponentProvider","Removing Datastore"),Dw.delete(e),n.terminate())}(this),Promise.resolve()}}function mb(t,e,n,i={}){var r;const o=(t=Un(t,mh))._getSettings(),l=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),i.mockUserToken){let c,h;if(typeof i.mockUserToken=="string")c=i.mockUserToken,h=_t.MOCK_USER;else{c=aA(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new W(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new _t(f)}t._authCredentials=new zO(new fS(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}}class Js{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Js(this.firestore,e,this._query)}}class Wi extends Js{constructor(e,n,i){super(e,n,mg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new G(e))}withConverter(e){return new Wi(this.firestore,e,this._path)}}function yr(t,e,...n){if(t=Dt(t),_C("collection","path",e),t instanceof mh){const i=Ae.fromString(e,...n);return bw(i),new Wi(t,null,i)}{if(!(t instanceof Ot||t instanceof Wi))throw new W(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ae.fromString(e,...n));return bw(i),new Wi(t.firestore,null,i)}}function Mo(t,e,...n){if(t=Dt(t),arguments.length===1&&(e=pS.A()),_C("doc","path",e),t instanceof mh){const i=Ae.fromString(e,...n);return Mw(i),new Ot(t,null,new G(i))}{if(!(t instanceof Ot||t instanceof Wi))throw new W(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ae.fromString(e,...n));return Mw(i),new Ot(t.firestore,t instanceof Wi?t.converter:null,new G(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new YS(this,"async_queue_retry"),this.Xc=()=>{const n=Gd();n&&Z("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=Gd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=Gd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new ii;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!nl(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(i=>{this.Wc=i,this.Hc=!1;const r=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(i);throw hi("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Hc=!1,i))));return this.Gc=n,n}enqueueAfterDelay(e,n,i){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const r=xg.createAndSchedule(this,e,n,i,o=>this.na(o));return this.zc.push(r),r}Zc(){this.Wc&&Y()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}class eo extends mh{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new gb,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||wC(this),this._firestoreClient.terminate()}}function _r(t,e){const n=typeof t=="object"?t:LE(),i=typeof t=="string"?t:e||"(default)",r=Rm(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=sA("firestore");o&&mb(r,...o)}return r}function Ng(t){return t._firestoreClient||wC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function wC(t){var e,n,i;const r=t._freezeSettings(),o=function(l,c,h,f){return new JO(l,c,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,yC(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new lb(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=r.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.cache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this._byteString=e}static fromBase64String(e){try{return new js(Pt.fromBase64String(e))}catch(n){throw new W(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new js(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=/^__.*__$/;class yb{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new nr(e,this.data,this.fieldMask,n,this.fieldTransforms):new rl(e,this.data,n,this.fieldTransforms)}}class EC{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new nr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function TC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class Dg{constructor(e,n,i,r,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.ua(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Dg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.aa({path:i,la:!1});return r.fa(e),r}da(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.aa({path:i,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return vc(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(TC(this.ca)&&vb.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class _b{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||hh(e)}ya(e,n,i,r=!1){return new Dg({ca:e,methodName:n,ga:i,path:Tt.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vh(t){const e=t._freezeSettings(),n=hh(t._databaseId);return new _b(t._databaseId,!!e.ignoreUndefinedProperties,n)}function SC(t,e,n,i,r,o={}){const l=t.ya(o.merge||o.mergeFields?2:0,e,n,r);Mg("Data must be an object, but it was:",l,i);const c=CC(i,l);let h,f;if(o.merge)h=new Zt(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const m=[];for(const v of o.mergeFields){const y=xp(e,v,n);if(!l.contains(y))throw new W(R.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);IC(m,y)||m.push(y)}h=new Zt(m),f=l.fieldTransforms.filter(v=>h.covers(v.field))}else h=null,f=l.fieldTransforms;return new yb(new Bt(c),h,f)}class yh extends Rg{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yh}}function wb(t,e,n,i){const r=t.ya(1,e,n);Mg("Data must be an object, but it was:",r,i);const o=[],l=Bt.empty();zr(i,(h,f)=>{const m=bg(e,h,n);f=Dt(f);const v=r.da(m);if(f instanceof yh)o.push(m);else{const y=ll(f,v);y!=null&&(o.push(m),l.set(m,y))}});const c=new Zt(o);return new EC(l,c,r.fieldTransforms)}function Eb(t,e,n,i,r,o){const l=t.ya(1,e,n),c=[xp(e,i,n)],h=[r];if(o.length%2!=0)throw new W(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<o.length;y+=2)c.push(xp(e,o[y])),h.push(o[y+1]);const f=[],m=Bt.empty();for(let y=c.length-1;y>=0;--y)if(!IC(f,c[y])){const T=c[y];let C=h[y];C=Dt(C);const k=l.da(T);if(C instanceof yh)f.push(T);else{const M=ll(C,k);M!=null&&(f.push(T),m.set(T,M))}}const v=new Zt(f);return new EC(m,v,l.fieldTransforms)}function Tb(t,e,n,i=!1){return ll(n,t.ya(i?4:3,e))}function ll(t,e){if(kC(t=Dt(t)))return Mg("Unsupported field value:",e,t),CC(t,e);if(t instanceof Rg)return function(n,i){if(!TC(i.ca))throw i._a(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(n,i){const r=[];let o=0;for(const l of n){let c=ll(l,i.wa(o));c==null&&(c={nullValue:"NULL_VALUE"}),r.push(c),o++}return{arrayValue:{values:r}}}(t,e)}return function(n,i){if((n=Dt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return _D(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=Je.fromDate(n);return{timestampValue:mc(i.serializer,r)}}if(n instanceof Je){const r=new Je(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:mc(i.serializer,r)}}if(n instanceof Og)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof js)return{bytesValue:VS(i.serializer,n._byteString)};if(n instanceof Ot){const r=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(r))throw i._a(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:wg(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i._a(`Unsupported field value: ${ph(n)}`)}(t,e)}function CC(t,e){const n={};return mS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zr(t,(i,r)=>{const o=ll(r,e.ha(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function kC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof Og||t instanceof js||t instanceof Ot||t instanceof Rg)}function Mg(t,e,n){if(!kC(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const i=ph(n);throw i==="an object"?e._a(t+" a custom object"):e._a(t+" "+i)}}function xp(t,e,n){if((e=Dt(e))instanceof gh)return e._internalPath;if(typeof e=="string")return bg(t,e);throw vc("Field path arguments must be of type string or ",t,!1,void 0,n)}const Sb=new RegExp("[~\\*/\\[\\]]");function bg(t,e,n){if(e.search(Sb)>=0)throw vc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gh(...e.split("."))._internalPath}catch{throw vc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vc(t,e,n,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${i}`),l&&(h+=` in document ${r}`),h+=")"),new W(R.INVALID_ARGUMENT,c+t+h)}function IC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Cb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($g("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Cb extends xC{data(){return super.data()}}function $g(t,e){return typeof e=="string"?bg(t,e):e instanceof gh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zg{}class Ib extends zg{}function xb(t,e,...n){let i=[];e instanceof zg&&i.push(e),i=i.concat(n),function(r){const o=r.filter(c=>c instanceof Fg).length,l=r.filter(c=>c instanceof _h).length;if(o>1||o>0&&l>0)throw new W(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class _h extends Ib{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new _h(e,n,i)}_apply(e){const n=this._parse(e);return PC(e._query,n),new Js(e.firestore,e.converter,yp(e._query,n))}_parse(e){const n=vh(e.firestore);return function(r,o,l,c,h,f,m){let v;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new W(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Fw(m,f);const y=[];for(const T of m)y.push(zw(c,r,T));v={arrayValue:{values:y}}}else v=zw(c,r,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Fw(m,f),v=Tb(l,o,m,f==="in"||f==="not-in");return Ge.create(h,f,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Pb(t,e,n){const i=e,r=$g("where",t);return _h._create(r,i,n)}class Fg extends zg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Fg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Sn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,r){let o=i;const l=r.getFlattenedFilters();for(const c of l)PC(o,c),o=yp(o,c)}(e._query,n),new Js(e.firestore,e.converter,yp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function zw(t,e,n){if(typeof(n=Dt(n))=="string"){if(n==="")throw new W(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kS(e)&&n.indexOf("/")!==-1)throw new W(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ae.fromString(n));if(!G.isDocumentKey(i))throw new W(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return lw(t,new G(i))}if(n instanceof Ot)return lw(t,n._key);throw new W(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ph(n)}.`)}function Fw(t,e){if(!Array.isArray(t)||t.length===0)throw new W(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PC(t,e){if(e.isInequality()){const i=gg(t),r=e.field;if(i!==null&&!i.isEqual(r))throw new W(R.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${r.toString()}'`);const o=CS(t);o!==null&&Lb(t,r,o)}const n=function(i,r){for(const o of i)for(const l of o.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Lb(t,e,n){if(!n.isEqual(e))throw new W(R.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Ab{convertValue(e,n="none"){switch(Dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return zr(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertGeoPoint(e){return new Og(Ze(e.latitude),Ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=hg(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Pa(e));default:return null}}convertTimestamp(e){const n=Gi(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ae.fromString(e);Re(KS(i));const r=new La(i.get(1),i.get(3)),o=new G(i.popFirst(5));return r.isEqual(n)||hi(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class AC extends xC{constructor(e,n,i,r,o,l){super(e,n,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Cu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field($g("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Cu extends AC{data(e={}){return super.data(e)}}class Nb{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new bo(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Cu(this._firestore,this._userDataWriter,i.key,i,new bo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new Cu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new bo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const c=new Cu(i._firestore,i._userDataWriter,l.doc.key,l.doc,new bo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:Rb(l.type),doc:c,oldIndex:h,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Rb(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(t){t=Un(t,Ot);const e=Un(t.firestore,eo);return db(Ng(e),t._key).then(n=>bb(e,t,n))}class NC extends Ab{constructor(e){super(),this.firestore=e}convertBytes(e){return new js(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}function Bg(t){t=Un(t,Js);const e=Un(t.firestore,eo),n=Ng(e),i=new NC(e);return kb(t._query),fb(n,t._query).then(r=>new Nb(e,i,t,r))}function Bw(t,e,n){t=Un(t,Ot);const i=Un(t.firestore,eo),r=LC(t.converter,e,n);return Ug(i,[SC(vh(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,wn.none())])}function Db(t,e,n,...i){t=Un(t,Ot);const r=Un(t.firestore,eo),o=vh(r);let l;return l=typeof(e=Dt(e))=="string"||e instanceof gh?Eb(o,"updateDoc",t._key,e,n,i):wb(o,"updateDoc",t._key,e),Ug(r,[l.toMutation(t._key,wn.exists(!0))])}function Mb(t,e){const n=Un(t.firestore,eo),i=Mo(t),r=LC(t.converter,e);return Ug(n,[SC(vh(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,wn.exists(!1))]).then(()=>i)}function Ug(t,e){return function(n,i){const r=new ii;return n.asyncQueue.enqueueAndForget(async()=>XM(await hb(n),i,r)),r.promise}(Ng(t),e)}function bb(t,e,n){const i=n.docs.get(e._key),r=new NC(t);return new AC(t,r,e._key,i,new bo(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){Qs=n})(Zs),Os(new Lr("firestore",(n,{instanceIdentifier:i,options:r})=>{const o=n.getProvider("app").getImmediate(),l=new eo(new FO(n.getProvider("auth-internal")),new VO(n.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new W(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new La(c.options.projectId,h)}(o,i),o);return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),Hi(iw,"3.12.2",t),Hi(iw,"3.12.2","esm2017")})();function $b(t){const[e,n]=se.useState({}),[i,r]=se.useState(0),[o,l]=se.useState(0),[c,h]=se.useState(!1);async function f(){try{const w=_r(Ri),P=Mo(yr(w,"reviews"),t.placeId.toString()),b=await Ob(P);b.exists()&&(n(b.data()),e.length!==0&&h(!0))}catch(w){console.error("Error retrieving review: ",w)}}se.useEffect(()=>{f()},[]);async function m(w){try{const P=_r(Ri),b=yr(P,"reviews"),B=`${t.placeId}`,U=Mo(b,B);await Bw(U,w)}catch(P){console.error("Error creating Document: ",P)}}async function v(w){const P=_r(Ri);try{const b=xb(yr(P,"users"),Pb("email","==",`${t.username}`));(await Bg(b)).forEach(async U=>{const H=Mo(P,"users",U.id);await Db(H,{reviews:w})})}catch(b){console.error("Error updating review field:",b)}}async function y(){try{const w=_r(Ri),P=yr(w,"reviews"),b=Mo(P,`${t.placeId}`);await Bw(b,e)}catch(w){console.error("Error writing review",w)}}se.useEffect(()=>{if(i!=0){if(c==!1){const w={1:0,2:0,3:0,4:0,5:0};w[`${i}`]+=1,m(w),n(w),h(!0)}else{const w=e;w[`${i}`]+=1,n(w),_(w),y()}if(!t.reviewData.includes(t.placeId)){let w=[...t.reviewData,{[t.placeId]:i}];v(w),t.handleReviewData(w)}}},[i]),se.useEffect(()=>{if(o!=0&&c){const w=e;let P=t.reviewData.filter(function(B){return B.hasOwnProperty(t.placeId)});w[`${P[0][t.placeId]}`]-=1,w[`${o}`]+=1,n(w),_(w),y();const b=t.reviewData.map(B=>t.placeId.toString()in B?{...B,[t.placeId]:o}:B);t.handleReviewData(b),v(b)}},[o]);function T(){if(c==!1)return 0;let w=e[1]+e[2]+e[3]+e[4]+e[5],P=1*e[1]+2*e[2]+3*e[3]+4*e[4]+5*e[5];return P=P/w,P}const[C,k]=se.useState(0),[M,S]=se.useState(0);function _(w){k(T().toFixed(2)),S(w[1]+w[2]+w[3]+w[4]+w[5])}return se.useEffect(()=>{_(e)},[e]),A.jsxs("div",{children:[A.jsx("div",{className:"average",children:c?A.jsx("div",{children:`${C} (${M})`}):A.jsx("p",{children:"No reviews exist yet"})}),A.jsx(L2,{rating:C,handleRating:r,reviewData:t.reviewData,username:t.username,placeId:t.placeId,handleReRating:l})]})}function zb(t){const[e,n]=se.useState(""),[i,r]=se.useState(""),[o,l]=se.useState("Overview");async function c(){try{const v=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${t.value.center.lat}&lon=${t.value.center.lon}`,{headers:{Referer:"https://jinhakimgh.github.io/Basketball-Court-Finder","User-Agent":"BasketballCourtFinder/1.0"}})).json();n(`${"house_number"in v.address?v.address.house_number+" ":""}
                        ${"road"in v.address?v.address.road+", ":""}
                        ${"city"in v.address?v.address.city+", ":""}
                        ${"state"in v.address?v.address.state+" ":""}${"postcode"in v.address?v.address.postcode:""}`),r(`${"amenity"in v.address?v.address.amenity:""}`)}catch(m){console.error("Error fetching location:",m)}}se.useEffect(()=>{c()},[]);function h(m){l(m.target.className)}const f={borderBottom:"2px solid #FF8B36",color:"#FF8B36"};return A.jsxs("div",{className:"placecard",children:[i!==""?A.jsx("p",{className:"name",children:i}):"name"in t.value.tags?A.jsx("p",{className:"name",children:t.value.tags.name}):A.jsx("p",{className:"name",children:"Outdoor Court"}),A.jsxs("div",{className:"choose-window",children:[A.jsx("p",{className:"Overview",onClick:h,style:o==="Overview"?f:{},children:"Overview"}),A.jsx("p",{className:"Review",onClick:h,style:o==="Review"?f:{},children:"Reviews"})]}),o==="Overview"&&A.jsxs("div",{className:"overview-panel",children:[A.jsxs("p",{className:"distance",children:[A.jsx("img",{src:"./assets/distanceIcon.png",className:"icons"}),` Distance: ${Math.round(t.distance*100)/100} km`]}),A.jsxs("p",{className:"address",children:[A.jsx("i",{className:"fa fa-map-marker"}),e!==""&&" "+e]}),"hoops"in t.value.tags&&A.jsxs("p",{className:"info",children:[A.jsx("img",{src:"./assets/hoop.png",className:"icons"})," "+t.value.tags.hoops," hoop",t.value.tags.hoops>1?"s":""]}),"surface"in t.value.tags&&A.jsxs("p",{className:"info",children:[A.jsx("img",{src:"./assets/ground.png",className:"icons"})," "+t.value.tags.surface.charAt(0).toUpperCase()+t.value.tags.surface.slice(1)," Surface"]})]}),o=="Review"&&A.jsx($b,{className:"review",username:t.username,reviewData:t.reviewData,placeId:t.value.id,handleReviewData:t.handleReviewData})]})}function Fb(t,e){const n=De.useRef(e);De.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const Bb=1;function Ub(t){return Object.freeze({__version:Bb,map:t})}function jb(t,e){return Object.freeze({...t,...e})}const RC=De.createContext(null),OC=RC.Provider;function Vb(){const t=De.useContext(RC);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function Hb(t){function e(n,i){const{instance:r,context:o}=t(n).current;return De.useImperativeHandle(i,()=>r),n.children==null?null:se.createElement(OC,{value:o},n.children)}return De.forwardRef(e)}function Wb(t){function e(n,i){const{instance:r}=t(n).current;return De.useImperativeHandle(i,()=>r),null}return De.forwardRef(e)}function qb(t,e){const n=De.useRef();De.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function DC(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Pp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(uI,function(n){var i="1.9.4";function r(s){var a,u,d,p;for(u=1,d=arguments.length;u<d;u++){p=arguments[u];for(a in p)s[a]=p[a]}return s}var o=Object.create||function(){function s(){}return function(a){return s.prototype=a,new s}}();function l(s,a){var u=Array.prototype.slice;if(s.bind)return s.bind.apply(s,u.call(arguments,1));var d=u.call(arguments,2);return function(){return s.apply(a,d.length?d.concat(u.call(arguments)):arguments)}}var c=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++c),s._leaflet_id}function f(s,a,u){var d,p,g,E;return E=function(){d=!1,p&&(g.apply(u,p),p=!1)},g=function(){d?p=arguments:(s.apply(u,arguments),setTimeout(E,a),d=!0)},g}function m(s,a,u){var d=a[1],p=a[0],g=d-p;return s===d&&u?s:((s-p)%g+g)%g+p}function v(){return!1}function y(s,a){if(a===!1)return s;var u=Math.pow(10,a===void 0?6:a);return Math.round(s*u)/u}function T(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function C(s){return T(s).split(/\s+/)}function k(s,a){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var u in a)s.options[u]=a[u];return s.options}function M(s,a,u){var d=[];for(var p in s)d.push(encodeURIComponent(u?p.toUpperCase():p)+"="+encodeURIComponent(s[p]));return(!a||a.indexOf("?")===-1?"?":"&")+d.join("&")}var S=/\{ *([\w_ -]+) *\}/g;function _(s,a){return s.replace(S,function(u,d){var p=a[d];if(p===void 0)throw new Error("No value provided for variable "+u);return typeof p=="function"&&(p=p(a)),p})}var w=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function P(s,a){for(var u=0;u<s.length;u++)if(s[u]===a)return u;return-1}var b="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function B(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var U=0;function H(s){var a=+new Date,u=Math.max(0,16-(a-U));return U=a+u,window.setTimeout(s,u)}var ce=window.requestAnimationFrame||B("RequestAnimationFrame")||H,ae=window.cancelAnimationFrame||B("CancelAnimationFrame")||B("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function ke(s,a,u){if(u&&ce===H)s.call(a);else return ce.call(window,l(s,a))}function tt(s){s&&ae.call(window,s)}var ir={__proto__:null,extend:r,create:o,bind:l,get lastId(){return c},stamp:h,throttle:f,wrapNum:m,falseFn:v,formatNum:y,trim:T,splitWords:C,setOptions:k,getParamString:M,template:_,isArray:w,indexOf:P,emptyImageUrl:b,requestFn:ce,cancelFn:ae,requestAnimFrame:ke,cancelAnimFrame:tt};function Jt(){}Jt.extend=function(s){var a=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=a.__super__=this.prototype,d=o(u);d.constructor=a,a.prototype=d;for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&p!=="prototype"&&p!=="__super__"&&(a[p]=this[p]);return s.statics&&r(a,s.statics),s.includes&&(Eh(s.includes),r.apply(null,[d].concat(s.includes))),r(d,s),delete d.statics,delete d.includes,d.options&&(d.options=u.options?o(u.options):{},r(d.options,s.options)),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var g=0,E=d._initHooks.length;g<E;g++)d._initHooks[g].call(this)}},a},Jt.include=function(s){var a=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=a,this.mergeOptions(s.options)),this},Jt.mergeOptions=function(s){return r(this.prototype.options,s),this},Jt.addInitHook=function(s){var a=Array.prototype.slice.call(arguments,1),u=typeof s=="function"?s:function(){this[s].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function Eh(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=w(s)?s:[s];for(var a=0;a<s.length;a++)s[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var lt={on:function(s,a,u){if(typeof s=="object")for(var d in s)this._on(d,s[d],a);else{s=C(s);for(var p=0,g=s.length;p<g;p++)this._on(s[p],a,u)}return this},off:function(s,a,u){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var d in s)this._off(d,s[d],a);else{s=C(s);for(var p=arguments.length===1,g=0,E=s.length;g<E;g++)p?this._off(s[g]):this._off(s[g],a,u)}return this},_on:function(s,a,u,d){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(s,a,u)===!1){u===this&&(u=void 0);var p={fn:a,ctx:u};d&&(p.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(p)}},_off:function(s,a,u){var d,p,g;if(this._events&&(d=this._events[s],!!d)){if(arguments.length===1){if(this._firingCount)for(p=0,g=d.length;p<g;p++)d[p].fn=v;delete this._events[s];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var E=this._listens(s,a,u);if(E!==!1){var I=d[E];this._firingCount&&(I.fn=v,this._events[s]=d=d.slice()),d.splice(E,1)}}},fire:function(s,a,u){if(!this.listens(s,u))return this;var d=r({},a,{type:s,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var p=this._events[s];if(p){this._firingCount=this._firingCount+1||1;for(var g=0,E=p.length;g<E;g++){var I=p[g],x=I.fn;I.once&&this.off(s,x,I.ctx),x.call(I.ctx||this,d)}this._firingCount--}}return u&&this._propagateEvent(d),this},listens:function(s,a,u,d){typeof s!="string"&&console.warn('"string" type argument expected');var p=a;typeof a!="function"&&(d=!!a,p=void 0,u=void 0);var g=this._events&&this._events[s];if(g&&g.length&&this._listens(s,p,u)!==!1)return!0;if(d){for(var E in this._eventParents)if(this._eventParents[E].listens(s,a,u,d))return!0}return!1},_listens:function(s,a,u){if(!this._events)return!1;var d=this._events[s]||[];if(!a)return!!d.length;u===this&&(u=void 0);for(var p=0,g=d.length;p<g;p++)if(d[p].fn===a&&d[p].ctx===u)return p;return!1},once:function(s,a,u){if(typeof s=="object")for(var d in s)this._on(d,s[d],a,!0);else{s=C(s);for(var p=0,g=s.length;p<g;p++)this._on(s[p],a,u,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var a in this._eventParents)this._eventParents[a].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};lt.addEventListener=lt.on,lt.removeEventListener=lt.clearAllEventListeners=lt.off,lt.addOneTimeEventListener=lt.once,lt.fireEvent=lt.fire,lt.hasEventListeners=lt.listens;var Vn=Jt.extend(lt);function O(s,a,u){this.x=u?Math.round(s):s,this.y=u?Math.round(a):a}var ee=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};O.prototype={clone:function(){return new O(this.x,this.y)},add:function(s){return this.clone()._add(F(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(F(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new O(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new O(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ee(this.x),this.y=ee(this.y),this},distanceTo:function(s){s=F(s);var a=s.x-this.x,u=s.y-this.y;return Math.sqrt(a*a+u*u)},equals:function(s){return s=F(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=F(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function F(s,a,u){return s instanceof O?s:w(s)?new O(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new O(s.x,s.y):new O(s,a,u)}function X(s,a){if(s)for(var u=a?[s,a]:s,d=0,p=u.length;d<p;d++)this.extend(u[d])}X.prototype={extend:function(s){var a,u;if(!s)return this;if(s instanceof O||typeof s[0]=="number"||"x"in s)a=u=F(s);else if(s=me(s),a=s.min,u=s.max,!a||!u)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=u.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(s){return F((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return F(this.min.x,this.max.y)},getTopRight:function(){return F(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var a,u;return typeof s[0]=="number"||s instanceof O?s=F(s):s=me(s),s instanceof X?(a=s.min,u=s.max):a=u=s,a.x>=this.min.x&&u.x<=this.max.x&&a.y>=this.min.y&&u.y<=this.max.y},intersects:function(s){s=me(s);var a=this.min,u=this.max,d=s.min,p=s.max,g=p.x>=a.x&&d.x<=u.x,E=p.y>=a.y&&d.y<=u.y;return g&&E},overlaps:function(s){s=me(s);var a=this.min,u=this.max,d=s.min,p=s.max,g=p.x>a.x&&d.x<u.x,E=p.y>a.y&&d.y<u.y;return g&&E},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var a=this.min,u=this.max,d=Math.abs(a.x-u.x)*s,p=Math.abs(a.y-u.y)*s;return me(F(a.x-d,a.y-p),F(u.x+d,u.y+p))},equals:function(s){return s?(s=me(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function me(s,a){return!s||s instanceof X?s:new X(s,a)}function Qe(s,a){if(s)for(var u=a?[s,a]:s,d=0,p=u.length;d<p;d++)this.extend(u[d])}Qe.prototype={extend:function(s){var a=this._southWest,u=this._northEast,d,p;if(s instanceof ye)d=s,p=s;else if(s instanceof Qe){if(d=s._southWest,p=s._northEast,!d||!p)return this}else return s?this.extend(ie(s)||Ce(s)):this;return!a&&!u?(this._southWest=new ye(d.lat,d.lng),this._northEast=new ye(p.lat,p.lng)):(a.lat=Math.min(d.lat,a.lat),a.lng=Math.min(d.lng,a.lng),u.lat=Math.max(p.lat,u.lat),u.lng=Math.max(p.lng,u.lng)),this},pad:function(s){var a=this._southWest,u=this._northEast,d=Math.abs(a.lat-u.lat)*s,p=Math.abs(a.lng-u.lng)*s;return new Qe(new ye(a.lat-d,a.lng-p),new ye(u.lat+d,u.lng+p))},getCenter:function(){return new ye((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ye(this.getNorth(),this.getWest())},getSouthEast:function(){return new ye(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ye||"lat"in s?s=ie(s):s=Ce(s);var a=this._southWest,u=this._northEast,d,p;return s instanceof Qe?(d=s.getSouthWest(),p=s.getNorthEast()):d=p=s,d.lat>=a.lat&&p.lat<=u.lat&&d.lng>=a.lng&&p.lng<=u.lng},intersects:function(s){s=Ce(s);var a=this._southWest,u=this._northEast,d=s.getSouthWest(),p=s.getNorthEast(),g=p.lat>=a.lat&&d.lat<=u.lat,E=p.lng>=a.lng&&d.lng<=u.lng;return g&&E},overlaps:function(s){s=Ce(s);var a=this._southWest,u=this._northEast,d=s.getSouthWest(),p=s.getNorthEast(),g=p.lat>a.lat&&d.lat<u.lat,E=p.lng>a.lng&&d.lng<u.lng;return g&&E},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,a){return s?(s=Ce(s),this._southWest.equals(s.getSouthWest(),a)&&this._northEast.equals(s.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ce(s,a){return s instanceof Qe?s:new Qe(s,a)}function ye(s,a,u){if(isNaN(s)||isNaN(a))throw new Error("Invalid LatLng object: ("+s+", "+a+")");this.lat=+s,this.lng=+a,u!==void 0&&(this.alt=+u)}ye.prototype={equals:function(s,a){if(!s)return!1;s=ie(s);var u=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return u<=(a===void 0?1e-9:a)},toString:function(s){return"LatLng("+y(this.lat,s)+", "+y(this.lng,s)+")"},distanceTo:function(s){return gi.distance(this,ie(s))},wrap:function(){return gi.wrapLatLng(this)},toBounds:function(s){var a=180*s/40075017,u=a/Math.cos(Math.PI/180*this.lat);return Ce([this.lat-a,this.lng-u],[this.lat+a,this.lng+u])},clone:function(){return new ye(this.lat,this.lng,this.alt)}};function ie(s,a,u){return s instanceof ye?s:w(s)&&typeof s[0]!="object"?s.length===3?new ye(s[0],s[1],s[2]):s.length===2?new ye(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ye(s.lat,"lng"in s?s.lng:s.lon,s.alt):a===void 0?null:new ye(s,a,u)}var $t={latLngToPoint:function(s,a){var u=this.projection.project(s),d=this.scale(a);return this.transformation._transform(u,d)},pointToLatLng:function(s,a){var u=this.scale(a),d=this.transformation.untransform(s,u);return this.projection.unproject(d)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var a=this.projection.bounds,u=this.scale(s),d=this.transformation.transform(a.min,u),p=this.transformation.transform(a.max,u);return new X(d,p)},infinite:!1,wrapLatLng:function(s){var a=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,u=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,d=s.alt;return new ye(u,a,d)},wrapLatLngBounds:function(s){var a=s.getCenter(),u=this.wrapLatLng(a),d=a.lat-u.lat,p=a.lng-u.lng;if(d===0&&p===0)return s;var g=s.getSouthWest(),E=s.getNorthEast(),I=new ye(g.lat-d,g.lng-p),x=new ye(E.lat-d,E.lng-p);return new Qe(I,x)}},gi=r({},$t,{wrapLng:[-180,180],R:6371e3,distance:function(s,a){var u=Math.PI/180,d=s.lat*u,p=a.lat*u,g=Math.sin((a.lat-s.lat)*u/2),E=Math.sin((a.lng-s.lng)*u/2),I=g*g+Math.cos(d)*Math.cos(p)*E*E,x=2*Math.atan2(Math.sqrt(I),Math.sqrt(1-I));return this.R*x}}),jg=6378137,Th={R:jg,MAX_LATITUDE:85.0511287798,project:function(s){var a=Math.PI/180,u=this.MAX_LATITUDE,d=Math.max(Math.min(u,s.lat),-u),p=Math.sin(d*a);return new O(this.R*s.lng*a,this.R*Math.log((1+p)/(1-p))/2)},unproject:function(s){var a=180/Math.PI;return new ye((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*a,s.x*a/this.R)},bounds:function(){var s=jg*Math.PI;return new X([-s,-s],[s,s])}()};function Sh(s,a,u,d){if(w(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=a,this._c=u,this._d=d}Sh.prototype={transform:function(s,a){return this._transform(s.clone(),a)},_transform:function(s,a){return a=a||1,s.x=a*(this._a*s.x+this._b),s.y=a*(this._c*s.y+this._d),s},untransform:function(s,a){return a=a||1,new O((s.x/a-this._b)/this._a,(s.y/a-this._d)/this._c)}};function to(s,a,u,d){return new Sh(s,a,u,d)}var Ch=r({},gi,{code:"EPSG:3857",projection:Th,transformation:function(){var s=.5/(Math.PI*Th.R);return to(s,.5,-s,.5)}()}),FC=r({},Ch,{code:"EPSG:900913"});function Vg(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Hg(s,a){var u="",d,p,g,E,I,x;for(d=0,g=s.length;d<g;d++){for(I=s[d],p=0,E=I.length;p<E;p++)x=I[p],u+=(p?"L":"M")+x.x+" "+x.y;u+=a?K.svg?"z":"x":""}return u||"M0 0"}var kh=document.documentElement.style,ul="ActiveXObject"in window,BC=ul&&!document.addEventListener,Wg="msLaunchUri"in navigator&&!("documentMode"in document),Ih=Cn("webkit"),qg=Cn("android"),Zg=Cn("android 2")||Cn("android 3"),UC=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),jC=qg&&Cn("Google")&&UC<537&&!("AudioNode"in window),xh=!!window.opera,Kg=!Wg&&Cn("chrome"),Gg=Cn("gecko")&&!Ih&&!xh&&!ul,VC=!Kg&&Cn("safari"),Qg=Cn("phantom"),Yg="OTransition"in kh,HC=navigator.platform.indexOf("Win")===0,Xg=ul&&"transition"in kh,Ph="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Zg,Jg="MozPerspective"in kh,WC=!window.L_DISABLE_3D&&(Xg||Ph||Jg)&&!Yg&&!Qg,no=typeof orientation<"u"||Cn("mobile"),qC=no&&Ih,ZC=no&&Ph,ev=!window.PointerEvent&&window.MSPointerEvent,tv=!!(window.PointerEvent||ev),nv="ontouchstart"in window||!!window.TouchEvent,KC=!window.L_NO_TOUCH&&(nv||tv),GC=no&&xh,QC=no&&Gg,YC=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,XC=function(){var s=!1;try{var a=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",v,a),window.removeEventListener("testPassiveEventSupport",v,a)}catch{}return s}(),JC=function(){return!!document.createElement("canvas").getContext}(),Lh=!!(document.createElementNS&&Vg("svg").createSVGRect),ek=!!Lh&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),tk=!Lh&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var a=s.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),nk=navigator.platform.indexOf("Mac")===0,ik=navigator.platform.indexOf("Linux")===0;function Cn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var K={ie:ul,ielt9:BC,edge:Wg,webkit:Ih,android:qg,android23:Zg,androidStock:jC,opera:xh,chrome:Kg,gecko:Gg,safari:VC,phantom:Qg,opera12:Yg,win:HC,ie3d:Xg,webkit3d:Ph,gecko3d:Jg,any3d:WC,mobile:no,mobileWebkit:qC,mobileWebkit3d:ZC,msPointer:ev,pointer:tv,touch:KC,touchNative:nv,mobileOpera:GC,mobileGecko:QC,retina:YC,passiveEvents:XC,canvas:JC,svg:Lh,vml:tk,inlineSvg:ek,mac:nk,linux:ik},iv=K.msPointer?"MSPointerDown":"pointerdown",rv=K.msPointer?"MSPointerMove":"pointermove",sv=K.msPointer?"MSPointerUp":"pointerup",ov=K.msPointer?"MSPointerCancel":"pointercancel",Ah={touchstart:iv,touchmove:rv,touchend:sv,touchcancel:ov},av={touchstart:uk,touchmove:cl,touchend:cl,touchcancel:cl},Br={},lv=!1;function rk(s,a,u){return a==="touchstart"&&lk(),av[a]?(u=av[a].bind(this,u),s.addEventListener(Ah[a],u,!1),u):(console.warn("wrong event specified:",a),v)}function sk(s,a,u){if(!Ah[a]){console.warn("wrong event specified:",a);return}s.removeEventListener(Ah[a],u,!1)}function ok(s){Br[s.pointerId]=s}function ak(s){Br[s.pointerId]&&(Br[s.pointerId]=s)}function uv(s){delete Br[s.pointerId]}function lk(){lv||(document.addEventListener(iv,ok,!0),document.addEventListener(rv,ak,!0),document.addEventListener(sv,uv,!0),document.addEventListener(ov,uv,!0),lv=!0)}function cl(s,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var u in Br)a.touches.push(Br[u]);a.changedTouches=[a],s(a)}}function uk(s,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&ut(a),cl(s,a)}function ck(s){var a={},u,d;for(d in s)u=s[d],a[d]=u&&u.bind?u.bind(s):u;return s=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var hk=200;function dk(s,a){s.addEventListener("dblclick",a);var u=0,d;function p(g){if(g.detail!==1){d=g.detail;return}if(!(g.pointerType==="mouse"||g.sourceCapabilities&&!g.sourceCapabilities.firesTouchEvents)){var E=pv(g);if(!(E.some(function(x){return x instanceof HTMLLabelElement&&x.attributes.for})&&!E.some(function(x){return x instanceof HTMLInputElement||x instanceof HTMLSelectElement}))){var I=Date.now();I-u<=hk?(d++,d===2&&a(ck(g))):d=1,u=I}}}return s.addEventListener("click",p),{dblclick:a,simDblclick:p}}function fk(s,a){s.removeEventListener("dblclick",a.dblclick),s.removeEventListener("click",a.simDblclick)}var Nh=fl(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),io=fl(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),cv=io==="webkitTransition"||io==="OTransition"?io+"End":"transitionend";function hv(s){return typeof s=="string"?document.getElementById(s):s}function ro(s,a){var u=s.style[a]||s.currentStyle&&s.currentStyle[a];if((!u||u==="auto")&&document.defaultView){var d=document.defaultView.getComputedStyle(s,null);u=d?d[a]:null}return u==="auto"?null:u}function _e(s,a,u){var d=document.createElement(s);return d.className=a||"",u&&u.appendChild(d),d}function Me(s){var a=s.parentNode;a&&a.removeChild(s)}function hl(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Ur(s){var a=s.parentNode;a&&a.lastChild!==s&&a.appendChild(s)}function jr(s){var a=s.parentNode;a&&a.firstChild!==s&&a.insertBefore(s,a.firstChild)}function Rh(s,a){if(s.classList!==void 0)return s.classList.contains(a);var u=dl(s);return u.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(u)}function le(s,a){if(s.classList!==void 0)for(var u=C(a),d=0,p=u.length;d<p;d++)s.classList.add(u[d]);else if(!Rh(s,a)){var g=dl(s);Oh(s,(g?g+" ":"")+a)}}function je(s,a){s.classList!==void 0?s.classList.remove(a):Oh(s,T((" "+dl(s)+" ").replace(" "+a+" "," ")))}function Oh(s,a){s.className.baseVal===void 0?s.className=a:s.className.baseVal=a}function dl(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function en(s,a){"opacity"in s.style?s.style.opacity=a:"filter"in s.style&&pk(s,a)}function pk(s,a){var u=!1,d="DXImageTransform.Microsoft.Alpha";try{u=s.filters.item(d)}catch{if(a===1)return}a=Math.round(a*100),u?(u.Enabled=a!==100,u.Opacity=a):s.style.filter+=" progid:"+d+"(opacity="+a+")"}function fl(s){for(var a=document.documentElement.style,u=0;u<s.length;u++)if(s[u]in a)return s[u];return!1}function rr(s,a,u){var d=a||new O(0,0);s.style[Nh]=(K.ie3d?"translate("+d.x+"px,"+d.y+"px)":"translate3d("+d.x+"px,"+d.y+"px,0)")+(u?" scale("+u+")":"")}function He(s,a){s._leaflet_pos=a,K.any3d?rr(s,a):(s.style.left=a.x+"px",s.style.top=a.y+"px")}function sr(s){return s._leaflet_pos||new O(0,0)}var so,oo,Dh;if("onselectstart"in document)so=function(){re(window,"selectstart",ut)},oo=function(){Ie(window,"selectstart",ut)};else{var ao=fl(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);so=function(){if(ao){var s=document.documentElement.style;Dh=s[ao],s[ao]="none"}},oo=function(){ao&&(document.documentElement.style[ao]=Dh,Dh=void 0)}}function Mh(){re(window,"dragstart",ut)}function bh(){Ie(window,"dragstart",ut)}var pl,$h;function zh(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(ml(),pl=s,$h=s.style.outlineStyle,s.style.outlineStyle="none",re(window,"keydown",ml))}function ml(){pl&&(pl.style.outlineStyle=$h,pl=void 0,$h=void 0,Ie(window,"keydown",ml))}function dv(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Fh(s){var a=s.getBoundingClientRect();return{x:a.width/s.offsetWidth||1,y:a.height/s.offsetHeight||1,boundingClientRect:a}}var mk={__proto__:null,TRANSFORM:Nh,TRANSITION:io,TRANSITION_END:cv,get:hv,getStyle:ro,create:_e,remove:Me,empty:hl,toFront:Ur,toBack:jr,hasClass:Rh,addClass:le,removeClass:je,setClass:Oh,getClass:dl,setOpacity:en,testProp:fl,setTransform:rr,setPosition:He,getPosition:sr,get disableTextSelection(){return so},get enableTextSelection(){return oo},disableImageDrag:Mh,enableImageDrag:bh,preventOutline:zh,restoreOutline:ml,getSizedParentNode:dv,getScale:Fh};function re(s,a,u,d){if(a&&typeof a=="object")for(var p in a)Uh(s,p,a[p],u);else{a=C(a);for(var g=0,E=a.length;g<E;g++)Uh(s,a[g],u,d)}return this}var kn="_leaflet_events";function Ie(s,a,u,d){if(arguments.length===1)fv(s),delete s[kn];else if(a&&typeof a=="object")for(var p in a)jh(s,p,a[p],u);else if(a=C(a),arguments.length===2)fv(s,function(I){return P(a,I)!==-1});else for(var g=0,E=a.length;g<E;g++)jh(s,a[g],u,d);return this}function fv(s,a){for(var u in s[kn]){var d=u.split(/\d/)[0];(!a||a(d))&&jh(s,d,null,null,u)}}var Bh={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Uh(s,a,u,d){var p=a+h(u)+(d?"_"+h(d):"");if(s[kn]&&s[kn][p])return this;var g=function(I){return u.call(d||s,I||window.event)},E=g;!K.touchNative&&K.pointer&&a.indexOf("touch")===0?g=rk(s,a,g):K.touch&&a==="dblclick"?g=dk(s,g):"addEventListener"in s?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?s.addEventListener(Bh[a]||a,g,K.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(g=function(I){I=I||window.event,Hh(s,I)&&E(I)},s.addEventListener(Bh[a],g,!1)):s.addEventListener(a,E,!1):s.attachEvent("on"+a,g),s[kn]=s[kn]||{},s[kn][p]=g}function jh(s,a,u,d,p){p=p||a+h(u)+(d?"_"+h(d):"");var g=s[kn]&&s[kn][p];if(!g)return this;!K.touchNative&&K.pointer&&a.indexOf("touch")===0?sk(s,a,g):K.touch&&a==="dblclick"?fk(s,g):"removeEventListener"in s?s.removeEventListener(Bh[a]||a,g,!1):s.detachEvent("on"+a,g),s[kn][p]=null}function or(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Vh(s){return Uh(s,"wheel",or),this}function lo(s){return re(s,"mousedown touchstart dblclick contextmenu",or),s._leaflet_disable_click=!0,this}function ut(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function ar(s){return ut(s),or(s),this}function pv(s){if(s.composedPath)return s.composedPath();for(var a=[],u=s.target;u;)a.push(u),u=u.parentNode;return a}function mv(s,a){if(!a)return new O(s.clientX,s.clientY);var u=Fh(a),d=u.boundingClientRect;return new O((s.clientX-d.left)/u.x-a.clientLeft,(s.clientY-d.top)/u.y-a.clientTop)}var gk=K.linux&&K.chrome?window.devicePixelRatio:K.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function gv(s){return K.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/gk:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Hh(s,a){var u=a.relatedTarget;if(!u)return!0;try{for(;u&&u!==s;)u=u.parentNode}catch{return!1}return u!==s}var vk={__proto__:null,on:re,off:Ie,stopPropagation:or,disableScrollPropagation:Vh,disableClickPropagation:lo,preventDefault:ut,stop:ar,getPropagationPath:pv,getMousePosition:mv,getWheelDelta:gv,isExternalTarget:Hh,addListener:re,removeListener:Ie},vv=Vn.extend({run:function(s,a,u,d){this.stop(),this._el=s,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=sr(s),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ke(this._animate,this),this._step()},_step:function(s){var a=+new Date-this._startTime,u=this._duration*1e3;a<u?this._runFrame(this._easeOut(a/u),s):(this._runFrame(1),this._complete())},_runFrame:function(s,a){var u=this._startPos.add(this._offset.multiplyBy(s));a&&u._round(),He(this._el,u),this.fire("step")},_complete:function(){tt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),fe=Vn.extend({options:{crs:Ch,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,a){a=k(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(ie(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=io&&K.any3d&&!K.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),re(this._proxy,cv,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,a,u){if(a=a===void 0?this._zoom:this._limitZoom(a),s=this._limitCenter(ie(s),a,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=r({animate:u.animate},u.zoom),u.pan=r({animate:u.animate,duration:u.duration},u.pan));var d=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,a,u.zoom):this._tryAnimatedPan(s,u.pan);if(d)return clearTimeout(this._sizeTimer),this}return this._resetView(s,a,u.pan&&u.pan.noMoveStart),this},setZoom:function(s,a){return this._loaded?this.setView(this.getCenter(),s,{zoom:a}):(this._zoom=s,this)},zoomIn:function(s,a){return s=s||(K.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,a)},zoomOut:function(s,a){return s=s||(K.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,a)},setZoomAround:function(s,a,u){var d=this.getZoomScale(a),p=this.getSize().divideBy(2),g=s instanceof O?s:this.latLngToContainerPoint(s),E=g.subtract(p).multiplyBy(1-1/d),I=this.containerPointToLatLng(p.add(E));return this.setView(I,a,{zoom:u})},_getBoundsCenterZoom:function(s,a){a=a||{},s=s.getBounds?s.getBounds():Ce(s);var u=F(a.paddingTopLeft||a.padding||[0,0]),d=F(a.paddingBottomRight||a.padding||[0,0]),p=this.getBoundsZoom(s,!1,u.add(d));if(p=typeof a.maxZoom=="number"?Math.min(a.maxZoom,p):p,p===1/0)return{center:s.getCenter(),zoom:p};var g=d.subtract(u).divideBy(2),E=this.project(s.getSouthWest(),p),I=this.project(s.getNorthEast(),p),x=this.unproject(E.add(I).divideBy(2).add(g),p);return{center:x,zoom:p}},fitBounds:function(s,a){if(s=Ce(s),!s.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(s,a);return this.setView(u.center,u.zoom,a)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,a){return this.setView(s,this._zoom,{pan:a})},panBy:function(s,a){if(s=F(s).round(),a=a||{},!s.x&&!s.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new vv,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){le(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,u,a.duration||.25,a.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,a,u){if(u=u||{},u.animate===!1||!K.any3d)return this.setView(s,a,u);this._stop();var d=this.project(this.getCenter()),p=this.project(s),g=this.getSize(),E=this._zoom;s=ie(s),a=a===void 0?E:a;var I=Math.max(g.x,g.y),x=I*this.getZoomScale(E,a),D=p.distanceTo(d)||1,V=1.42,Q=V*V;function ue(We){var xl=We?-1:1,sI=We?x:I,oI=x*x-I*I+xl*Q*Q*D*D,aI=2*sI*Q*D,td=oI/aI,Yv=Math.sqrt(td*td+1)-td,lI=Yv<1e-9?-18:Math.log(Yv);return lI}function Lt(We){return(Math.exp(We)-Math.exp(-We))/2}function nt(We){return(Math.exp(We)+Math.exp(-We))/2}function nn(We){return Lt(We)/nt(We)}var zt=ue(0);function Kr(We){return I*(nt(zt)/nt(zt+V*We))}function tI(We){return I*(nt(zt)*nn(zt+V*We)-Lt(zt))/Q}function nI(We){return 1-Math.pow(1-We,1.5)}var iI=Date.now(),Gv=(ue(1)-zt)/V,rI=u.duration?1e3*u.duration:1e3*Gv*.8;function Qv(){var We=(Date.now()-iI)/rI,xl=nI(We)*Gv;We<=1?(this._flyToFrame=ke(Qv,this),this._move(this.unproject(d.add(p.subtract(d).multiplyBy(tI(xl)/D)),E),this.getScaleZoom(I/Kr(xl),E),{flyTo:!0})):this._move(s,a)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),Qv.call(this),this},flyToBounds:function(s,a){var u=this._getBoundsCenterZoom(s,a);return this.flyTo(u.center,u.zoom,a)},setMaxBounds:function(s){return s=Ce(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var a=this.options.minZoom;return this.options.minZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var a=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&a!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,a){this._enforcingBounds=!0;var u=this.getCenter(),d=this._limitCenter(u,this._zoom,Ce(s));return u.equals(d)||this.panTo(d,a),this._enforcingBounds=!1,this},panInside:function(s,a){a=a||{};var u=F(a.paddingTopLeft||a.padding||[0,0]),d=F(a.paddingBottomRight||a.padding||[0,0]),p=this.project(this.getCenter()),g=this.project(s),E=this.getPixelBounds(),I=me([E.min.add(u),E.max.subtract(d)]),x=I.getSize();if(!I.contains(g)){this._enforcingBounds=!0;var D=g.subtract(I.getCenter()),V=I.extend(g).getSize().subtract(x);p.x+=D.x<0?-V.x:V.x,p.y+=D.y<0?-V.y:V.y,this.panTo(this.unproject(p),a),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),d=a.divideBy(2).round(),p=u.divideBy(2).round(),g=d.subtract(p);return!g.x&&!g.y?this:(s.animate&&s.pan?this.panBy(g):(s.pan&&this._rawPanBy(g),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),u=l(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,u,s):navigator.geolocation.getCurrentPosition(a,u,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var a=s.code,u=s.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var a=s.coords.latitude,u=s.coords.longitude,d=new ye(a,u),p=d.toBounds(s.coords.accuracy*2),g=this._locateOptions;if(g.setView){var E=this.getBoundsZoom(p);this.setView(d,g.maxZoom?Math.min(E,g.maxZoom):E)}var I={latlng:d,bounds:p,timestamp:s.timestamp};for(var x in s.coords)typeof s.coords[x]=="number"&&(I[x]=s.coords[x]);this.fire("locationfound",I)}},addHandler:function(s,a){if(!a)return this;var u=this[s]=new a(this);return this._handlers.push(u),this.options[s]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Me(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(tt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Me(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,a){var u="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),d=_e("div",u,a||this._mapPane);return s&&(this._panes[s]=d),d},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),a=this.unproject(s.getBottomLeft()),u=this.unproject(s.getTopRight());return new Qe(a,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,a,u){s=Ce(s),u=F(u||[0,0]);var d=this.getZoom()||0,p=this.getMinZoom(),g=this.getMaxZoom(),E=s.getNorthWest(),I=s.getSouthEast(),x=this.getSize().subtract(u),D=me(this.project(I,d),this.project(E,d)).getSize(),V=K.any3d?this.options.zoomSnap:1,Q=x.x/D.x,ue=x.y/D.y,Lt=a?Math.max(Q,ue):Math.min(Q,ue);return d=this.getScaleZoom(Lt,d),V&&(d=Math.round(d/(V/100))*(V/100),d=a?Math.ceil(d/V)*V:Math.floor(d/V)*V),Math.max(p,Math.min(g,d))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,a){var u=this._getTopLeftPoint(s,a);return new X(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,a){var u=this.options.crs;return a=a===void 0?this._zoom:a,u.scale(s)/u.scale(a)},getScaleZoom:function(s,a){var u=this.options.crs;a=a===void 0?this._zoom:a;var d=u.zoom(s*u.scale(a));return isNaN(d)?1/0:d},project:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(ie(s),a)},unproject:function(s,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(F(s),a)},layerPointToLatLng:function(s){var a=F(s).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(s){var a=this.project(ie(s))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ie(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Ce(s))},distance:function(s,a){return this.options.crs.distance(ie(s),ie(a))},containerPointToLayerPoint:function(s){return F(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return F(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var a=this.containerPointToLayerPoint(F(s));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ie(s)))},mouseEventToContainerPoint:function(s){return mv(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var a=this._container=hv(s);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");re(a,"scroll",this._onScroll,this),this._containerId=h(a)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&K.any3d,le(s,"leaflet-container"+(K.touch?" leaflet-touch":"")+(K.retina?" leaflet-retina":"")+(K.ielt9?" leaflet-oldie":"")+(K.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=ro(s,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),He(this._mapPane,new O(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(le(s.markerPane,"leaflet-zoom-hide"),le(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,a,u){He(this._mapPane,new O(0,0));var d=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var p=this._zoom!==a;this._moveStart(p,u)._move(s,a)._moveEnd(p),this.fire("viewreset"),d&&this.fire("load")},_moveStart:function(s,a){return s&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(s,a,u,d){a===void 0&&(a=this._zoom);var p=this._zoom!==a;return this._zoom=a,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),d?u&&u.pinch&&this.fire("zoom",u):((p||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return tt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){He(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var a=s?Ie:re;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),K.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){tt(this._resizeRequest),this._resizeRequest=ke(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,a){for(var u=[],d,p=a==="mouseout"||a==="mouseover",g=s.target||s.srcElement,E=!1;g;){if(d=this._targets[h(g)],d&&(a==="click"||a==="preclick")&&this._draggableMoved(d)){E=!0;break}if(d&&d.listens(a,!0)&&(p&&!Hh(g,s)||(u.push(d),p))||g===this._container)break;g=g.parentNode}return!u.length&&!E&&!p&&this.listens(a,!0)&&(u=[this]),u},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var a=s.target||s.srcElement;if(!(!this._loaded||a._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(a))){var u=s.type;u==="mousedown"&&zh(a),this._fireDOMEvent(s,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,a,u){if(s.type==="click"){var d=r({},s);d.type="preclick",this._fireDOMEvent(d,d.type,u)}var p=this._findEventTargets(s,a);if(u){for(var g=[],E=0;E<u.length;E++)u[E].listens(a,!0)&&g.push(u[E]);p=g.concat(p)}if(p.length){a==="contextmenu"&&ut(s);var I=p[0],x={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var D=I.getLatLng&&(!I._radius||I._radius<=10);x.containerPoint=D?this.latLngToContainerPoint(I.getLatLng()):this.mouseEventToContainerPoint(s),x.layerPoint=this.containerPointToLayerPoint(x.containerPoint),x.latlng=D?I.getLatLng():this.layerPointToLatLng(x.layerPoint)}for(E=0;E<p.length;E++)if(p[E].fire(a,x,!0),x.originalEvent._stopped||p[E].options.bubblingMouseEvents===!1&&P(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,a=this._handlers.length;s<a;s++)this._handlers[s].disable()},whenReady:function(s,a){return this._loaded?s.call(a||this,{target:this}):this.on("load",s,a),this},_getMapPanePos:function(){return sr(this._mapPane)||new O(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,a){var u=s&&a!==void 0?this._getNewPixelOrigin(s,a):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,a){var u=this.getSize()._divideBy(2);return this.project(s,a)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,a,u){var d=this._getNewPixelOrigin(u,a);return this.project(s,a)._subtract(d)},_latLngBoundsToNewLayerBounds:function(s,a,u){var d=this._getNewPixelOrigin(u,a);return me([this.project(s.getSouthWest(),a)._subtract(d),this.project(s.getNorthWest(),a)._subtract(d),this.project(s.getSouthEast(),a)._subtract(d),this.project(s.getNorthEast(),a)._subtract(d)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,a,u){if(!u)return s;var d=this.project(s,a),p=this.getSize().divideBy(2),g=new X(d.subtract(p),d.add(p)),E=this._getBoundsOffset(g,u,a);return Math.abs(E.x)<=1&&Math.abs(E.y)<=1?s:this.unproject(d.add(E),a)},_limitOffset:function(s,a){if(!a)return s;var u=this.getPixelBounds(),d=new X(u.min.add(s),u.max.add(s));return s.add(this._getBoundsOffset(d,a))},_getBoundsOffset:function(s,a,u){var d=me(this.project(a.getNorthEast(),u),this.project(a.getSouthWest(),u)),p=d.min.subtract(s.min),g=d.max.subtract(s.max),E=this._rebound(p.x,-g.x),I=this._rebound(p.y,-g.y);return new O(E,I)},_rebound:function(s,a){return s+a>0?Math.round(s-a)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(a))},_limitZoom:function(s){var a=this.getMinZoom(),u=this.getMaxZoom(),d=K.any3d?this.options.zoomSnap:1;return d&&(s=Math.round(s/d)*d),Math.max(a,Math.min(u,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){je(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,a){var u=this._getCenterOffset(s)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,a),!0)},_createAnimProxy:function(){var s=this._proxy=_e("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(a){var u=Nh,d=this._proxy.style[u];rr(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),d===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Me(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),a=this.getZoom();rr(this._proxy,this.project(s,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,a,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(a),p=this._getCenterOffset(s)._divideBy(1-1/d);return u.animate!==!0&&!this.getSize().contains(p)?!1:(ke(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(s,a,!0)},this),!0)},_animateZoom:function(s,a,u,d){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=a,le(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:a,noUpdate:d}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&je(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function yk(s,a){return new fe(s,a)}var dn=Jt.extend({options:{position:"topright"},initialize:function(s){k(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var a=this._map;return a&&a.removeControl(this),this.options.position=s,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var a=this._container=this.onAdd(s),u=this.getPosition(),d=s._controlCorners[u];return le(a,"leaflet-control"),u.indexOf("bottom")!==-1?d.insertBefore(a,d.firstChild):d.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Me(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),uo=function(s){return new dn(s)};fe.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},a="leaflet-",u=this._controlContainer=_e("div",a+"control-container",this._container);function d(p,g){var E=a+p+" "+a+g;s[p+g]=_e("div",E,u)}d("top","left"),d("top","right"),d("bottom","left"),d("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Me(this._controlCorners[s]);Me(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var yv=dn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,a,u,d){return u<d?-1:d<u?1:0}},initialize:function(s,a,u){k(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var d in s)this._addLayer(s[d],d);for(d in a)this._addLayer(a[d],d,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return dn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,a){return this._addLayer(s,a),this._map?this._update():this},addOverlay:function(s,a){return this._addLayer(s,a,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var a=this._getLayer(h(s));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){le(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(le(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):je(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return je(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",a=this._container=_e("div",s),u=this.options.collapsed;a.setAttribute("aria-haspopup",!0),lo(a),Vh(a);var d=this._section=_e("section",s+"-list");u&&(this._map.on("click",this.collapse,this),re(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var p=this._layersLink=_e("a",s+"-toggle",a);p.href="#",p.title="Layers",p.setAttribute("role","button"),re(p,{keydown:function(g){g.keyCode===13&&this._expandSafely()},click:function(g){ut(g),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=_e("div",s+"-base",d),this._separator=_e("div",s+"-separator",d),this._overlaysList=_e("div",s+"-overlays",d),a.appendChild(d)},_getLayer:function(s){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&h(this._layers[a].layer)===s)return this._layers[a]},_addLayer:function(s,a,u){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:a,overlay:u}),this.options.sortLayers&&this._layers.sort(l(function(d,p){return this.options.sortFunction(d.layer,p.layer,d.name,p.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;hl(this._baseLayersList),hl(this._overlaysList),this._layerControlInputs=[];var s,a,u,d,p=0;for(u=0;u<this._layers.length;u++)d=this._layers[u],this._addItem(d),a=a||d.overlay,s=s||!d.overlay,p+=d.overlay?0:1;return this.options.hideSingleBase&&(s=s&&p>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=a&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var a=this._getLayer(h(s.target)),u=a.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;u&&this._map.fire(u,a)},_createRadioElement:function(s,a){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(a?' checked="checked"':"")+"/>",d=document.createElement("div");return d.innerHTML=u,d.firstChild},_addItem:function(s){var a=document.createElement("label"),u=this._map.hasLayer(s.layer),d;s.overlay?(d=document.createElement("input"),d.type="checkbox",d.className="leaflet-control-layers-selector",d.defaultChecked=u):d=this._createRadioElement("leaflet-base-layers_"+h(this),u),this._layerControlInputs.push(d),d.layerId=h(s.layer),re(d,"click",this._onInputClick,this);var p=document.createElement("span");p.innerHTML=" "+s.name;var g=document.createElement("span");a.appendChild(g),g.appendChild(d),g.appendChild(p);var E=s.overlay?this._overlaysList:this._baseLayersList;return E.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,a,u,d=[],p=[];this._handlingClick=!0;for(var g=s.length-1;g>=0;g--)a=s[g],u=this._getLayer(a.layerId).layer,a.checked?d.push(u):a.checked||p.push(u);for(g=0;g<p.length;g++)this._map.hasLayer(p[g])&&this._map.removeLayer(p[g]);for(g=0;g<d.length;g++)this._map.hasLayer(d[g])||this._map.addLayer(d[g]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,a,u,d=this._map.getZoom(),p=s.length-1;p>=0;p--)a=s[p],u=this._getLayer(a.layerId).layer,a.disabled=u.options.minZoom!==void 0&&d<u.options.minZoom||u.options.maxZoom!==void 0&&d>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,re(s,"click",ut),this.expand();var a=this;setTimeout(function(){Ie(s,"click",ut),a._preventClick=!1})}}),_k=function(s,a,u){return new yv(s,a,u)},Wh=dn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var a="leaflet-control-zoom",u=_e("div",a+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,a+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,a+"-out",u,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,a,u,d,p){var g=_e("a",u,d);return g.innerHTML=s,g.href="#",g.title=a,g.setAttribute("role","button"),g.setAttribute("aria-label",a),lo(g),re(g,"click",ar),re(g,"click",p,this),re(g,"click",this._refocusOnMap,this),g},_updateDisabled:function(){var s=this._map,a="leaflet-disabled";je(this._zoomInButton,a),je(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(le(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(le(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});fe.mergeOptions({zoomControl:!0}),fe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Wh,this.addControl(this.zoomControl))});var wk=function(s){return new Wh(s)},_v=dn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var a="leaflet-control-scale",u=_e("div",a),d=this.options;return this._addScales(d,a+"-line",u),s.on(d.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),u},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,a,u){s.metric&&(this._mScale=_e("div",a,u)),s.imperial&&(this._iScale=_e("div",a,u))},_update:function(){var s=this._map,a=s.getSize().y/2,u=s.distance(s.containerPointToLatLng([0,a]),s.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(u)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var a=this._getRoundNum(s),u=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,u,a/s)},_updateImperial:function(s){var a=s*3.2808399,u,d,p;a>5280?(u=a/5280,d=this._getRoundNum(u),this._updateScale(this._iScale,d+" mi",d/u)):(p=this._getRoundNum(a),this._updateScale(this._iScale,p+" ft",p/a))},_updateScale:function(s,a,u){s.style.width=Math.round(this.options.maxWidth*u)+"px",s.innerHTML=a},_getRoundNum:function(s){var a=Math.pow(10,(Math.floor(s)+"").length-1),u=s/a;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,a*u}}),Ek=function(s){return new _v(s)},Tk='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',qh=dn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(K.inlineSvg?Tk+" ":"")+"Leaflet</a>"},initialize:function(s){k(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=_e("div","leaflet-control-attribution"),lo(this._container);for(var a in s._layers)s._layers[a].getAttribution&&this.addAttribution(s._layers[a].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var a in this._attributions)this._attributions[a]&&s.push(a);var u=[];this.options.prefix&&u.push(this.options.prefix),s.length&&u.push(s.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});fe.mergeOptions({attributionControl:!0}),fe.addInitHook(function(){this.options.attributionControl&&new qh().addTo(this)});var Sk=function(s){return new qh(s)};dn.Layers=yv,dn.Zoom=Wh,dn.Scale=_v,dn.Attribution=qh,uo.layers=_k,uo.zoom=wk,uo.scale=Ek,uo.attribution=Sk;var In=Jt.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});In.addTo=function(s,a){return s.addHandler(a,this),this};var Ck={Events:lt},wv=K.touch?"touchstart mousedown":"mousedown",vi=Vn.extend({options:{clickTolerance:3},initialize:function(s,a,u,d){k(this,d),this._element=s,this._dragStartTarget=a||s,this._preventOutline=u},enable:function(){this._enabled||(re(this._dragStartTarget,wv,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(vi._dragging===this&&this.finishDrag(!0),Ie(this._dragStartTarget,wv,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Rh(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){vi._dragging===this&&this.finishDrag();return}if(!(vi._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(vi._dragging=this,this._preventOutline&&zh(this._element),Mh(),so(),!this._moving)){this.fire("down");var a=s.touches?s.touches[0]:s,u=dv(this._element);this._startPoint=new O(a.clientX,a.clientY),this._startPos=sr(this._element),this._parentScale=Fh(u);var d=s.type==="mousedown";re(document,d?"mousemove":"touchmove",this._onMove,this),re(document,d?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var a=s.touches&&s.touches.length===1?s.touches[0]:s,u=new O(a.clientX,a.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,ut(s),this._moved||(this.fire("dragstart"),this._moved=!0,le(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),le(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),He(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){je(document.body,"leaflet-dragging"),this._lastTarget&&(je(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ie(document,"mousemove touchmove",this._onMove,this),Ie(document,"mouseup touchend touchcancel",this._onUp,this),bh(),oo();var a=this._moved&&this._moving;this._moving=!1,vi._dragging=!1,a&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Ev(s,a,u){var d,p=[1,4,2,8],g,E,I,x,D,V,Q,ue;for(g=0,V=s.length;g<V;g++)s[g]._code=lr(s[g],a);for(I=0;I<4;I++){for(Q=p[I],d=[],g=0,V=s.length,E=V-1;g<V;E=g++)x=s[g],D=s[E],x._code&Q?D._code&Q||(ue=gl(D,x,Q,a,u),ue._code=lr(ue,a),d.push(ue)):(D._code&Q&&(ue=gl(D,x,Q,a,u),ue._code=lr(ue,a),d.push(ue)),d.push(x));s=d}return s}function Tv(s,a){var u,d,p,g,E,I,x,D,V;if(!s||s.length===0)throw new Error("latlngs not passed");tn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Q=ie([0,0]),ue=Ce(s),Lt=ue.getNorthWest().distanceTo(ue.getSouthWest())*ue.getNorthEast().distanceTo(ue.getNorthWest());Lt<1700&&(Q=Zh(s));var nt=s.length,nn=[];for(u=0;u<nt;u++){var zt=ie(s[u]);nn.push(a.project(ie([zt.lat-Q.lat,zt.lng-Q.lng])))}for(I=x=D=0,u=0,d=nt-1;u<nt;d=u++)p=nn[u],g=nn[d],E=p.y*g.x-g.y*p.x,x+=(p.x+g.x)*E,D+=(p.y+g.y)*E,I+=E*3;I===0?V=nn[0]:V=[x/I,D/I];var Kr=a.unproject(F(V));return ie([Kr.lat+Q.lat,Kr.lng+Q.lng])}function Zh(s){for(var a=0,u=0,d=0,p=0;p<s.length;p++){var g=ie(s[p]);a+=g.lat,u+=g.lng,d++}return ie([a/d,u/d])}var kk={__proto__:null,clipPolygon:Ev,polygonCenter:Tv,centroid:Zh};function Sv(s,a){if(!a||!s.length)return s.slice();var u=a*a;return s=Pk(s,u),s=xk(s,u),s}function Cv(s,a,u){return Math.sqrt(co(s,a,u,!0))}function Ik(s,a,u){return co(s,a,u)}function xk(s,a){var u=s.length,d=typeof Uint8Array!=void 0+""?Uint8Array:Array,p=new d(u);p[0]=p[u-1]=1,Kh(s,p,a,0,u-1);var g,E=[];for(g=0;g<u;g++)p[g]&&E.push(s[g]);return E}function Kh(s,a,u,d,p){var g=0,E,I,x;for(I=d+1;I<=p-1;I++)x=co(s[I],s[d],s[p],!0),x>g&&(E=I,g=x);g>u&&(a[E]=1,Kh(s,a,u,d,E),Kh(s,a,u,E,p))}function Pk(s,a){for(var u=[s[0]],d=1,p=0,g=s.length;d<g;d++)Lk(s[d],s[p])>a&&(u.push(s[d]),p=d);return p<g-1&&u.push(s[g-1]),u}var kv;function Iv(s,a,u,d,p){var g=d?kv:lr(s,u),E=lr(a,u),I,x,D;for(kv=E;;){if(!(g|E))return[s,a];if(g&E)return!1;I=g||E,x=gl(s,a,I,u,p),D=lr(x,u),I===g?(s=x,g=D):(a=x,E=D)}}function gl(s,a,u,d,p){var g=a.x-s.x,E=a.y-s.y,I=d.min,x=d.max,D,V;return u&8?(D=s.x+g*(x.y-s.y)/E,V=x.y):u&4?(D=s.x+g*(I.y-s.y)/E,V=I.y):u&2?(D=x.x,V=s.y+E*(x.x-s.x)/g):u&1&&(D=I.x,V=s.y+E*(I.x-s.x)/g),new O(D,V,p)}function lr(s,a){var u=0;return s.x<a.min.x?u|=1:s.x>a.max.x&&(u|=2),s.y<a.min.y?u|=4:s.y>a.max.y&&(u|=8),u}function Lk(s,a){var u=a.x-s.x,d=a.y-s.y;return u*u+d*d}function co(s,a,u,d){var p=a.x,g=a.y,E=u.x-p,I=u.y-g,x=E*E+I*I,D;return x>0&&(D=((s.x-p)*E+(s.y-g)*I)/x,D>1?(p=u.x,g=u.y):D>0&&(p+=E*D,g+=I*D)),E=s.x-p,I=s.y-g,d?E*E+I*I:new O(p,g)}function tn(s){return!w(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function xv(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),tn(s)}function Pv(s,a){var u,d,p,g,E,I,x,D;if(!s||s.length===0)throw new Error("latlngs not passed");tn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var V=ie([0,0]),Q=Ce(s),ue=Q.getNorthWest().distanceTo(Q.getSouthWest())*Q.getNorthEast().distanceTo(Q.getNorthWest());ue<1700&&(V=Zh(s));var Lt=s.length,nt=[];for(u=0;u<Lt;u++){var nn=ie(s[u]);nt.push(a.project(ie([nn.lat-V.lat,nn.lng-V.lng])))}for(u=0,d=0;u<Lt-1;u++)d+=nt[u].distanceTo(nt[u+1])/2;if(d===0)D=nt[0];else for(u=0,g=0;u<Lt-1;u++)if(E=nt[u],I=nt[u+1],p=E.distanceTo(I),g+=p,g>d){x=(g-d)/p,D=[I.x-x*(I.x-E.x),I.y-x*(I.y-E.y)];break}var zt=a.unproject(F(D));return ie([zt.lat+V.lat,zt.lng+V.lng])}var Ak={__proto__:null,simplify:Sv,pointToSegmentDistance:Cv,closestPointOnSegment:Ik,clipSegment:Iv,_getEdgeIntersection:gl,_getBitCode:lr,_sqClosestPointOnSegment:co,isFlat:tn,_flat:xv,polylineCenter:Pv},Gh={project:function(s){return new O(s.lng,s.lat)},unproject:function(s){return new ye(s.y,s.x)},bounds:new X([-180,-90],[180,90])},Qh={R:6378137,R_MINOR:6356752314245179e-9,bounds:new X([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var a=Math.PI/180,u=this.R,d=s.lat*a,p=this.R_MINOR/u,g=Math.sqrt(1-p*p),E=g*Math.sin(d),I=Math.tan(Math.PI/4-d/2)/Math.pow((1-E)/(1+E),g/2);return d=-u*Math.log(Math.max(I,1e-10)),new O(s.lng*a*u,d)},unproject:function(s){for(var a=180/Math.PI,u=this.R,d=this.R_MINOR/u,p=Math.sqrt(1-d*d),g=Math.exp(-s.y/u),E=Math.PI/2-2*Math.atan(g),I=0,x=.1,D;I<15&&Math.abs(x)>1e-7;I++)D=p*Math.sin(E),D=Math.pow((1-D)/(1+D),p/2),x=Math.PI/2-2*Math.atan(g*D)-E,E+=x;return new ye(E*a,s.x*a/u)}},Nk={__proto__:null,LonLat:Gh,Mercator:Qh,SphericalMercator:Th},Rk=r({},gi,{code:"EPSG:3395",projection:Qh,transformation:function(){var s=.5/(Math.PI*Qh.R);return to(s,.5,-s,.5)}()}),Lv=r({},gi,{code:"EPSG:4326",projection:Gh,transformation:to(1/180,1,-1/180,.5)}),Ok=r({},$t,{projection:Gh,transformation:to(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,a){var u=a.lng-s.lng,d=a.lat-s.lat;return Math.sqrt(u*u+d*d)},infinite:!0});$t.Earth=gi,$t.EPSG3395=Rk,$t.EPSG3857=Ch,$t.EPSG900913=FC,$t.EPSG4326=Lv,$t.Simple=Ok;var fn=Vn.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var a=s.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var u=this.getEvents();a.on(u,this),this.once("remove",function(){a.off(u,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});fe.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var a=h(s);return this._layers[a]?this:(this._layers[a]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var a=h(s);return this._layers[a]?(this._loaded&&s.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,a){for(var u in this._layers)s.call(a,this._layers[u]);return this},_addLayers:function(s){s=s?w(s)?s:[s]:[];for(var a=0,u=s.length;a<u;a++)this.addLayer(s[a])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var a=h(s);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,a=-1/0,u=this._getZoomSpan();for(var d in this._zoomBoundLayers){var p=this._zoomBoundLayers[d].options;s=p.minZoom===void 0?s:Math.min(s,p.minZoom),a=p.maxZoom===void 0?a:Math.max(a,p.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=s===1/0?void 0:s,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Vr=fn.extend({initialize:function(s,a){k(this,a),this._layers={};var u,d;if(s)for(u=0,d=s.length;u<d;u++)this.addLayer(s[u])},addLayer:function(s){var a=this.getLayerId(s);return this._layers[a]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var a=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(s){var a=typeof s=="number"?s:this.getLayerId(s);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var a=Array.prototype.slice.call(arguments,1),u,d;for(u in this._layers)d=this._layers[u],d[s]&&d[s].apply(d,a);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,a){for(var u in this._layers)s.call(a,this._layers[u]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),Dk=function(s,a){return new Vr(s,a)},Hn=Vr.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Vr.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Vr.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Qe;for(var a in this._layers){var u=this._layers[a];s.extend(u.getBounds?u.getBounds():u.getLatLng())}return s}}),Mk=function(s,a){return new Hn(s,a)},Hr=Jt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){k(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,a){var u=this._getIconUrl(s);if(!u){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(u,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(d,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),d},_setIconStyles:function(s,a){var u=this.options,d=u[a+"Size"];typeof d=="number"&&(d=[d,d]);var p=F(d),g=F(a==="shadow"&&u.shadowAnchor||u.iconAnchor||p&&p.divideBy(2,!0));s.className="leaflet-marker-"+a+" "+(u.className||""),g&&(s.style.marginLeft=-g.x+"px",s.style.marginTop=-g.y+"px"),p&&(s.style.width=p.x+"px",s.style.height=p.y+"px")},_createImg:function(s,a){return a=a||document.createElement("img"),a.src=s,a},_getIconUrl:function(s){return K.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function bk(s){return new Hr(s)}var ho=Hr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof ho.imagePath!="string"&&(ho.imagePath=this._detectIconPath()),(this.options.imagePath||ho.imagePath)+Hr.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var a=function(u,d,p){var g=d.exec(u);return g&&g[p]};return s=a(s,/^url\((['"])?(.+)\1\)$/,2),s&&a(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=_e("div","leaflet-default-icon-path",document.body),a=ro(s,"background-image")||ro(s,"backgroundImage");if(document.body.removeChild(s),a=this._stripUrl(a),a)return a;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),Av=In.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new vi(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),le(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&je(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var a=this._marker,u=a._map,d=this._marker.options.autoPanSpeed,p=this._marker.options.autoPanPadding,g=sr(a._icon),E=u.getPixelBounds(),I=u.getPixelOrigin(),x=me(E.min._subtract(I).add(p),E.max._subtract(I).subtract(p));if(!x.contains(g)){var D=F((Math.max(x.max.x,g.x)-x.max.x)/(E.max.x-x.max.x)-(Math.min(x.min.x,g.x)-x.min.x)/(E.min.x-x.min.x),(Math.max(x.max.y,g.y)-x.max.y)/(E.max.y-x.max.y)-(Math.min(x.min.y,g.y)-x.min.y)/(E.min.y-x.min.y)).multiplyBy(d);u.panBy(D,{animate:!1}),this._draggable._newPos._add(D),this._draggable._startPos._add(D),He(a._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=ke(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(tt(this._panRequest),this._panRequest=ke(this._adjustPan.bind(this,s)))},_onDrag:function(s){var a=this._marker,u=a._shadow,d=sr(a._icon),p=a._map.layerPointToLatLng(d);u&&He(u,d),a._latlng=p,s.latlng=p,s.oldLatLng=this._oldLatLng,a.fire("move",s).fire("drag",s)},_onDragEnd:function(s){tt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),vl=fn.extend({options:{icon:new ho,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,a){k(this,a),this._latlng=ie(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var a=this._latlng;return this._latlng=ie(s),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=s.icon.createIcon(this._icon),d=!1;u!==this._icon&&(this._icon&&this._removeIcon(),d=!0,s.title&&(u.title=s.title),u.tagName==="IMG"&&(u.alt=s.alt||"")),le(u,a),s.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&re(u,"focus",this._panOnFocus,this);var p=s.icon.createShadow(this._shadow),g=!1;p!==this._shadow&&(this._removeShadow(),g=!0),p&&(le(p,a),p.alt=""),this._shadow=p,s.opacity<1&&this._updateOpacity(),d&&this.getPane().appendChild(this._icon),this._initInteraction(),p&&g&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ie(this._icon,"focus",this._panOnFocus,this),Me(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Me(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&He(this._icon,s),this._shadow&&He(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(le(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Av)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Av(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&en(this._icon,s),this._shadow&&en(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var a=this.options.icon.options,u=a.iconSize?F(a.iconSize):F(0,0),d=a.iconAnchor?F(a.iconAnchor):F(0,0);s.panInside(this._latlng,{paddingTopLeft:d,paddingBottomRight:u.subtract(d)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function $k(s,a){return new vl(s,a)}var yi=fn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return k(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),yl=yi.extend({options:{fill:!0,radius:10},initialize:function(s,a){k(this,a),this._latlng=ie(s),this._radius=this.options.radius},setLatLng:function(s){var a=this._latlng;return this._latlng=ie(s),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var a=s&&s.radius||this._radius;return yi.prototype.setStyle.call(this,s),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,a=this._radiusY||s,u=this._clickTolerance(),d=[s+u,a+u];this._pxBounds=new X(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function zk(s,a){return new yl(s,a)}var Yh=yl.extend({initialize:function(s,a,u){if(typeof a=="number"&&(a=r({},u,{radius:a})),k(this,a),this._latlng=ie(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Qe(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:yi.prototype.setStyle,_project:function(){var s=this._latlng.lng,a=this._latlng.lat,u=this._map,d=u.options.crs;if(d.distance===gi.distance){var p=Math.PI/180,g=this._mRadius/gi.R/p,E=u.project([a+g,s]),I=u.project([a-g,s]),x=E.add(I).divideBy(2),D=u.unproject(x).lat,V=Math.acos((Math.cos(g*p)-Math.sin(a*p)*Math.sin(D*p))/(Math.cos(a*p)*Math.cos(D*p)))/p;(isNaN(V)||V===0)&&(V=g/Math.cos(Math.PI/180*a)),this._point=x.subtract(u.getPixelOrigin()),this._radius=isNaN(V)?0:x.x-u.project([D,s-V]).x,this._radiusY=x.y-E.y}else{var Q=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(Q).x}this._updateBounds()}});function Fk(s,a,u){return new Yh(s,a,u)}var Wn=yi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,a){k(this,a),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var a=1/0,u=null,d=co,p,g,E=0,I=this._parts.length;E<I;E++)for(var x=this._parts[E],D=1,V=x.length;D<V;D++){p=x[D-1],g=x[D];var Q=d(s,p,g,!0);Q<a&&(a=Q,u=d(s,p,g))}return u&&(u.distance=Math.sqrt(a)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Pv(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,a){return a=a||this._defaultShape(),s=ie(s),a.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Qe,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return tn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var a=[],u=tn(s),d=0,p=s.length;d<p;d++)u?(a[d]=ie(s[d]),this._bounds.extend(a[d])):a[d]=this._convertLatLngs(s[d]);return a},_project:function(){var s=new X;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),a=new O(s,s);this._rawPxBounds&&(this._pxBounds=new X([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(s,a,u){var d=s[0]instanceof ye,p=s.length,g,E;if(d){for(E=[],g=0;g<p;g++)E[g]=this._map.latLngToLayerPoint(s[g]),u.extend(E[g]);a.push(E)}else for(g=0;g<p;g++)this._projectLatlngs(s[g],a,u)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,u,d,p,g,E,I,x;for(u=0,p=0,g=this._rings.length;u<g;u++)for(x=this._rings[u],d=0,E=x.length;d<E-1;d++)I=Iv(x[d],x[d+1],s,d,!0),I&&(a[p]=a[p]||[],a[p].push(I[0]),(I[1]!==x[d+1]||d===E-2)&&(a[p].push(I[1]),p++))}},_simplifyPoints:function(){for(var s=this._parts,a=this.options.smoothFactor,u=0,d=s.length;u<d;u++)s[u]=Sv(s[u],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,a){var u,d,p,g,E,I,x=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(u=0,g=this._parts.length;u<g;u++)for(I=this._parts[u],d=0,E=I.length,p=E-1;d<E;p=d++)if(!(!a&&d===0)&&Cv(s,I[p],I[d])<=x)return!0;return!1}});function Bk(s,a){return new Wn(s,a)}Wn._flat=xv;var Wr=Wn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Tv(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var a=Wn.prototype._convertLatLngs.call(this,s),u=a.length;return u>=2&&a[0]instanceof ye&&a[0].equals(a[u-1])&&a.pop(),a},_setLatLngs:function(s){Wn.prototype._setLatLngs.call(this,s),tn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return tn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,a=this.options.weight,u=new O(a,a);if(s=new X(s.min.subtract(u),s.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var d=0,p=this._rings.length,g;d<p;d++)g=Ev(this._rings[d],s,!0),g.length&&this._parts.push(g)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var a=!1,u,d,p,g,E,I,x,D;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(g=0,x=this._parts.length;g<x;g++)for(u=this._parts[g],E=0,D=u.length,I=D-1;E<D;I=E++)d=u[E],p=u[I],d.y>s.y!=p.y>s.y&&s.x<(p.x-d.x)*(s.y-d.y)/(p.y-d.y)+d.x&&(a=!a);return a||Wn.prototype._containsPoint.call(this,s,!0)}});function Uk(s,a){return new Wr(s,a)}var qn=Hn.extend({initialize:function(s,a){k(this,a),this._layers={},s&&this.addData(s)},addData:function(s){var a=w(s)?s:s.features,u,d,p;if(a){for(u=0,d=a.length;u<d;u++)p=a[u],(p.geometries||p.geometry||p.features||p.coordinates)&&this.addData(p);return this}var g=this.options;if(g.filter&&!g.filter(s))return this;var E=_l(s,g);return E?(E.feature=Tl(s),E.defaultOptions=E.options,this.resetStyle(E),g.onEachFeature&&g.onEachFeature(s,E),this.addLayer(E)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(a){this._setLayerStyle(a,s)},this)},_setLayerStyle:function(s,a){s.setStyle&&(typeof a=="function"&&(a=a(s.feature)),s.setStyle(a))}});function _l(s,a){var u=s.type==="Feature"?s.geometry:s,d=u?u.coordinates:null,p=[],g=a&&a.pointToLayer,E=a&&a.coordsToLatLng||Xh,I,x,D,V;if(!d&&!u)return null;switch(u.type){case"Point":return I=E(d),Nv(g,s,I,a);case"MultiPoint":for(D=0,V=d.length;D<V;D++)I=E(d[D]),p.push(Nv(g,s,I,a));return new Hn(p);case"LineString":case"MultiLineString":return x=wl(d,u.type==="LineString"?0:1,E),new Wn(x,a);case"Polygon":case"MultiPolygon":return x=wl(d,u.type==="Polygon"?1:2,E),new Wr(x,a);case"GeometryCollection":for(D=0,V=u.geometries.length;D<V;D++){var Q=_l({geometry:u.geometries[D],type:"Feature",properties:s.properties},a);Q&&p.push(Q)}return new Hn(p);case"FeatureCollection":for(D=0,V=u.features.length;D<V;D++){var ue=_l(u.features[D],a);ue&&p.push(ue)}return new Hn(p);default:throw new Error("Invalid GeoJSON object.")}}function Nv(s,a,u,d){return s?s(a,u):new vl(u,d&&d.markersInheritOptions&&d)}function Xh(s){return new ye(s[1],s[0],s[2])}function wl(s,a,u){for(var d=[],p=0,g=s.length,E;p<g;p++)E=a?wl(s[p],a-1,u):(u||Xh)(s[p]),d.push(E);return d}function Jh(s,a){return s=ie(s),s.alt!==void 0?[y(s.lng,a),y(s.lat,a),y(s.alt,a)]:[y(s.lng,a),y(s.lat,a)]}function El(s,a,u,d){for(var p=[],g=0,E=s.length;g<E;g++)p.push(a?El(s[g],tn(s[g])?0:a-1,u,d):Jh(s[g],d));return!a&&u&&p.length>0&&p.push(p[0].slice()),p}function qr(s,a){return s.feature?r({},s.feature,{geometry:a}):Tl(a)}function Tl(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var ed={toGeoJSON:function(s){return qr(this,{type:"Point",coordinates:Jh(this.getLatLng(),s)})}};vl.include(ed),Yh.include(ed),yl.include(ed),Wn.include({toGeoJSON:function(s){var a=!tn(this._latlngs),u=El(this._latlngs,a?1:0,!1,s);return qr(this,{type:(a?"Multi":"")+"LineString",coordinates:u})}}),Wr.include({toGeoJSON:function(s){var a=!tn(this._latlngs),u=a&&!tn(this._latlngs[0]),d=El(this._latlngs,u?2:a?1:0,!0,s);return a||(d=[d]),qr(this,{type:(u?"Multi":"")+"Polygon",coordinates:d})}}),Vr.include({toMultiPoint:function(s){var a=[];return this.eachLayer(function(u){a.push(u.toGeoJSON(s).geometry.coordinates)}),qr(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(s){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(s);var u=a==="GeometryCollection",d=[];return this.eachLayer(function(p){if(p.toGeoJSON){var g=p.toGeoJSON(s);if(u)d.push(g.geometry);else{var E=Tl(g);E.type==="FeatureCollection"?d.push.apply(d,E.features):d.push(E)}}}),u?qr(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}});function Rv(s,a){return new qn(s,a)}var jk=Rv,Sl=fn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,a,u){this._url=s,this._bounds=Ce(a),k(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(le(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Me(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Ur(this._image),this},bringToBack:function(){return this._map&&jr(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Ce(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",a=this._image=s?this._url:_e("img");if(le(a,"leaflet-image-layer"),this._zoomAnimated&&le(a,"leaflet-zoom-animated"),this.options.className&&le(a,this.options.className),a.onselectstart=v,a.onmousemove=v,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(s){var a=this._map.getZoomScale(s.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;rr(this._image,u,a)},_reset:function(){var s=this._image,a=new X(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=a.getSize();He(s,a.min),s.style.width=u.x+"px",s.style.height=u.y+"px"},_updateOpacity:function(){en(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),Vk=function(s,a,u){return new Sl(s,a,u)},Ov=Sl.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",a=this._image=s?this._url:_e("video");if(le(a,"leaflet-image-layer"),this._zoomAnimated&&le(a,"leaflet-zoom-animated"),this.options.className&&le(a,this.options.className),a.onselectstart=v,a.onmousemove=v,a.onloadeddata=l(this.fire,this,"load"),s){for(var u=a.getElementsByTagName("source"),d=[],p=0;p<u.length;p++)d.push(u[p].src);this._url=u.length>0?d:[a.src];return}w(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var g=0;g<this._url.length;g++){var E=_e("source");E.src=this._url[g],a.appendChild(E)}}});function Hk(s,a,u){return new Ov(s,a,u)}var Dv=Sl.extend({_initImage:function(){var s=this._image=this._url;le(s,"leaflet-image-layer"),this._zoomAnimated&&le(s,"leaflet-zoom-animated"),this.options.className&&le(s,this.options.className),s.onselectstart=v,s.onmousemove=v}});function Wk(s,a,u){return new Dv(s,a,u)}var xn=fn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,a){s&&(s instanceof ye||w(s))?(this._latlng=ie(s),k(this,a)):(k(this,s),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&en(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&en(this._container,1),this.bringToFront(),this.options.interactive&&(le(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(en(this._container,0),this._removeTimeout=setTimeout(l(Me,void 0,this._container),200)):Me(this._container),this.options.interactive&&(je(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ie(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ur(this._container),this},bringToBack:function(){return this._map&&jr(this._container),this},_prepareOpen:function(s){var a=this._source;if(!a._map)return!1;if(a instanceof Hn){a=null;var u=this._source._layers;for(var d in u)if(u[d]._map){a=u[d];break}if(!a)return!1;this._source=a}if(!s)if(a.getCenter)s=a.getCenter();else if(a.getLatLng)s=a.getLatLng();else if(a.getBounds)s=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")s.innerHTML=a;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),a=F(this.options.offset),u=this._getAnchor();this._zoomAnimated?He(this._container,s.add(u)):a=a.add(s).add(u);var d=this._containerBottom=-a.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=d+"px",this._container.style.left=p+"px"}},_getAnchor:function(){return[0,0]}});fe.include({_initOverlay:function(s,a,u,d){var p=a;return p instanceof s||(p=new s(d).setContent(a)),u&&p.setLatLng(u),p}}),fn.include({_initOverlay:function(s,a,u,d){var p=u;return p instanceof s?(k(p,d),p._source=this):(p=a&&!d?a:new s(d,this),p.setContent(u)),p}});var Cl=xn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,xn.prototype.openOn.call(this,s)},onAdd:function(s){xn.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof yi||this._source.on("preclick",or))},onRemove:function(s){xn.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof yi||this._source.off("preclick",or))},getEvents:function(){var s=xn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",a=this._container=_e("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=_e("div",s+"-content-wrapper",a);if(this._contentNode=_e("div",s+"-content",u),lo(a),Vh(this._contentNode),re(a,"contextmenu",or),this._tipContainer=_e("div",s+"-tip-container",a),this._tip=_e("div",s+"-tip",this._tipContainer),this.options.closeButton){var d=this._closeButton=_e("a",s+"-close-button",a);d.setAttribute("role","button"),d.setAttribute("aria-label","Close popup"),d.href="#close",d.innerHTML='<span aria-hidden="true">&#215;</span>',re(d,"click",function(p){ut(p),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,a=s.style;a.width="",a.whiteSpace="nowrap";var u=s.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),a.width=u+1+"px",a.whiteSpace="",a.height="";var d=s.offsetHeight,p=this.options.maxHeight,g="leaflet-popup-scrolled";p&&d>p?(a.height=p+"px",le(s,g)):je(s,g),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),u=this._getAnchor();He(this._container,a.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,a=parseInt(ro(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+a,d=this._containerWidth,p=new O(this._containerLeft,-u-this._containerBottom);p._add(sr(this._container));var g=s.layerPointToContainerPoint(p),E=F(this.options.autoPanPadding),I=F(this.options.autoPanPaddingTopLeft||E),x=F(this.options.autoPanPaddingBottomRight||E),D=s.getSize(),V=0,Q=0;g.x+d+x.x>D.x&&(V=g.x+d-D.x+x.x),g.x-V-I.x<0&&(V=g.x-I.x),g.y+u+x.y>D.y&&(Q=g.y+u-D.y+x.y),g.y-Q-I.y<0&&(Q=g.y-I.y),(V||Q)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([V,Q]))}},_getAnchor:function(){return F(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),qk=function(s,a){return new Cl(s,a)};fe.mergeOptions({closePopupOnClick:!0}),fe.include({openPopup:function(s,a,u){return this._initOverlay(Cl,s,a,u).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),fn.include({bindPopup:function(s,a){return this._popup=this._initOverlay(Cl,this._popup,s,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof Hn||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){ar(s);var a=s.layer||s.target;if(this._popup._source===a&&!(a instanceof yi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=a,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var kl=xn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){xn.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){xn.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=xn.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",a=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=_e("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var a,u,d=this._map,p=this._container,g=d.latLngToContainerPoint(d.getCenter()),E=d.layerPointToContainerPoint(s),I=this.options.direction,x=p.offsetWidth,D=p.offsetHeight,V=F(this.options.offset),Q=this._getAnchor();I==="top"?(a=x/2,u=D):I==="bottom"?(a=x/2,u=0):I==="center"?(a=x/2,u=D/2):I==="right"?(a=0,u=D/2):I==="left"?(a=x,u=D/2):E.x<g.x?(I="right",a=0,u=D/2):(I="left",a=x+(V.x+Q.x)*2,u=D/2),s=s.subtract(F(a,u,!0)).add(V).add(Q),je(p,"leaflet-tooltip-right"),je(p,"leaflet-tooltip-left"),je(p,"leaflet-tooltip-top"),je(p,"leaflet-tooltip-bottom"),le(p,"leaflet-tooltip-"+I),He(p,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&en(this._container,s)},_animateZoom:function(s){var a=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(a)},_getAnchor:function(){return F(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Zk=function(s,a){return new kl(s,a)};fe.include({openTooltip:function(s,a,u){return this._initOverlay(kl,s,a,u).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),fn.include({bindTooltip:function(s,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(kl,this._tooltip,s,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var a=s?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[a](u),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof Hn||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&(re(a,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),re(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var a=typeof s.getElement=="function"&&s.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var a=s.latlng,u,d;this._tooltip.options.sticky&&s.originalEvent&&(u=this._map.mouseEventToContainerPoint(s.originalEvent),d=this._map.containerPointToLayerPoint(u),a=this._map.layerPointToLatLng(d)),this._tooltip.setLatLng(a)}});var Mv=Hr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var a=s&&s.tagName==="DIV"?s:document.createElement("div"),u=this.options;if(u.html instanceof Element?(hl(a),a.appendChild(u.html)):a.innerHTML=u.html!==!1?u.html:"",u.bgPos){var d=F(u.bgPos);a.style.backgroundPosition=-d.x+"px "+-d.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function Kk(s){return new Mv(s)}Hr.Default=ho;var fo=fn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:K.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){k(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Me(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ur(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(jr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof O?s:new O(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var a=this.getPane().children,u=-s(-1/0,1/0),d=0,p=a.length,g;d<p;d++)g=a[d].style.zIndex,a[d]!==this._container&&g&&(u=s(u,+g));isFinite(u)&&(this.options.zIndex=u+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!K.ielt9){en(this._container,this.options.opacity);var s=+new Date,a=!1,u=!1;for(var d in this._tiles){var p=this._tiles[d];if(!(!p.current||!p.loaded)){var g=Math.min(1,(s-p.loaded)/200);en(p.el,g),g<1?a=!0:(p.active?u=!0:this._onOpaqueTile(p),p.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),a&&(tt(this._fadeFrame),this._fadeFrame=ke(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=_e("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,a=this.options.maxZoom;if(s!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===s?(this._levels[u].el.style.zIndex=a-Math.abs(s-u),this._onUpdateLevel(u)):(Me(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var d=this._levels[s],p=this._map;return d||(d=this._levels[s]={},d.el=_e("div","leaflet-tile-container leaflet-zoom-animated",this._container),d.el.style.zIndex=a,d.origin=p.project(p.unproject(p.getPixelOrigin()),s).round(),d.zoom=s,this._setZoomTransform(d,p.getCenter(),p.getZoom()),v(d.el.offsetWidth),this._onCreateLevel(d)),this._level=d,d}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var s,a,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)a=this._tiles[s],a.retain=a.current;for(s in this._tiles)if(a=this._tiles[s],a.current&&!a.active){var d=a.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var a in this._tiles)this._tiles[a].coords.z===s&&this._removeTile(a)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Me(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,a,u,d){var p=Math.floor(s/2),g=Math.floor(a/2),E=u-1,I=new O(+p,+g);I.z=+E;var x=this._tileCoordsToKey(I),D=this._tiles[x];return D&&D.active?(D.retain=!0,!0):(D&&D.loaded&&(D.retain=!0),E>d?this._retainParent(p,g,E,d):!1)},_retainChildren:function(s,a,u,d){for(var p=2*s;p<2*s+2;p++)for(var g=2*a;g<2*a+2;g++){var E=new O(p,g);E.z=u+1;var I=this._tileCoordsToKey(E),x=this._tiles[I];if(x&&x.active){x.retain=!0;continue}else x&&x.loaded&&(x.retain=!0);u+1<d&&this._retainChildren(p,g,u+1,d)}},_resetView:function(s){var a=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var a=this.options;return a.minNativeZoom!==void 0&&s<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<s?a.maxNativeZoom:s},_setView:function(s,a,u,d){var p=Math.round(a);this.options.maxZoom!==void 0&&p>this.options.maxZoom||this.options.minZoom!==void 0&&p<this.options.minZoom?p=void 0:p=this._clampZoom(p);var g=this.options.updateWhenZooming&&p!==this._tileZoom;(!d||g)&&(this._tileZoom=p,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),p!==void 0&&this._update(s),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(s,a)},_setZoomTransforms:function(s,a){for(var u in this._levels)this._setZoomTransform(this._levels[u],s,a)},_setZoomTransform:function(s,a,u){var d=this._map.getZoomScale(u,s.zoom),p=s.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(a,u)).round();K.any3d?rr(s.el,p,d):He(s.el,p)},_resetGrid:function(){var s=this._map,a=s.options.crs,u=this._tileSize=this.getTileSize(),d=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,a.wrapLng[0]],d).x/u.x),Math.ceil(s.project([0,a.wrapLng[1]],d).x/u.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([a.wrapLat[0],0],d).y/u.x),Math.ceil(s.project([a.wrapLat[1],0],d).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var a=this._map,u=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),d=a.getZoomScale(u,this._tileZoom),p=a.project(s,this._tileZoom).floor(),g=a.getSize().divideBy(d*2);return new X(p.subtract(g),p.add(g))},_update:function(s){var a=this._map;if(a){var u=this._clampZoom(a.getZoom());if(s===void 0&&(s=a.getCenter()),this._tileZoom!==void 0){var d=this._getTiledPixelBounds(s),p=this._pxBoundsToTileRange(d),g=p.getCenter(),E=[],I=this.options.keepBuffer,x=new X(p.getBottomLeft().subtract([I,-I]),p.getTopRight().add([I,-I]));if(!(isFinite(p.min.x)&&isFinite(p.min.y)&&isFinite(p.max.x)&&isFinite(p.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var D in this._tiles){var V=this._tiles[D].coords;(V.z!==this._tileZoom||!x.contains(new O(V.x,V.y)))&&(this._tiles[D].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(s,u);return}for(var Q=p.min.y;Q<=p.max.y;Q++)for(var ue=p.min.x;ue<=p.max.x;ue++){var Lt=new O(ue,Q);if(Lt.z=this._tileZoom,!!this._isValidTile(Lt)){var nt=this._tiles[this._tileCoordsToKey(Lt)];nt?nt.current=!0:E.push(Lt)}}if(E.sort(function(zt,Kr){return zt.distanceTo(g)-Kr.distanceTo(g)}),E.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var nn=document.createDocumentFragment();for(ue=0;ue<E.length;ue++)this._addTile(E[ue],nn);this._level.el.appendChild(nn)}}}},_isValidTile:function(s){var a=this._map.options.crs;if(!a.infinite){var u=this._globalTileRange;if(!a.wrapLng&&(s.x<u.min.x||s.x>u.max.x)||!a.wrapLat&&(s.y<u.min.y||s.y>u.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(s);return Ce(this.options.bounds).overlaps(d)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var a=this._map,u=this.getTileSize(),d=s.scaleBy(u),p=d.add(u),g=a.unproject(d,s.z),E=a.unproject(p,s.z);return[g,E]},_tileCoordsToBounds:function(s){var a=this._tileCoordsToNwSe(s),u=new Qe(a[0],a[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var a=s.split(":"),u=new O(+a[0],+a[1]);return u.z=+a[2],u},_removeTile:function(s){var a=this._tiles[s];a&&(Me(a.el),delete this._tiles[s],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){le(s,"leaflet-tile");var a=this.getTileSize();s.style.width=a.x+"px",s.style.height=a.y+"px",s.onselectstart=v,s.onmousemove=v,K.ielt9&&this.options.opacity<1&&en(s,this.options.opacity)},_addTile:function(s,a){var u=this._getTilePos(s),d=this._tileCoordsToKey(s),p=this.createTile(this._wrapCoords(s),l(this._tileReady,this,s));this._initTile(p),this.createTile.length<2&&ke(l(this._tileReady,this,s,null,p)),He(p,u),this._tiles[d]={el:p,coords:s,current:!0},a.appendChild(p),this.fire("tileloadstart",{tile:p,coords:s})},_tileReady:function(s,a,u){a&&this.fire("tileerror",{error:a,tile:u,coords:s});var d=this._tileCoordsToKey(s);u=this._tiles[d],u&&(u.loaded=+new Date,this._map._fadeAnimated?(en(u.el,0),tt(this._fadeFrame),this._fadeFrame=ke(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),a||(le(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),K.ielt9||!this._map._fadeAnimated?ke(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var a=new O(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return a.z=s.z,a},_pxBoundsToTileRange:function(s){var a=this.getTileSize();return new X(s.min.unscaleBy(a).floor(),s.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function Gk(s){return new fo(s)}var Zr=fo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,a){this._url=s,a=k(this,a),a.detectRetina&&K.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,a){return this._url===s&&a===void 0&&(a=!0),this._url=s,a||this.redraw(),this},createTile:function(s,a){var u=document.createElement("img");return re(u,"load",l(this._tileOnLoad,this,a,u)),re(u,"error",l(this._tileOnError,this,a,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(s),u},getTileUrl:function(s){var a={r:K.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-s.y;this.options.tms&&(a.y=u),a["-y"]=u}return _(this._url,r(a,this.options))},_tileOnLoad:function(s,a){K.ielt9?setTimeout(l(s,this,null,a),0):s(null,a)},_tileOnError:function(s,a,u){var d=this.options.errorTileUrl;d&&a.getAttribute("src")!==d&&(a.src=d),s(u,a)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,a=this.options.maxZoom,u=this.options.zoomReverse,d=this.options.zoomOffset;return u&&(s=a-s),s+d},_getSubdomain:function(s){var a=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var s,a;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(a=this._tiles[s].el,a.onload=v,a.onerror=v,!a.complete)){a.src=b;var u=this._tiles[s].coords;Me(a),delete this._tiles[s],this.fire("tileabort",{tile:a,coords:u})}},_removeTile:function(s){var a=this._tiles[s];if(a)return a.el.setAttribute("src",b),fo.prototype._removeTile.call(this,s)},_tileReady:function(s,a,u){if(!(!this._map||u&&u.getAttribute("src")===b))return fo.prototype._tileReady.call(this,s,a,u)}});function bv(s,a){return new Zr(s,a)}var $v=Zr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,a){this._url=s;var u=r({},this.defaultWmsParams);for(var d in a)d in this.options||(u[d]=a[d]);a=k(this,a);var p=a.detectRetina&&K.retina?2:1,g=this.getTileSize();u.width=g.x*p,u.height=g.y*p,this.wmsParams=u},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,Zr.prototype.onAdd.call(this,s)},getTileUrl:function(s){var a=this._tileCoordsToNwSe(s),u=this._crs,d=me(u.project(a[0]),u.project(a[1])),p=d.min,g=d.max,E=(this._wmsVersion>=1.3&&this._crs===Lv?[p.y,p.x,g.y,g.x]:[p.x,p.y,g.x,g.y]).join(","),I=Zr.prototype.getTileUrl.call(this,s);return I+M(this.wmsParams,I,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+E},setParams:function(s,a){return r(this.wmsParams,s),a||this.redraw(),this}});function Qk(s,a){return new $v(s,a)}Zr.WMS=$v,bv.wms=Qk;var Zn=fn.extend({options:{padding:.1},initialize:function(s){k(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),le(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,a){var u=this._map.getZoomScale(a,this._zoom),d=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,a),g=d.multiplyBy(-u).add(p).subtract(this._map._getNewPixelOrigin(s,a));K.any3d?rr(this._container,g,u):He(this._container,g)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,a=this._map.getSize(),u=this._map.containerPointToLayerPoint(a.multiplyBy(-s)).round();this._bounds=new X(u,u.add(a.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),zv=Zn.extend({options:{tolerance:0},getEvents:function(){var s=Zn.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Zn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");re(s,"mousemove",this._onMouseMove,this),re(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),re(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){tt(this._redrawRequest),delete this._ctx,Me(this._container),Ie(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var a in this._layers)s=this._layers[a],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Zn.prototype._update.call(this);var s=this._bounds,a=this._container,u=s.getSize(),d=K.retina?2:1;He(a,s.min),a.width=d*u.x,a.height=d*u.y,a.style.width=u.x+"px",a.style.height=u.y+"px",K.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Zn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var a=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var a=s._order,u=a.next,d=a.prev;u?u.prev=d:this._drawLast=d,d?d.next=u:this._drawFirst=u,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var a=s.options.dashArray.split(/[, ]+/),u=[],d,p;for(p=0;p<a.length;p++){if(d=Number(a[p]),isNaN(d))return;u.push(d)}s.options._dashArray=u}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||ke(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var a=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new X,this._redrawBounds.extend(s._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(s._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var a=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,a=this._redrawBounds;if(this._ctx.save(),a){var u=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var d=this._drawFirst;d;d=d.next)s=d.layer,(!a||s._pxBounds&&s._pxBounds.intersects(a))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,a){if(this._drawing){var u,d,p,g,E=s._parts,I=E.length,x=this._ctx;if(I){for(x.beginPath(),u=0;u<I;u++){for(d=0,p=E[u].length;d<p;d++)g=E[u][d],x[d?"lineTo":"moveTo"](g.x,g.y);a&&x.closePath()}this._fillStroke(x,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var a=s._point,u=this._ctx,d=Math.max(Math.round(s._radius),1),p=(Math.max(Math.round(s._radiusY),1)||d)/d;p!==1&&(u.save(),u.scale(1,p)),u.beginPath(),u.arc(a.x,a.y/p,d,0,Math.PI*2,!1),p!==1&&u.restore(),this._fillStroke(u,s)}},_fillStroke:function(s,a){var u=a.options;u.fill&&(s.globalAlpha=u.fillOpacity,s.fillStyle=u.fillColor||u.color,s.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(s.setLineDash&&s.setLineDash(a.options&&a.options._dashArray||[]),s.globalAlpha=u.opacity,s.lineWidth=u.weight,s.strokeStyle=u.color,s.lineCap=u.lineCap,s.lineJoin=u.lineJoin,s.stroke())},_onClick:function(s){for(var a=this._map.mouseEventToLayerPoint(s),u,d,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(a)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(u))&&(d=u);this._fireEvent(d?[d]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,a)}},_handleMouseOut:function(s){var a=this._hoveredLayer;a&&(je(this._container,"leaflet-interactive"),this._fireEvent([a],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,a){if(!this._mouseHoverThrottled){for(var u,d,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(a)&&(d=u);d!==this._hoveredLayer&&(this._handleMouseOut(s),d&&(le(this._container,"leaflet-interactive"),this._fireEvent([d],s,"mouseover"),this._hoveredLayer=d)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,a,u){this._map._fireDOMEvent(a,u||a.type,s)},_bringToFront:function(s){var a=s._order;if(a){var u=a.next,d=a.prev;if(u)u.prev=d;else return;d?d.next=u:u&&(this._drawFirst=u),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(s)}},_bringToBack:function(s){var a=s._order;if(a){var u=a.next,d=a.prev;if(d)d.next=u;else return;u?u.prev=d:d&&(this._drawLast=d),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(s)}}});function Fv(s){return K.canvas?new zv(s):null}var po=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Yk={_initContainer:function(){this._container=_e("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Zn.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var a=s._container=po("shape");le(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",s._path=po("path"),a.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var a=s._container;this._container.appendChild(a),s.options.interactive&&s.addInteractiveTarget(a)},_removePath:function(s){var a=s._container;Me(a),s.removeInteractiveTarget(a),delete this._layers[h(s)]},_updateStyle:function(s){var a=s._stroke,u=s._fill,d=s.options,p=s._container;p.stroked=!!d.stroke,p.filled=!!d.fill,d.stroke?(a||(a=s._stroke=po("stroke")),p.appendChild(a),a.weight=d.weight+"px",a.color=d.color,a.opacity=d.opacity,d.dashArray?a.dashStyle=w(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=d.lineCap.replace("butt","flat"),a.joinstyle=d.lineJoin):a&&(p.removeChild(a),s._stroke=null),d.fill?(u||(u=s._fill=po("fill")),p.appendChild(u),u.color=d.fillColor||d.color,u.opacity=d.fillOpacity):u&&(p.removeChild(u),s._fill=null)},_updateCircle:function(s){var a=s._point.round(),u=Math.round(s._radius),d=Math.round(s._radiusY||u);this._setPath(s,s._empty()?"M0 0":"AL "+a.x+","+a.y+" "+u+","+d+" 0,"+65535*360)},_setPath:function(s,a){s._path.v=a},_bringToFront:function(s){Ur(s._container)},_bringToBack:function(s){jr(s._container)}},Il=K.vml?po:Vg,mo=Zn.extend({_initContainer:function(){this._container=Il("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Il("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Me(this._container),Ie(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Zn.prototype._update.call(this);var s=this._bounds,a=s.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,u.setAttribute("width",a.x),u.setAttribute("height",a.y)),He(u,s.min),u.setAttribute("viewBox",[s.min.x,s.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(s){var a=s._path=Il("path");s.options.className&&le(a,s.options.className),s.options.interactive&&le(a,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Me(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var a=s._path,u=s.options;a&&(u.stroke?(a.setAttribute("stroke",u.color),a.setAttribute("stroke-opacity",u.opacity),a.setAttribute("stroke-width",u.weight),a.setAttribute("stroke-linecap",u.lineCap),a.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?a.setAttribute("stroke-dasharray",u.dashArray):a.removeAttribute("stroke-dasharray"),u.dashOffset?a.setAttribute("stroke-dashoffset",u.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),u.fill?(a.setAttribute("fill",u.fillColor||u.color),a.setAttribute("fill-opacity",u.fillOpacity),a.setAttribute("fill-rule",u.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(s,a){this._setPath(s,Hg(s._parts,a))},_updateCircle:function(s){var a=s._point,u=Math.max(Math.round(s._radius),1),d=Math.max(Math.round(s._radiusY),1)||u,p="a"+u+","+d+" 0 1,0 ",g=s._empty()?"M0 0":"M"+(a.x-u)+","+a.y+p+u*2+",0 "+p+-u*2+",0 ";this._setPath(s,g)},_setPath:function(s,a){s._path.setAttribute("d",a)},_bringToFront:function(s){Ur(s._path)},_bringToBack:function(s){jr(s._path)}});K.vml&&mo.include(Yk);function Bv(s){return K.svg||K.vml?new mo(s):null}fe.include({getRenderer:function(s){var a=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var a=this._paneRenderers[s];return a===void 0&&(a=this._createRenderer({pane:s}),this._paneRenderers[s]=a),a},_createRenderer:function(s){return this.options.preferCanvas&&Fv(s)||Bv(s)}});var Uv=Wr.extend({initialize:function(s,a){Wr.prototype.initialize.call(this,this._boundsToLatLngs(s),a)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Ce(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function Xk(s,a){return new Uv(s,a)}mo.create=Il,mo.pointsToPath=Hg,qn.geometryToLayer=_l,qn.coordsToLatLng=Xh,qn.coordsToLatLngs=wl,qn.latLngToCoords=Jh,qn.latLngsToCoords=El,qn.getFeature=qr,qn.asFeature=Tl,fe.mergeOptions({boxZoom:!0});var jv=In.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){re(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ie(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Me(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),so(),Mh(),this._startPoint=this._map.mouseEventToContainerPoint(s),re(document,{contextmenu:ar,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=_e("div","leaflet-zoom-box",this._container),le(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var a=new X(this._point,this._startPoint),u=a.getSize();He(this._box,a.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(Me(this._box),je(this._container,"leaflet-crosshair")),oo(),bh(),Ie(document,{contextmenu:ar,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Qe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});fe.addInitHook("addHandler","boxZoom",jv),fe.mergeOptions({doubleClickZoom:!0});var Vv=In.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var a=this._map,u=a.getZoom(),d=a.options.zoomDelta,p=s.originalEvent.shiftKey?u-d:u+d;a.options.doubleClickZoom==="center"?a.setZoom(p):a.setZoomAround(s.containerPoint,p)}});fe.addInitHook("addHandler","doubleClickZoom",Vv),fe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Hv=In.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new vi(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}le(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){je(this._map._container,"leaflet-grab"),je(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=Ce(this._map.options.maxBounds);this._offsetLimit=me(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var a=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(a),this._prunePositions(a)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,a){return s-(s-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;s.x<a.min.x&&(s.x=this._viscousLimit(s.x,a.min.x)),s.y<a.min.y&&(s.y=this._viscousLimit(s.y,a.min.y)),s.x>a.max.x&&(s.x=this._viscousLimit(s.x,a.max.x)),s.y>a.max.y&&(s.y=this._viscousLimit(s.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,a=Math.round(s/2),u=this._initialWorldOffset,d=this._draggable._newPos.x,p=(d-a+u)%s+a-u,g=(d+a+u)%s-a-u,E=Math.abs(p+u)<Math.abs(g+u)?p:g;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=E},_onDragEnd:function(s){var a=this._map,u=a.options,d=!u.inertia||s.noInertia||this._times.length<2;if(a.fire("dragend",s),d)a.fire("moveend");else{this._prunePositions(+new Date);var p=this._lastPos.subtract(this._positions[0]),g=(this._lastTime-this._times[0])/1e3,E=u.easeLinearity,I=p.multiplyBy(E/g),x=I.distanceTo([0,0]),D=Math.min(u.inertiaMaxSpeed,x),V=I.multiplyBy(D/x),Q=D/(u.inertiaDeceleration*E),ue=V.multiplyBy(-Q/2).round();!ue.x&&!ue.y?a.fire("moveend"):(ue=a._limitOffset(ue,a.options.maxBounds),ke(function(){a.panBy(ue,{duration:Q,easeLinearity:E,noMoveStart:!0,animate:!0})}))}}});fe.addInitHook("addHandler","dragging",Hv),fe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Wv=In.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),re(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ie(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,a=document.documentElement,u=s.scrollTop||a.scrollTop,d=s.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(d,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var a=this._panKeys={},u=this.keyCodes,d,p;for(d=0,p=u.left.length;d<p;d++)a[u.left[d]]=[-1*s,0];for(d=0,p=u.right.length;d<p;d++)a[u.right[d]]=[s,0];for(d=0,p=u.down.length;d<p;d++)a[u.down[d]]=[0,s];for(d=0,p=u.up.length;d<p;d++)a[u.up[d]]=[0,-1*s]},_setZoomDelta:function(s){var a=this._zoomKeys={},u=this.keyCodes,d,p;for(d=0,p=u.zoomIn.length;d<p;d++)a[u.zoomIn[d]]=s;for(d=0,p=u.zoomOut.length;d<p;d++)a[u.zoomOut[d]]=-s},_addHooks:function(){re(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ie(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var a=s.keyCode,u=this._map,d;if(a in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(d=this._panKeys[a],s.shiftKey&&(d=F(d).multiplyBy(3)),u.options.maxBounds&&(d=u._limitOffset(F(d),u.options.maxBounds)),u.options.worldCopyJump){var p=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(d)));u.panTo(p)}else u.panBy(d)}else if(a in this._zoomKeys)u.setZoom(u.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;ar(s)}}});fe.addInitHook("addHandler","keyboard",Wv),fe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var qv=In.extend({addHooks:function(){re(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ie(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var a=gv(s),u=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var d=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),d),ar(s)},_performZoom:function(){var s=this._map,a=s.getZoom(),u=this._map.options.zoomSnap||0;s._stop();var d=this._delta/(this._map.options.wheelPxPerZoomLevel*4),p=4*Math.log(2/(1+Math.exp(-Math.abs(d))))/Math.LN2,g=u?Math.ceil(p/u)*u:p,E=s._limitZoom(a+(this._delta>0?g:-g))-a;this._delta=0,this._startTime=null,E&&(s.options.scrollWheelZoom==="center"?s.setZoom(a+E):s.setZoomAround(this._lastMousePos,a+E))}});fe.addInitHook("addHandler","scrollWheelZoom",qv);var Jk=600;fe.mergeOptions({tapHold:K.touchNative&&K.safari&&K.mobile,tapTolerance:15});var Zv=In.extend({addHooks:function(){re(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ie(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var a=s.touches[0];this._startPos=this._newPos=new O(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(re(document,"touchend",ut),re(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),Jk),re(document,"touchend touchcancel contextmenu",this._cancel,this),re(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Ie(document,"touchend",ut),Ie(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Ie(document,"touchend touchcancel contextmenu",this._cancel,this),Ie(document,"touchmove",this._onMove,this)},_onMove:function(s){var a=s.touches[0];this._newPos=new O(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,a){var u=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});u._simulated=!0,a.target.dispatchEvent(u)}});fe.addInitHook("addHandler","tapHold",Zv),fe.mergeOptions({touchZoom:K.touch,bounceAtZoomLimits:!0});var Kv=In.extend({addHooks:function(){le(this._map._container,"leaflet-touch-zoom"),re(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){je(this._map._container,"leaflet-touch-zoom"),Ie(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var a=this._map;if(!(!s.touches||s.touches.length!==2||a._animatingZoom||this._zooming)){var u=a.mouseEventToContainerPoint(s.touches[0]),d=a.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(u.add(d)._divideBy(2))),this._startDist=u.distanceTo(d),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),re(document,"touchmove",this._onTouchMove,this),re(document,"touchend touchcancel",this._onTouchEnd,this),ut(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var a=this._map,u=a.mouseEventToContainerPoint(s.touches[0]),d=a.mouseEventToContainerPoint(s.touches[1]),p=u.distanceTo(d)/this._startDist;if(this._zoom=a.getScaleZoom(p,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&p<1||this._zoom>a.getMaxZoom()&&p>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,p===1)return}else{var g=u._add(d)._divideBy(2)._subtract(this._centerPoint);if(p===1&&g.x===0&&g.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(g),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),tt(this._animRequest);var E=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ke(E,this,!0),ut(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,tt(this._animRequest),Ie(document,"touchmove",this._onTouchMove,this),Ie(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});fe.addInitHook("addHandler","touchZoom",Kv),fe.BoxZoom=jv,fe.DoubleClickZoom=Vv,fe.Drag=Hv,fe.Keyboard=Wv,fe.ScrollWheelZoom=qv,fe.TapHold=Zv,fe.TouchZoom=Kv,n.Bounds=X,n.Browser=K,n.CRS=$t,n.Canvas=zv,n.Circle=Yh,n.CircleMarker=yl,n.Class=Jt,n.Control=dn,n.DivIcon=Mv,n.DivOverlay=xn,n.DomEvent=vk,n.DomUtil=mk,n.Draggable=vi,n.Evented=Vn,n.FeatureGroup=Hn,n.GeoJSON=qn,n.GridLayer=fo,n.Handler=In,n.Icon=Hr,n.ImageOverlay=Sl,n.LatLng=ye,n.LatLngBounds=Qe,n.Layer=fn,n.LayerGroup=Vr,n.LineUtil=Ak,n.Map=fe,n.Marker=vl,n.Mixin=Ck,n.Path=yi,n.Point=O,n.PolyUtil=kk,n.Polygon=Wr,n.Polyline=Wn,n.Popup=Cl,n.PosAnimation=vv,n.Projection=Nk,n.Rectangle=Uv,n.Renderer=Zn,n.SVG=mo,n.SVGOverlay=Dv,n.TileLayer=Zr,n.Tooltip=kl,n.Transformation=Sh,n.Util=ir,n.VideoOverlay=Ov,n.bind=l,n.bounds=me,n.canvas=Fv,n.circle=Fk,n.circleMarker=zk,n.control=uo,n.divIcon=Kk,n.extend=r,n.featureGroup=Mk,n.geoJSON=Rv,n.geoJson=jk,n.gridLayer=Gk,n.icon=bk,n.imageOverlay=Vk,n.latLng=ie,n.latLngBounds=Ce,n.layerGroup=Dk,n.map=yk,n.marker=$k,n.point=F,n.polygon=Uk,n.polyline=Bk,n.popup=qk,n.rectangle=Xk,n.setOptions=k,n.stamp=h,n.svg=Bv,n.svgOverlay=Wk,n.tileLayer=bv,n.tooltip=Zk,n.transformation=to,n.version=i,n.videoOverlay=Hk;var eI=window.L;n.noConflict=function(){return window.L=eI,this},window.L=n})})(Pp,Pp.exports);var wh=Pp.exports;const MC=Uw(wh);function bC(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function $C(t,e){return e==null?function(i,r){const o=De.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=De.useRef();o.current||(o.current=t(i,r));const l=De.useRef(i),{instance:c}=o.current;return De.useEffect(function(){l.current!==i&&(e(c,i,l.current),l.current=i)},[c,i,r]),o}}function Zb(t,e){De.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function zC(t){return function(n){const i=Vb(),r=t(DC(n,i),i);return Fb(i.map,n.attribution),qb(r.current,n.eventHandlers),Zb(r.current,i),r}}function Kb(t,e){const n=$C(t,e),i=zC(n);return Hb(i)}function Gb(t,e){const n=$C(t,e),i=zC(n);return Wb(i)}function Qb(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function Lp(){return Lp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Lp.apply(this,arguments)}function Yb({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:l,style:c,whenReady:h,zoom:f,...m},v){const[y]=De.useState({className:r,id:o,style:c}),[T,C]=De.useState(null);De.useImperativeHandle(v,()=>(T==null?void 0:T.map)??null,[T]);const k=De.useCallback(S=>{if(S!==null&&T===null){const _=new wh.Map(S,m);n!=null&&f!=null?_.setView(n,f):t!=null&&_.fitBounds(t,e),h!=null&&_.whenReady(h),C(Ub(_))}},[]);De.useEffect(()=>()=>{T==null||T.map.remove()},[T]);const M=T?se.createElement(OC,{value:T},i):l??null;return se.createElement("div",Lp({},y,{ref:k}),M)}const Xb=De.forwardRef(Yb),Jb=Kb(function({position:e,...n},i){const r=new wh.Marker(e,n);return bC(r,jb(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),e$=Gb(function({url:e,...n},i){const r=new wh.TileLayer(e,DC(n,i));return bC(r,i)},function(e,n,i){Qb(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});const t$=MC.icon({iconUrl:"./assets/red-map-marker.png",iconSize:[30,30],iconAnchor:[12,41]}),n$=MC.icon({iconUrl:"./assets/blue-map-marker.png",iconSize:[30,30],iconAnchor:[12,41]});function i$(t){const[e,n]=se.useState([0,0]),[i,r]=se.useState(0),o=12;se.useEffect(()=>{t.value.length>0&&(n([t.value[0].center.lat,t.value[0].center.lon]),r(c=>c+1))},[t.value]);function l(c){let h=0;for(let f=0;f<t.value.length;f++)if(t.value[f].id==c){h=f;break}t.handleClick(h)}return A.jsxs(Xb,{center:e,zoom:o,className:"map",children:[A.jsx(e$,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t.value.map(c=>A.jsx(Jb,{position:[c.center.lat,c.center.lon],icon:c.id==t.index?t$:n$,eventHandlers:{click:()=>l(c.id)}},c.id))]},i)}function r$(t){const[e,n]=se.useState([]),[i,r]=se.useState("6464 Yonge St, North York"),[o,l]=se.useState({lat:"43.796656647925026",lon:"-79.42200704246716"}),[c,h]=se.useState(2e3),[f,m]=se.useState(0),[v,y]=se.useState(!0);function T(_,w,P,b){const U=(P-_)*(Math.PI/180),H=(b-w)*(Math.PI/180),ce=Math.sin(U/2)*Math.sin(U/2)+Math.cos(_*(Math.PI/180))*Math.cos(P*(Math.PI/180))*Math.sin(H/2)*Math.sin(H/2);return 6371*(2*Math.atan2(Math.sqrt(ce),Math.sqrt(1-ce)))}se.useEffect(()=>{(async()=>{try{const w=o.lat,P=o.lon,b=await v_.get("https://overpass-api.de/api/interpreter",{params:{data:`[out:json];(way(around:${c},${w},${P})["amenity"="community_centre"];way(around:${c},${w},${P})["leisure"="pitch"]["sport"="basketball"];way(around:${c},${w},${P})["amenity"="school"]["sport"="basketball"];);out center;`}});n(b.data.elements.sort((B,U)=>{const H=T(w,P,B.center.lat,B.center.lon),ce=T(w,P,U.center.lat,U.center.lon);return H-ce}))}catch(w){console.error("Error fetching Basketball Courts:",w)}})()},[o,c]);function C(_){if(_.target.className=="form-input"){const{value:w}=_.target;r(w)}if(_.target.className=="form-select"){const{value:w}=_.target;m(0),h(w)}}function k(_){_.key=="Enter"&&M()}async function M(){m(0);try{const _=await v_.get(`https://nominatim.openstreetmap.org/search?q=${i}&format=json`,{headers:{Referer:"https://jinhakimgh.github.io/Basketball-Court-Finder","User-Agent":"BasketballCourtFinder/1.0"}});if(_.data.length>0){const{lat:w,lon:P}=_.data[0];l({lat:w,lon:P}),y(!0)}else y(!1)}catch(_){console.error("Error geocoding location:",_)}}function S(_){_.target.name=="left"?f==0?m(e.length-1):m(w=>w-1):f==e.length-1?m(0):m(w=>w+1)}return A.jsxs("div",{children:[A.jsxs("div",{className:"form",children:[A.jsx("input",{type:"text",placeholder:"Toronto",onChange:C,onKeyDown:k,className:"form-input"}),A.jsxs("select",{id:"range",name:"range",className:"form-select",onChange:C,children:[A.jsx("option",{value:"1000",children:"1 km"}),A.jsx("option",{value:"5000",children:"5 km"}),A.jsx("option",{value:"10000",children:"10 km"}),A.jsx("option",{value:"20000",children:"20 km"})]}),A.jsx("button",{className:"submit",onClick:M,children:A.jsx("i",{className:"fa fa-search"})})]}),e.length>0&v?A.jsx(i$,{value:e,index:e[f].id,handleClick:m}):"",v&e.length>0?A.jsxs("div",{className:"view-court",children:[A.jsx("button",{className:"arrows",name:"left",onClick:S,children:A.jsx("i",{className:"arrow left",name:"left"})}),e.length>0&&A.jsx(zb,{value:e[f],distance:T(o.lat,o.lon,e[f].center.lat,e[f].center.lon),username:t.username,reviewData:t.reviewData,handleReviewData:t.handleReviewData},e[f].id),A.jsx("button",{className:"arrows",name:"right",onClick:S,children:A.jsx("i",{className:"arrow right",name:"right"})})]}):"",(v==!1||e.length==0)&&A.jsxs("div",{className:"error",children:["No results found from ",A.jsx("em",{children:i})]})]})}function s$(){return A.jsxs("div",{id:"about",className:"about",children:[A.jsx("p",{children:"About Me"}),A.jsx("h1",{children:"Hi, I'm Jinha Kim"}),A.jsx("p",{children:"A student currently studying at the University of Waterloo in the Computer Engineering Program"}),A.jsxs("div",{className:"contact",children:[A.jsx("a",{href:"mailto: j733kim@uwaterloo.ca",target:"_blank",rel:"noopener noreferrer",children:A.jsx("img",{src:"./assets/mail.png",className:"contact-icon"})}),A.jsx("a",{href:"https://github.com/JinhaKimGH",target:"_blank",rel:"noreferrer",children:A.jsx("img",{src:"./assets/github.png",className:"contact-icon"})}),A.jsx("a",{href:"https://www.linkedin.com/in/jinha-kim/",target:"_blank",rel:"noreferrer",children:A.jsx("img",{src:"./assets/linkedin.png",className:"contact-icon"})})]})]})}function o$(t){const[e,n]=se.useState(""),[i,r]=se.useState(""),[o,l]=se.useState([]);async function c(){const m=_r(Ri),v=yr(m,"users"),T=(await Bg(v)).docs.map(C=>C.data());l(T)}se.useEffect(()=>{c()},[]);function h(){t.handleClick("")}async function f(m){m.preventDefault();let v=document.getElementById("password");v.setCustomValidity(""),document.getElementById("email").setCustomValidity("");for(let y=0;y<o.length;y++)if(o[y].email==e)if(o[y].password==i){t.handleUser(e),t.handleArr(o[y].reviews),t.handleClick("");return}else{v.setCustomValidity("Incorrect Password");return}document.getElementById("email").setCustomValidity("This email is not associated with an account")}return A.jsx("div",{className:"login-signup-form",children:A.jsxs("div",{className:"form-base-login",children:[A.jsx("button",{onClick:h,className:"close-button",children:""}),A.jsxs("form",{className:"form-login",onSubmit:f,children:[A.jsx("h1",{className:"login-title",children:"Sign In"}),A.jsx("label",{children:"Email"}),A.jsx("br",{}),A.jsx("input",{id:"email",type:"email",name:"email",value:e,onChange:m=>n(m.target.value),className:"input-box",required:!0}),A.jsx("br",{}),A.jsx("label",{children:"Password"}),A.jsx("br",{}),A.jsx("input",{id:"password",type:"password",name:"password",value:i,onChange:m=>r(m.target.value),className:"input-box",required:!0}),A.jsx("br",{}),A.jsx("input",{type:"submit",value:"Login",className:"submit-button"}),A.jsx("br",{})]})]})})}function a$(t){const[e,n]=se.useState(""),[i,r]=se.useState(""),[o,l]=se.useState(""),[c,h]=se.useState([]);async function f(){const y=_r(Ri),T=yr(y,"users"),k=(await Bg(T)).docs.map(M=>M.data());h(k)}se.useEffect(()=>{f()},[]);function m(){t.handleClick("")}async function v(y){y.preventDefault();const T=_r(Ri);let C=document.getElementById("email-input");C.setCustomValidity("");for(let M=0;M<c.length;M++)if(e==c[M].email){C.setCustomValidity("An account for that email already exists");return}let k=document.getElementById("confirm-password");if(i!==o){k.setCustomValidity("Passwords Don't Match");return}else k.setCustomValidity("");try{let M=[];await Mb(yr(T,"users"),{email:e,password:i,reviews:M}),t.handleClick("LOGIN")}catch(M){console.error("Error signing up",M)}}return A.jsx("div",{className:"login-signup-form",children:A.jsxs("div",{className:"form-base-signup",onSubmit:v,children:[A.jsx("button",{onClick:m,className:"close-button",children:""}),A.jsxs("form",{className:"form-login",children:[A.jsx("h1",{className:"login-title",children:"Sign Up"}),A.jsx("label",{children:"Email"}),A.jsx("br",{}),A.jsx("input",{id:"email-input",type:"email",name:"email",value:e,onChange:y=>n(y.target.value),className:"input-box",required:!0}),A.jsx("br",{}),A.jsx("label",{children:"Password"}),A.jsx("br",{}),A.jsx("input",{id:"password",type:"password",name:"password",value:i,onChange:y=>r(y.target.value),className:"input-box",required:!0}),A.jsx("br",{}),A.jsx("label",{children:"Retype Password"}),A.jsx("br",{}),A.jsx("input",{id:"confirm-password",type:"password",name:"password",value:o,onChange:y=>l(y.target.value),className:"input-box",required:!0}),A.jsx("br",{}),A.jsx("input",{type:"submit",value:"Sign Up",className:"submit-button"}),A.jsx("br",{})]})]})})}function l$(){const[t,e]=se.useState(""),[n,i]=se.useState(""),[r,o]=se.useState({});return A.jsxs("div",{id:"home",children:[A.jsx(MP,{handleClick:e,username:n}),t=="LOGIN"?A.jsx(o$,{handleClick:e,handleUser:i,handleArr:o}):"",t=="SIGN UP"?A.jsx(a$,{handleClick:e}):"",A.jsx(r$,{username:n,reviewData:r,handleReviewData:o}),A.jsx(s$,{}),A.jsx("footer",{children:A.jsx("p",{className:"footer",children:" 2023 Basketball Court Finder"})})]})}Yd.createRoot(document.getElementById("root")).render(A.jsx(se.StrictMode,{children:A.jsx(l$,{})}));
